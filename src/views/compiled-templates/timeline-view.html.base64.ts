export const tpl =
  'PCFkb2N0eXBlIGh0bWw+CjxodG1sIGxhbmc9ImVuIj4KICA8aGVhZD4KICAgIDxtZXRhIGNoYXJzZXQ9IlVURi04IiAvPgogICAgPG1ldGEgbmFtZT0idmlld3BvcnQiIGNvbnRlbnQ9IndpZHRoPWRldmljZS13aWR0aCwgaW5pdGlhbC1zY2FsZT0xLjAiIC8+CiAgICA8dGl0bGU+UHJvamVjdHMgQWN0aXZpdHk8L3RpdGxlPgogICAgPHNjcmlwdCBzcmM9Imh0dHBzOi8vY2RuLmpzZGVsaXZyLm5ldC9ucG0vZWNoYXJ0c0A1LjQuMy9kaXN0L2VjaGFydHMubWluLmpzIj48L3NjcmlwdD4KICAgIDxzY3JpcHQgc3JjPSJodHRwczovL2Nkbi5qc2RlbGl2ci5uZXQvbnBtL2RhdGUtZm5zQDQuMS4wL2Nkbi5taW4uanMiPjwvc2NyaXB0PgogICAgPHN0eWxlPgogICAgICBib2R5IHsKICAgICAgICBmb250LWZhbWlseTogQXJpYWwsIHNhbnMtc2VyaWY7CiAgICAgICAgbWFyZ2luOiAyMHB4OwogICAgICAgIGNvbG9yOiAjMzMzOwogICAgICB9CiAgICAgIC5jb250YWluZXIgewogICAgICAgIG1heC13aWR0aDogMTgwMHB4OwogICAgICAgIG1hcmdpbjogMCBhdXRvOwogICAgICB9CiAgICAgIC5kYXNoYm9hcmQtaGVhZGVyIHsKICAgICAgICBkaXNwbGF5OiBmbGV4OwogICAgICAgIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjsKICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyOwogICAgICAgIG1hcmdpbi1ib3R0b206IDEwcHg7CiAgICAgIH0KICAgICAgLmRhc2hib2FyZC10aXRsZSB7CiAgICAgICAgbWFyZ2luOiAwOwogICAgICB9CiAgICAgIC5yb3cgewogICAgICAgIGRpc3BsYXk6IGZsZXg7CiAgICAgICAgbWFyZ2luLWJvdHRvbTogMzBweDsKICAgICAgICBnYXA6IDIwcHg7CiAgICAgIH0KICAgICAgLmNoYXJ0LWNvbnRhaW5lciB7CiAgICAgICAgZmxleDogMTsKICAgICAgICBoZWlnaHQ6IDYwMHB4OwogICAgICAgIGJvcmRlcjogMXB4IHNvbGlkICNlYWVhZWE7CiAgICAgICAgYm9yZGVyLXJhZGl1czogNXB4OwogICAgICAgIGJveC1zaGFkb3c6IDAgMnB4IDhweCByZ2JhKDAsIDAsIDAsIDAuMSk7CiAgICAgIH0KICAgICAgdGFibGUgewogICAgICAgIHdpZHRoOiAxMDAlOwogICAgICAgIGJvcmRlci1jb2xsYXBzZTogY29sbGFwc2U7CiAgICAgICAgbWFyZ2luLXRvcDogMTBweDsKICAgICAgICBib3gtc2hhZG93OiAwIDJweCA4cHggcmdiYSgwLCAwLCAwLCAwLjEpOwogICAgICB9CiAgICAgIHRoLAogICAgICB0ZCB7CiAgICAgICAgcGFkZGluZzogMTJweCAxNXB4OwogICAgICAgIHRleHQtYWxpZ246IGxlZnQ7CiAgICAgICAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkICNkZGQ7CiAgICAgIH0KICAgICAgdGggewogICAgICAgIGJhY2tncm91bmQtY29sb3I6ICNmOGY4Zjg7CiAgICAgICAgZm9udC13ZWlnaHQ6IGJvbGQ7CiAgICAgIH0KICAgICAgdHI6aG92ZXIgewogICAgICAgIGJhY2tncm91bmQtY29sb3I6ICNmNWY1ZjU7CiAgICAgIH0KICAgICAgYSB7CiAgICAgICAgY29sb3I6ICMxYTczZTg7CiAgICAgICAgdGV4dC1kZWNvcmF0aW9uOiBub25lOwogICAgICB9CiAgICAgIGE6aG92ZXIgewogICAgICAgIHRleHQtZGVjb3JhdGlvbjogdW5kZXJsaW5lOwogICAgICB9CiAgICAgIC50YWJsZS1jb250YWluZXIgewogICAgICAgIG1hcmdpbi10b3A6IDIwcHg7CiAgICAgICAgYm9yZGVyOiAxcHggc29saWQgI2VhZWFlYTsKICAgICAgICBib3JkZXItcmFkaXVzOiA1cHg7CiAgICAgICAgcGFkZGluZzogMTVweDsKICAgICAgICBib3gtc2hhZG93OiAwIDJweCA4cHggcmdiYSgwLCAwLCAwLCAwLjEpOwogICAgICB9CiAgICAgIC50YWJsZS1mb290ZXIgewogICAgICAgIGRpc3BsYXk6IGZsZXg7CiAgICAgICAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuOwogICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7CiAgICAgICAgbWFyZ2luLXRvcDogMTBweDsKICAgICAgICBtYXJnaW4tYm90dG9tOiA1cHg7CiAgICAgIH0KICAgICAgLnRhYmxlLWhlYWRlciB7CiAgICAgICAgZGlzcGxheTogZmxleDsKICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47CiAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjsKICAgICAgICBtYXJnaW4tYm90dG9tOiAxMHB4OwogICAgICB9CiAgICAgIGgyLAogICAgICBoMyB7CiAgICAgICAgbWFyZ2luOiAwOwogICAgICAgIGNvbG9yOiAjNDQ0OwogICAgICB9CiAgICAgIC5zb3VyY2UtZGVzY3JpcHRpb24gewogICAgICAgIGZvbnQtc3R5bGU6IGl0YWxpYzsKICAgICAgICBjb2xvcjogIzY2NjsKICAgICAgfQogICAgICAuc291cmNlLWluZm8gewogICAgICAgIGZvbnQtc3R5bGU6IGl0YWxpYzsKICAgICAgICBmb250LXNpemU6IHNtYWxsZXI7CiAgICAgICAgY29sb3I6ICM2NjY7CiAgICAgIH0KICAgICAgLnZpZXctbW9kZSB7CiAgICAgICAgbWFyZ2luLWxlZnQ6IDhweDsKICAgICAgICBmb250LXdlaWdodDogYm9sZDsKICAgICAgICBtaW4td2lkdGg6IDkwcHg7CiAgICAgIH0KICAgIDwvc3R5bGU+CiAgPC9oZWFkPgogIDxib2R5PgogICAgPGEgaHJlZj0iaW5kZXguaHRtbCI+8J+UmTwvYT4KICAgIDxkaXYgY2xhc3M9ImNvbnRhaW5lciI+CiAgICAgIDxkaXYgY2xhc3M9ImRhc2hib2FyZC1oZWFkZXIiPgogICAgICAgIDxoMiBpZD0iZGFzaGJvYXJkLXRpdGxlIiBjbGFzcz0iZGFzaGJvYXJkLXRpdGxlIj48L2gyPgogICAgICA8L2Rpdj4KICAgICAgPHAgY2xhc3M9InNvdXJjZS1kZXNjcmlwdGlvbiIgaWQ9ImRhc2hib2FyZC1kZXNjcmlwdGlvbiI+PC9wPgogICAgICA8cCBjbGFzcz0ic291cmNlLWluZm8iIGlkPSJkYXNoYm9hcmQtbWV0YWRhdGEiPjwvcD4KCiAgICAgIDxkaXYgY2xhc3M9InJvdyI+CiAgICAgICAgPGRpdiBjbGFzcz0iY2hhcnQtY29udGFpbmVyIiBpZD0id2Vla2x5Y29tcGxldGlvbmNoYXJ0Ij48L2Rpdj4KICAgICAgPC9kaXY+CiAgICAgIDxwIGNsYXNzPSJzb3VyY2UtaW5mbyI+CiAgICAgICAgKjkwdGggUGVyY2VudGlsZTogSGlnaGxpZ2h0cyB0aGUgOTAlIG9mIHRoZSBub2RlcyB3aXRoIHRoZQogICAgICAgIDxiPmxvd2VzdCBkdXJhdGlvbjwvYj4uIE9ubHkgc2hvd24gaWYgdGhlcmUgYXJlIG1vcmUgdGhhbiAyIGRhdGFwb2ludHMKICAgICAgICBpbiB0aGUgZ3JvdXAuCiAgICAgIDwvcD4KCiAgICAgIDxkaXYgY2xhc3M9InRhYmxlLWNvbnRhaW5lciI+CiAgICAgICAgPGRpdiBjbGFzcz0idGFibGUtaGVhZGVyIj4KICAgICAgICAgIDxoMyBpZD0idGFibGUtdGl0bGUiPjwvaDM+CiAgICAgICAgICA8c3BhbiBpZD0ic2VsZWN0ZWQtc291cmNlIj5DbGljayBvbiBjaGFydCBlbGVtZW50cyBzZWUgZGV0YWlsczwvc3Bhbj4KICAgICAgICA8L2Rpdj4KICAgICAgICA8dGFibGU+CiAgICAgICAgICA8dGhlYWQ+CiAgICAgICAgICAgIDx0cj4KICAgICAgICAgICAgICA8dGg+IzwvdGg+CiAgICAgICAgICAgICAgPHRoPlRpdGxlPC90aD4KICAgICAgICAgICAgICA8dGg+VHlwZTwvdGg+CiAgICAgICAgICAgICAgPHRoPlJlcG88L3RoPgogICAgICAgICAgICAgIDx0aD5NaWxlc3RvbmU8L3RoPgogICAgICAgICAgICAgIDx0aD5Qb2ludHM8L3RoPgogICAgICAgICAgICA8L3RyPgogICAgICAgICAgPC90aGVhZD4KICAgICAgICAgIDx0Ym9keSBpZD0iZGV0YWlscy10YWJsZSI+CiAgICAgICAgICAgIDx0cj4KICAgICAgICAgICAgICA8dGQgY29sc3Bhbj0iMyI+Tm8gZGF0YSBzZWxlY3RlZDwvdGQ+CiAgICAgICAgICAgIDwvdHI+CiAgICAgICAgICA8L3Rib2R5PgogICAgICAgIDwvdGFibGU+CiAgICAgIDwvZGl2PgoKICAgICAgPHAgY2xhc3M9InNvdXJjZS1pbmZvIiBpZD0iZGFzaGJvYXJkLXByb2plY3RmaWx0ZXIiPjwvcD4KICAgIDwvZGl2PgoKICAgIDxzY3JpcHQ+CiAgICAgIGNvbnN0IGJhc2U2NERlY29kZVVuaWNvZGUgPSAoYmFzZTY0U3RyaW5nKSA9PiB7CiAgICAgICAgY29uc3QgYmluYXJ5U3RyaW5nID0gd2luZG93LmF0b2IoYmFzZTY0U3RyaW5nKQogICAgICAgIGNvbnN0IGJ5dGVzID0gbmV3IFVpbnQ4QXJyYXkoYmluYXJ5U3RyaW5nLmxlbmd0aCkKCiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBiaW5hcnlTdHJpbmcubGVuZ3RoOyBpKyspIHsKICAgICAgICAgIGJ5dGVzW2ldID0gYmluYXJ5U3RyaW5nLmNoYXJDb2RlQXQoaSkKICAgICAgICB9CgogICAgICAgIHJldHVybiBuZXcgVGV4dERlY29kZXIoJ3V0Zi04JykuZGVjb2RlKGJ5dGVzKQogICAgICB9CgogICAgICAvLyBTaW5nbGUgSmF2YVNjcmlwdCBkYXRhIG9iamVjdCBjb250YWluaW5nIGFsbCBvdXIgZGF0YQogICAgICBjb25zdCBzcmNEYXRhID0gYmFzZTY0RGVjb2RlVW5pY29kZSgnUkVQTEFDRV9NRScpCiAgICAgIGNvbnN0IGdyb3VwTWV0cmljcyA9IEpTT04ucGFyc2Uoc3JjRGF0YSkKICAgICAgY29uc29sZS5sb2coJ1NvdXJjZSBkYXRhIGRlY29kZWQnLCBncm91cE1ldHJpY3MpCgogICAgICAvLyBDb3BpZWQgdG8gdGhlIHdpbmRvdyBvYmplY3QgdG8gZmFjaWxpdGF0ZSBidWlsZGluZyBvZiBxdWVyaWVzCiAgICAgIHdpbmRvdy5kYXRhTm9kZXMgPSBncm91cE1ldHJpY3Mubm9kZXMKCiAgICAgIGRvY3VtZW50LnRpdGxlID0gZ3JvdXBNZXRyaWNzLm5hbWUKCiAgICAgIC8vIFVwZGF0ZSB0aGUgdGFibGUgd2l0aCBkYXRhIGNsaWNrZWQgaW4gdGhlIGNoYXJ0CiAgICAgIGZ1bmN0aW9uIHVwZGF0ZVRhYmxlKHsgc3JjQ2hhcnQsIHNlbGVjdGlvbiwgbm9kZXMgfSkgewogICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0YWJsZS10aXRsZScpLnRleHRDb250ZW50ID0KICAgICAgICAgIGBOb2RlcyBmcm9tICR7c3JjQ2hhcnR9YAogICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzZWxlY3RlZC1zb3VyY2UnKS50ZXh0Q29udGVudCA9CiAgICAgICAgICBgU2VsZWN0aW9uOiAke3NlbGVjdGlvbn1gCgogICAgICAgIGNvbnN0IHRhYmxlQm9keSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkZXRhaWxzLXRhYmxlJykKICAgICAgICB0YWJsZUJvZHkuaW5uZXJIVE1MID0gJycKCiAgICAgICAgbm9kZXMuZm9yRWFjaCgobm9kZSkgPT4gewogICAgICAgICAgY29uc3Qgcm93ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndHInKQogICAgICAgICAgcm93LmlubmVySFRNTCA9IGAKICAgICAgICAgICAgICAgIDx0ZD4ke25vZGUubnVtYmVyfTwvdGQ+CiAgICAgICAgICAgICAgICA8dGQ+PGEgaHJlZj0iJHtub2RlLnVybH0iIHRhcmdldD0iX2JsYW5rIj4ke25vZGUudGl0bGV9PC9hPjwvdGQ+CiAgICAgICAgICAgICAgICA8dGQ+JHtub2RlLnR5cGV9PC90ZD4KICAgICAgICAgICAgICAgIDx0ZD48YSBocmVmPSIke25vZGUucmVwb3NpdG9yeS51cmx9IiB0YXJnZXQ9Il9ibGFuayI+JHtub2RlLnJlcG9zaXRvcnkub3duZXIubG9naW59LyR7bm9kZS5yZXBvc2l0b3J5Lm5hbWV9PC9hPjwvdGQ+CiAgICAgICAgICAgICAgICA8dGQ+JHtub2RlLm1pbGVzdG9uZT8udGl0bGUgPyBub2RlLm1pbGVzdG9uZT8udGl0bGUgOiAnJ308L3RkPgogICAgICAgICAgICAgICAgPHRkPiR7bm9kZS5wb2ludHN9PC90ZD4KICAgICAgICAgICAgICBgCiAgICAgICAgICB0YWJsZUJvZHkuYXBwZW5kQ2hpbGQocm93KQogICAgICAgIH0pCiAgICAgIH0KCiAgICAgIGNvbnN0IHRvb2x0aXBGb3JtYXR0ZXIgPSAocGFyYW1zLCBncm91cHMpID0+IHsKICAgICAgICAvLyBsZXQgcmVzdWx0ID0gYCR7cGFyYW1zWzBdLnZhbHVlWzBdfSBkYXkke3BhcmFtc1swXS52YWx1ZVswXSA+IDEgPyAncycgOiAnJ306ICR7cGFyYW1zWzBdLnZhbHVlWzJdfSBub2RlJHtwYXJhbXNbMF0udmFsdWVbMl0gPiAxID8gJ3MnIDogJyd9YAogICAgICAgIGNvbnN0IGdyb3VwID0gZ3JvdXBzLmZpbmQoKGcpID0+IGcubmFtZSA9PT0gcGFyYW1zLnNlcmllc05hbWUpCiAgICAgICAgaWYgKCFncm91cCkgewogICAgICAgICAgcmV0dXJuICdObyBkYXRhIGF2YWlsYWJsZSBmb3IgdGhpcyBncm91cCcKICAgICAgICB9CgogICAgICAgIGNvbnN0IGRheXNDb3VudCA9IHBhcmFtcy52YWx1ZVswXQogICAgICAgIGNvbnN0IHNlbGVjdGVkTm9kZXMgPSBncm91cC5ub2Rlcy5maWx0ZXIoCiAgICAgICAgICAobm9kZSkgPT4gbm9kZS50aW1lbGluZU1ldHJpY3MuZHVyYXRpb24gPT09IGRheXNDb3VudAogICAgICAgICkKCiAgICAgICAgbGV0IHJlc3VsdCA9IGA8Yj4ke3BhcmFtcy5zZXJpZXNOYW1lfTwvYj48YnIgLz5gCiAgICAgICAgcmVzdWx0ICs9IGAke3NlbGVjdGVkTm9kZXMubGVuZ3RofSBub2RlJHtzZWxlY3RlZE5vZGVzLmxlbmd0aCA+IDEgPyAncycgOiAnJ30gaW4gJHtkYXlzQ291bnR9IGRheSR7ZGF5c0NvdW50ID4gMSA/ICdzJyA6ICcnfTxiciAvPmAKICAgICAgICByZXN1bHQgKz0gYE1lZGlhbjogJHtncm91cC5tZXRyaWNzLmw5MC5tZWRpYW59IGRheXM8YnIgLz5gCiAgICAgICAgcmV0dXJuIHJlc3VsdAogICAgICB9CgogICAgICBmdW5jdGlvbiBjcmVhdGVUaW1lbGluZUNoYXJ0KGVsZW1lbnRJZCwgZGF0YSkgewogICAgICAgIC8vIFBsYWNlaG9sZGVycyBmb3IgdGhlIGNoYXJ0CiAgICAgICAgY29uc3QgdGl0bGUgPSBbXQogICAgICAgIGNvbnN0IHNpbmdsZUF4aXMgPSBbXQogICAgICAgIGNvbnN0IHNlcmllcyA9IFtdCgogICAgICAgIGNvbnN0IG5iRGF5cyA9IGRhdGEubm9kZXMubWFwKChpdGVtKSA9PiBpdGVtLnRpbWVsaW5lTWV0cmljcy5kdXJhdGlvbikKICAgICAgICBjb25zb2xlLmxvZygnRGF5cyBwcmVzZW50IGluIHRoZSBkYXRhc2V0OicsIG5iRGF5cykKCiAgICAgICAgY29uc3QgZGF5c1Blckdyb3VwID0gW10KICAgICAgICBmb3IgKGNvbnN0IGdyb3VwIG9mIGRhdGEuZ3JvdXBzKSB7CiAgICAgICAgICBpZiAoZ3JvdXAubm9kZXMubGVuZ3RoID4gMCkgewogICAgICAgICAgICBjb25zdCBuYkRheXMgPSBncm91cC5ub2Rlcy5tYXAoCiAgICAgICAgICAgICAgKGl0ZW0pID0+IGl0ZW0udGltZWxpbmVNZXRyaWNzLmR1cmF0aW9uCiAgICAgICAgICAgICkKICAgICAgICAgICAgY29uc3QgZGF5U2l6ZU1hcCA9IG5iRGF5cy5yZWR1Y2UoKGFjYywgZGF5KSA9PiB7CiAgICAgICAgICAgICAgYWNjW2RheV0gPSAoYWNjW2RheV0gfHwgMCkgKyAxCiAgICAgICAgICAgICAgcmV0dXJuIGFjYwogICAgICAgICAgICB9LCB7fSkKICAgICAgICAgICAgY29uc3QgZGF5U2l6ZUFycmF5ID0gT2JqZWN0LmVudHJpZXMoZGF5U2l6ZU1hcCkuZm9yRWFjaCgKICAgICAgICAgICAgICAoW2lkLCBzaXplXSkgPT4gewogICAgICAgICAgICAgICAgZGF5c1Blckdyb3VwLnB1c2goewogICAgICAgICAgICAgICAgICBuYW1lOiBncm91cC5uYW1lLAogICAgICAgICAgICAgICAgICBkYXk6IE51bWJlcihpZCksCiAgICAgICAgICAgICAgICAgIHNpemUKICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgfQogICAgICAgICAgICApCiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGNvbnNvbGUubG9nKCdEYXlzIHByZXNlbnQgaW4gdGhlIGRhdGFzZXQgcGVyIGdyb3VwOicsIGRheXNQZXJHcm91cCkKCiAgICAgICAgY29uc3QgZ2V0U3ltYm9sU2l6ZSA9IChkYXRhSXRlbSwgZGF5c1Blckdyb3VwKSA9PiB7CiAgICAgICAgICAvLyBTeW1ib2wgc2l6ZSBzaG91bGQgbm90IGJlIHRhbGxlciB0aGFuIHRoZSBoZWlnaHQgb2YgdGhlIGxpbmUKICAgICAgICAgIGNvbnN0IG1pblNpemUgPSA1CiAgICAgICAgICBjb25zdCBtYXhTaXplID0gNDAKICAgICAgICAgIGNvbnN0IG1pbkNvdW50ID0gTWF0aC5taW4oLi4uZGF5c1Blckdyb3VwLm1hcCgoaXRlbSkgPT4gaXRlbS5zaXplKSkKICAgICAgICAgIGNvbnN0IG1heENvdW50ID0gTWF0aC5tYXgoLi4uZGF5c1Blckdyb3VwLm1hcCgoaXRlbSkgPT4gaXRlbS5zaXplKSkKCiAgICAgICAgICBjb25zdCBzeW1ib2xDb3VudCA9IGRhdGFJdGVtWzJdCiAgICAgICAgICBpZiAoc3ltYm9sQ291bnQgPT09IDApIHJldHVybiAwCgogICAgICAgICAgaWYgKG1pbkNvdW50ID09PSBtYXhDb3VudCkgcmV0dXJuIChtaW5TaXplICsgbWF4U2l6ZSkgLyAyCiAgICAgICAgICAvLyBzcXJ0IHNjYWxpbmcsIG5vcm1hbGl6ZWQKICAgICAgICAgIGNvbnN0IHNjYWxlID0KICAgICAgICAgICAgKE1hdGguc3FydChzeW1ib2xDb3VudCkgLSBNYXRoLnNxcnQobWluQ291bnQpKSAvCiAgICAgICAgICAgIChNYXRoLnNxcnQobWF4Q291bnQpIC0gTWF0aC5zcXJ0KG1pbkNvdW50KSkKICAgICAgICAgIHJldHVybiBtaW5TaXplICsgc2NhbGUgKiAobWF4U2l6ZSAtIG1pblNpemUpCiAgICAgICAgfQoKICAgICAgICBjb25zdCBncm91cHMgPSBkYXRhLmdyb3Vwcy5sZW5ndGggPiAwID8gZGF0YS5ncm91cHMgOiBbZGF0YV0KCiAgICAgICAgLy8gR2VuZXJhdGUgYW4gYXJyYXkgb2YgYWxsIGRheXMgYmV0d2VlbiB0aGUgbWluaW11bSBhbmQgbWF4aW11bSBkYXlzCiAgICAgICAgY29uc3QgbWluRGF5ID0gTWF0aC5taW4oLi4ubmJEYXlzKQogICAgICAgIGNvbnN0IG1heERheSA9IE1hdGgubWF4KC4uLm5iRGF5cykKICAgICAgICBjb25zdCBhbGxEYXlzID0gW10KICAgICAgICBmb3IgKGxldCBpID0gbWluRGF5OyBpIDw9IG1heERheTsgaSsrKSB7CiAgICAgICAgICBhbGxEYXlzLnB1c2goaSkKICAgICAgICB9CgogICAgICAgIGNvbnNvbGUubG9nKGBNaW46ICR7bWluRGF5fSwgTWF4OiAke21heERheX0sIEFsbCBkYXlzOiAke2FsbERheXN9YCkKCiAgICAgICAgZ3JvdXBzLmZvckVhY2goZnVuY3Rpb24gKGdyb3VwLCBpZHgpIHsKICAgICAgICAgIGNvbnN0IGNlbnRlcmxpbmUgPSBpZHggPT09IDAgPyAyMCA6IDIwICsgaWR4ICogMjAKICAgICAgICAgIGNvbnN0IHVuaXF1ZWw5MERheXMgPSBBcnJheS5mcm9tKAogICAgICAgICAgICBuZXcgU2V0KGdyb3VwLm1ldHJpY3MubDkwLmRhdGFwb2ludHMpCiAgICAgICAgICApCiAgICAgICAgICAvLyBnZW5lcmF0ZSBhIG5pY2UgSFRNTCBjb2xvciBiYXNlZCBvbiAiZ3JvdXAubmFtZSIKICAgICAgICAgIGNvbnN0IGNvbG9yID0gYGhzbCgkeyhpZHggKiAzNjApIC8gZ3JvdXBzLmxlbmd0aH0sIDcwJSwgNTAlKWAKCiAgICAgICAgICAvLyBPbmx5IGRpc3BsYXkgdGhlIDkwJWlscyBpZiB0aGVyZSBhcmUgbW9yZSB0aGFuIDIgZGF0YXBvaW50cwogICAgICAgICAgaWYgKGdyb3VwLm1ldHJpY3MuZGF0YXBvaW50cy5sZW5ndGggPiAyKSB7CiAgICAgICAgICAgIHNlcmllcy5wdXNoKHsKICAgICAgICAgICAgICBuYW1lOiAnbWVkaWFuJywKICAgICAgICAgICAgICBkYXRhOiBbCiAgICAgICAgICAgICAgICBbZ3JvdXAubWV0cmljcy5sOTAubWVkaWFuLCBjZW50ZXJsaW5lIC0gNl0sCiAgICAgICAgICAgICAgICBbZ3JvdXAubWV0cmljcy5sOTAubWVkaWFuLCBjZW50ZXJsaW5lIC0gM10KICAgICAgICAgICAgICBdLAogICAgICAgICAgICAgIHR5cGU6ICdsaW5lJywKICAgICAgICAgICAgICBzaWxlbnQ6IHRydWUsCiAgICAgICAgICAgICAgaG92ZXJBbmltYXRpb246IGZhbHNlLAogICAgICAgICAgICAgIGVtcGhhc2lzOiB7CiAgICAgICAgICAgICAgICBkaXNhYmxlZDogdHJ1ZQogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgbGluZVN0eWxlOiB7CiAgICAgICAgICAgICAgICBjb2xvcjogY29sb3IsCiAgICAgICAgICAgICAgICB0eXBlOiAnc29saWQnLAogICAgICAgICAgICAgICAgd2lkdGg6IDMKICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIHNob3dTeW1ib2w6IGZhbHNlLAogICAgICAgICAgICAgIGFuaW1hdGlvbjogZmFsc2UKICAgICAgICAgICAgfSkKICAgICAgICAgIH0KICAgICAgICAgIHNlcmllcy5wdXNoKHsKICAgICAgICAgICAgbmFtZTogZ3JvdXAubmFtZSwgLy8gQWRkIG5hbWUgZm9yIGxlZ2VuZAogICAgICAgICAgICBzeW1ib2xTaXplOiBmdW5jdGlvbiAoZGF0YUl0ZW0pIHsKICAgICAgICAgICAgICByZXR1cm4gZ2V0U3ltYm9sU2l6ZShkYXRhSXRlbSwgZGF5c1Blckdyb3VwKQogICAgICAgICAgICAgIC8vIFN5bWJvbCBzaXplIHNob3VsZCBub3QgYmUgdGFsbGVyIHRoYW4gdGhlIGhlaWdodCBvZiB0aGUgbGluZQogICAgICAgICAgICAgIC8vIHRoaXMgaXMgY3VycmVudGx5IG5vdCBjb3ZlcmVkLCBuZWVkIHRvIGltcGxlbWVudCBhIHJhdGlvIG9mIHNpemUgdnMuIHRoZSBkYXRhc2V0CiAgICAgICAgICAgICAgcmV0dXJuIGRhdGFJdGVtWzJdID09PSAwID8gMCA6IDUgKyBkYXRhSXRlbVsyXSAqIDUKICAgICAgICAgICAgfSwKICAgICAgICAgICAgZGF0YTogYWxsRGF5cy5tYXAoKGRheSkgPT4gewogICAgICAgICAgICAgIGNvbnN0IGRheURhdGEgPSBncm91cC5ub2Rlcy5maWx0ZXIoCiAgICAgICAgICAgICAgICAoaXRlbSkgPT4gaXRlbS50aW1lbGluZU1ldHJpY3MuZHVyYXRpb24gPT09IGRheQogICAgICAgICAgICAgICkKICAgICAgICAgICAgICBjb25zdCBjb3VudCA9IGRheURhdGEubGVuZ3RoCiAgICAgICAgICAgICAgcmV0dXJuIFtkYXksIGNlbnRlcmxpbmUsIGNvdW50XQogICAgICAgICAgICB9KSwKICAgICAgICAgICAgdHlwZTogJ3NjYXR0ZXInLAogICAgICAgICAgICBpdGVtU3R5bGU6IHsKICAgICAgICAgICAgICBjb2xvcjogY29sb3IKICAgICAgICAgICAgfSwKICAgICAgICAgICAgLy8gbWFya1BvaW50OiB7CiAgICAgICAgICAgIC8vICAgZGF0YTogW3sgeUF4aXM6IGNlbnRlcmxpbmUsIHhBeGlzOiBncm91cC5tZXRyaWNzLmw5MC5tZWRpYW4gfV0KICAgICAgICAgICAgLy8gfSwKICAgICAgICAgICAgbWFya0FyZWE6CiAgICAgICAgICAgICAgdW5pcXVlbDkwRGF5cy5sZW5ndGggPD0gMgogICAgICAgICAgICAgICAgPyBmYWxzZQogICAgICAgICAgICAgICAgOiB7CiAgICAgICAgICAgICAgICAgICAgc2lsZW50OiB0cnVlLAogICAgICAgICAgICAgICAgICAgIGl0ZW1TdHlsZTogewogICAgICAgICAgICAgICAgICAgICAgY29sb3I6ICd0cmFuc3BhcmVudCcsCiAgICAgICAgICAgICAgICAgICAgICBib3JkZXJXaWR0aDogMSwKICAgICAgICAgICAgICAgICAgICAgIGJvcmRlclR5cGU6ICdkYXNoZWQnCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBkYXRhOiBbCiAgICAgICAgICAgICAgICAgICAgICBbCiAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiAnOTB0aCBQZXJjZW50aWxlJywKICAgICAgICAgICAgICAgICAgICAgICAgICB4QXhpczogZ3JvdXAubWV0cmljcy5sOTAubWluLAogICAgICAgICAgICAgICAgICAgICAgICAgIHlBeGlzOiBjZW50ZXJsaW5lIC0gNQogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgeEF4aXM6IGdyb3VwLm1ldHJpY3MubDkwLm1heCwKICAgICAgICAgICAgICAgICAgICAgICAgICB5QXhpczogY2VudGVybGluZSArIDUKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgXQogICAgICAgICAgICAgICAgICAgIF0KICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgfSkKICAgICAgICB9KQoKICAgICAgICAvLyBBZGQgbGVnZW5kIHRvIG9wdGlvbnMKCiAgICAgICAgY29uc3QgY2hhcnREb20gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChlbGVtZW50SWQpCiAgICAgICAgY29uc3QgbXlDaGFydCA9IGVjaGFydHMuaW5pdChjaGFydERvbSkKCiAgICAgICAgY29uc3Qgb3B0aW9uID0gewogICAgICAgICAgdGl0bGU6IHRpdGxlLAogICAgICAgICAgeEF4aXM6IHsKICAgICAgICAgICAgdHlwZTogJ3ZhbHVlJywKICAgICAgICAgICAgbWluSW50ZXJ2YWw6IDEsCiAgICAgICAgICAgIG1heEludGVydmFsOiAxLAogICAgICAgICAgICBzcGxpdE51bWJlcjogMTAsCiAgICAgICAgICAgIHNwbGl0TGluZTogewogICAgICAgICAgICAgIHNob3c6IHRydWUsCiAgICAgICAgICAgICAgbGluZVN0eWxlOiB7CiAgICAgICAgICAgICAgICB0eXBlOiAnZGFzaGVkJwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfSwKICAgICAgICAgIHRvb2x0aXA6IHsKICAgICAgICAgICAgdHJpZ2dlcjogJ2l0ZW0nLAogICAgICAgICAgICBheGlzUG9pbnRlcjogewogICAgICAgICAgICAgIHR5cGU6ICdzaGFkb3cnCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGZvcm1hdHRlcjogZnVuY3Rpb24gKHBhcmFtcykgewogICAgICAgICAgICAgIHJldHVybiB0b29sdGlwRm9ybWF0dGVyKHBhcmFtcywgZ3JvdXBzKQogICAgICAgICAgICB9CiAgICAgICAgICB9LAogICAgICAgICAgeUF4aXM6IHsKICAgICAgICAgICAgc2hvdzogZmFsc2UsCiAgICAgICAgICAgIG1heDogMjAgKyBncm91cHMubGVuZ3RoICogMjAKICAgICAgICAgIH0sCiAgICAgICAgICBsZWdlbmQ6IHsKICAgICAgICAgICAgbGVmdDogJ2NlbnRlcicsCiAgICAgICAgICAgIHRvcDogMTAKICAgICAgICAgIH0sCiAgICAgICAgICBzZXJpZXM6IHNlcmllcwogICAgICAgIH0KCiAgICAgICAgLy8gQXBwbHkgb3B0aW9ucyB0byBjaGFydAogICAgICAgIG15Q2hhcnQuc2V0T3B0aW9uKG9wdGlvbikKCiAgICAgICAgLy8gQWRkIGNsaWNrIGV2ZW50IGZvciBpbnRlcmFjdGl2aXR5CiAgICAgICAgbXlDaGFydC5vbignY2xpY2snLCBmdW5jdGlvbiAocGFyYW1zKSB7CiAgICAgICAgICBjb25zdCBncm91cE5hbWUgPSBwYXJhbXMuc2VyaWVzTmFtZQogICAgICAgICAgY29uc3QgZ3JvdXBJbmRleCA9IHBhcmFtcy5kYXRhSW5kZXgKICAgICAgICAgIGNvbnN0IGdyb3VwID0gZ3JvdXBzLmZpbmQoKGdyb3VwKSA9PiBncm91cC5uYW1lID09PSBncm91cE5hbWUpCiAgICAgICAgICBjb25zb2xlLmxvZygKICAgICAgICAgICAgYENsaWNrZWQgb24gZ3JvdXA6ICR7Z3JvdXBOYW1lfSwgaW5kZXg6ICR7Z3JvdXBJbmRleH0sIGRhdGE6YCwKICAgICAgICAgICAgZ3JvdXAKICAgICAgICAgICkKICAgICAgICAgIGlmIChncm91cCAmJiBncm91cC5ub2Rlcy5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgIGNvbnN0IG51bWJlck9mRGF5cyA9IHBhcmFtcy5kYXRhWzBdCiAgICAgICAgICAgIGNvbnN0IGdyb3VwU2VsZWN0aW9uID0gZ3JvdXAubm9kZXMuZmlsdGVyKAogICAgICAgICAgICAgIChub2RlKSA9PiBub2RlLnRpbWVsaW5lTWV0cmljcy5kdXJhdGlvbiA9PT0gbnVtYmVyT2ZEYXlzCiAgICAgICAgICAgICkKICAgICAgICAgICAgdXBkYXRlVGFibGUoewogICAgICAgICAgICAgIHNyY0NoYXJ0OiBncm91cE5hbWUsCiAgICAgICAgICAgICAgc2VsZWN0aW9uOiBgJHtncm91cE5hbWV9IGZvciBhIGR1cmF0aW9uIG9mICR7bnVtYmVyT2ZEYXlzfSBkYXkke251bWJlck9mRGF5cyA+IDAgPyAncycgOiAnJ30gKCR7Z3JvdXBTZWxlY3Rpb24ubGVuZ3RofSBub2RlcylgLAogICAgICAgICAgICAgIG5vZGVzOiBncm91cFNlbGVjdGlvbgogICAgICAgICAgICB9KQogICAgICAgICAgfQogICAgICAgIH0pCgogICAgICAgIC8vIE1ha2UgY2hhcnQgcmVzcG9uc2l2ZQogICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBteUNoYXJ0LnJlc2l6ZSgpCiAgICAgICAgfSkKCiAgICAgICAgcmV0dXJuIG15Q2hhcnQKICAgICAgfQoKICAgICAgY29uc3QgZmlsdGVyZWREYXRhc2V0ID0gKGdyb3VwTWV0cmljcykgPT4gewogICAgICAgIGlmIChncm91cE1ldHJpY3MucXVlcnkgPT09IHVuZGVmaW5lZCkgewogICAgICAgICAgcmV0dXJuICcnCiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHJldHVybiBgT3ZlcmFsbCBwcm9qZWN0IGRhdGEgZmlsdGVyZWQ6ICR7SlNPTi5zdHJpbmdpZnkoZ3JvdXBNZXRyaWNzLnF1ZXJ5KX0gIDxiciAvPmAKICAgICAgICB9CiAgICAgIH0KCiAgICAgIC8vIEZ1bmN0aW9uIHRvIGluaXRpYWxpemUgdGhlIGRhc2hib2FyZCBtZXRhZGF0YQogICAgICBmdW5jdGlvbiBpbml0aWFsaXplRGFzaGJvYXJkKCkgewogICAgICAgIC8vIFNldCBkYXNoYm9hcmQgdGl0bGUgYW5kIG1ldGFkYXRhIGZyb20gdGhlIGRhdGEgb2JqZWN0CiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Rhc2hib2FyZC10aXRsZScpLnRleHRDb250ZW50ID0KICAgICAgICAgIGdyb3VwTWV0cmljcy5uYW1lCiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Rhc2hib2FyZC1kZXNjcmlwdGlvbicpLnRleHRDb250ZW50ID0KICAgICAgICAgIGdyb3VwTWV0cmljcy5kZXNjcmlwdGlvbgoKICAgICAgICBpZiAoZ3JvdXBNZXRyaWNzLnF1ZXJ5ID09PSB1bmRlZmluZWQpIHsKICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkYXNoYm9hcmQtcHJvamVjdGZpbHRlcicpLnRleHRDb250ZW50ID0gJycKICAgICAgICB9IGVsc2UgewogICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Rhc2hib2FyZC1wcm9qZWN0ZmlsdGVyJykudGV4dENvbnRlbnQgPQogICAgICAgICAgICBgT3ZlcmFsbCBwcm9qZWN0IGRhdGEgZmlsdGVyZWQ6ICR7SlNPTi5zdHJpbmdpZnkoZ3JvdXBNZXRyaWNzLnF1ZXJ5KX1gCiAgICAgICAgfQoKICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGFzaGJvYXJkLW1ldGFkYXRhJykudGV4dENvbnRlbnQgPQogICAgICAgICAgYExhc3QgdXBkYXRlZDogJHtncm91cE1ldHJpY3MudXBkYXRlZEF0fWAKCiAgICAgICAgY3JlYXRlVGltZWxpbmVDaGFydCgnd2Vla2x5Y29tcGxldGlvbmNoYXJ0JywgZ3JvdXBNZXRyaWNzKQogICAgICB9CgogICAgICAvLyBJbml0aWFsaXplIGFsbCBjaGFydHMgd2hlbiBET00gaXMgbG9hZGVkCiAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCBpbml0aWFsaXplRGFzaGJvYXJkKQogICAgPC9zY3JpcHQ+CiAgPC9ib2R5Pgo8L2h0bWw+Cg=='

export default tpl
