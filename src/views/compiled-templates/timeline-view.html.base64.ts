export const tpl =
  'PCFkb2N0eXBlIGh0bWw+CjxodG1sIGxhbmc9ImVuIj4KICA8aGVhZD4KICAgIDxtZXRhIGNoYXJzZXQ9IlVURi04IiAvPgogICAgPG1ldGEgbmFtZT0idmlld3BvcnQiIGNvbnRlbnQ9IndpZHRoPWRldmljZS13aWR0aCwgaW5pdGlhbC1zY2FsZT0xLjAiIC8+CiAgICA8dGl0bGU+UHJvamVjdHMgQWN0aXZpdHk8L3RpdGxlPgogICAgPHNjcmlwdCBzcmM9Imh0dHBzOi8vY2RuLmpzZGVsaXZyLm5ldC9ucG0vZWNoYXJ0c0A1LjQuMy9kaXN0L2VjaGFydHMubWluLmpzIj48L3NjcmlwdD4KICAgIDxzY3JpcHQgc3JjPSJodHRwczovL2Nkbi5qc2RlbGl2ci5uZXQvbnBtL2RhdGUtZm5zQDQuMS4wL2Nkbi5taW4uanMiPjwvc2NyaXB0PgogICAgPHN0eWxlPgogICAgICBib2R5IHsKICAgICAgICBmb250LWZhbWlseTogQXJpYWwsIHNhbnMtc2VyaWY7CiAgICAgICAgbWFyZ2luOiAyMHB4OwogICAgICAgIGNvbG9yOiAjMzMzOwogICAgICB9CiAgICAgIC5jb250YWluZXIgewogICAgICAgIG1heC13aWR0aDogMTgwMHB4OwogICAgICAgIG1hcmdpbjogMCBhdXRvOwogICAgICB9CiAgICAgIC5kYXNoYm9hcmQtaGVhZGVyIHsKICAgICAgICBkaXNwbGF5OiBmbGV4OwogICAgICAgIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjsKICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyOwogICAgICAgIG1hcmdpbi1ib3R0b206IDEwcHg7CiAgICAgIH0KICAgICAgLmRhc2hib2FyZC10aXRsZSB7CiAgICAgICAgbWFyZ2luOiAwOwogICAgICB9CiAgICAgIC5yb3cgewogICAgICAgIGRpc3BsYXk6IGZsZXg7CiAgICAgICAgbWFyZ2luLWJvdHRvbTogMzBweDsKICAgICAgICBnYXA6IDIwcHg7CiAgICAgIH0KICAgICAgLmNoYXJ0LWNvbnRhaW5lciB7CiAgICAgICAgZmxleDogMTsKICAgICAgICBoZWlnaHQ6IDYwMHB4OwogICAgICAgIGJvcmRlcjogMXB4IHNvbGlkICNlYWVhZWE7CiAgICAgICAgYm9yZGVyLXJhZGl1czogNXB4OwogICAgICAgIGJveC1zaGFkb3c6IDAgMnB4IDhweCByZ2JhKDAsIDAsIDAsIDAuMSk7CiAgICAgIH0KICAgICAgdGFibGUgewogICAgICAgIHdpZHRoOiAxMDAlOwogICAgICAgIGJvcmRlci1jb2xsYXBzZTogY29sbGFwc2U7CiAgICAgICAgbWFyZ2luLXRvcDogMTBweDsKICAgICAgICBib3gtc2hhZG93OiAwIDJweCA4cHggcmdiYSgwLCAwLCAwLCAwLjEpOwogICAgICB9CiAgICAgIHRoLAogICAgICB0ZCB7CiAgICAgICAgcGFkZGluZzogMTJweCAxNXB4OwogICAgICAgIHRleHQtYWxpZ246IGxlZnQ7CiAgICAgICAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkICNkZGQ7CiAgICAgIH0KICAgICAgdGggewogICAgICAgIGJhY2tncm91bmQtY29sb3I6ICNmOGY4Zjg7CiAgICAgICAgZm9udC13ZWlnaHQ6IGJvbGQ7CiAgICAgIH0KICAgICAgdHI6aG92ZXIgewogICAgICAgIGJhY2tncm91bmQtY29sb3I6ICNmNWY1ZjU7CiAgICAgIH0KICAgICAgYSB7CiAgICAgICAgY29sb3I6ICMxYTczZTg7CiAgICAgICAgdGV4dC1kZWNvcmF0aW9uOiBub25lOwogICAgICB9CiAgICAgIGE6aG92ZXIgewogICAgICAgIHRleHQtZGVjb3JhdGlvbjogdW5kZXJsaW5lOwogICAgICB9CiAgICAgIC50YWJsZS1jb250YWluZXIgewogICAgICAgIG1hcmdpbi10b3A6IDIwcHg7CiAgICAgICAgYm9yZGVyOiAxcHggc29saWQgI2VhZWFlYTsKICAgICAgICBib3JkZXItcmFkaXVzOiA1cHg7CiAgICAgICAgcGFkZGluZzogMTVweDsKICAgICAgICBib3gtc2hhZG93OiAwIDJweCA4cHggcmdiYSgwLCAwLCAwLCAwLjEpOwogICAgICB9CiAgICAgIC50YWJsZS1mb290ZXIgewogICAgICAgIGRpc3BsYXk6IGZsZXg7CiAgICAgICAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuOwogICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7CiAgICAgICAgbWFyZ2luLXRvcDogMTBweDsKICAgICAgICBtYXJnaW4tYm90dG9tOiA1cHg7CiAgICAgIH0KICAgICAgLnRhYmxlLWhlYWRlciB7CiAgICAgICAgZGlzcGxheTogZmxleDsKICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47CiAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjsKICAgICAgICBtYXJnaW4tYm90dG9tOiAxMHB4OwogICAgICB9CiAgICAgIGgyLAogICAgICBoMyB7CiAgICAgICAgbWFyZ2luOiAwOwogICAgICAgIGNvbG9yOiAjNDQ0OwogICAgICB9CiAgICAgIC5zb3VyY2UtZGVzY3JpcHRpb24gewogICAgICAgIGZvbnQtc3R5bGU6IGl0YWxpYzsKICAgICAgICBjb2xvcjogIzY2NjsKICAgICAgfQogICAgICAuc291cmNlLWluZm8gewogICAgICAgIGZvbnQtc3R5bGU6IGl0YWxpYzsKICAgICAgICBmb250LXNpemU6IHNtYWxsZXI7CiAgICAgICAgY29sb3I6ICM2NjY7CiAgICAgIH0KICAgICAgLnZpZXctbW9kZSB7CiAgICAgICAgbWFyZ2luLWxlZnQ6IDhweDsKICAgICAgICBmb250LXdlaWdodDogYm9sZDsKICAgICAgICBtaW4td2lkdGg6IDkwcHg7CiAgICAgIH0KICAgIDwvc3R5bGU+CiAgPC9oZWFkPgogIDxib2R5PgogICAgPGEgaHJlZj0iaW5kZXguaHRtbCI+8J+UmTwvYT4KICAgIDxkaXYgY2xhc3M9ImNvbnRhaW5lciI+CiAgICAgIDxkaXYgY2xhc3M9ImRhc2hib2FyZC1oZWFkZXIiPgogICAgICAgIDxoMiBpZD0iZGFzaGJvYXJkLXRpdGxlIiBjbGFzcz0iZGFzaGJvYXJkLXRpdGxlIj48L2gyPgogICAgICA8L2Rpdj4KICAgICAgPHAgY2xhc3M9InNvdXJjZS1kZXNjcmlwdGlvbiIgaWQ9ImRhc2hib2FyZC1kZXNjcmlwdGlvbiI+PC9wPgogICAgICA8cCBjbGFzcz0ic291cmNlLWluZm8iIGlkPSJkYXNoYm9hcmQtbWV0YWRhdGEiPjwvcD4KCiAgICAgIDxkaXYgY2xhc3M9InJvdyI+CiAgICAgICAgPGRpdiBjbGFzcz0iY2hhcnQtY29udGFpbmVyIiBpZD0id2Vla2x5Y29tcGxldGlvbmNoYXJ0Ij48L2Rpdj4KICAgICAgPC9kaXY+CiAgICAgIDxwIGNsYXNzPSJzb3VyY2UtaW5mbyI+CiAgICAgICAgKjkwdGggUGVyY2VudGlsZTogSGlnaGxpZ2h0cyB0aGUgOTAlIG9mIHRoZSBub2RlcyB3aXRoIHRoZQogICAgICAgIDxiPmxvd2VzdCBkdXJhdGlvbjwvYj4uIE9ubHkgc2hvd24gaWYgdGhlcmUgYXJlIG1vcmUgdGhhbiAyIGRhdGFwb2ludHMKICAgICAgICBpbiB0aGUgZ3JvdXAuCiAgICAgIDwvcD4KCiAgICAgIDxkaXYgY2xhc3M9InRhYmxlLWNvbnRhaW5lciI+CiAgICAgICAgPGRpdiBjbGFzcz0idGFibGUtaGVhZGVyIj4KICAgICAgICAgIDxoMyBpZD0idGFibGUtdGl0bGUiPjwvaDM+CiAgICAgICAgICA8c3BhbiBpZD0ic2VsZWN0ZWQtc291cmNlIj5DbGljayBvbiBjaGFydCBlbGVtZW50cyBzZWUgZGV0YWlsczwvc3Bhbj4KICAgICAgICA8L2Rpdj4KICAgICAgICA8dGFibGU+CiAgICAgICAgICA8dGhlYWQ+CiAgICAgICAgICAgIDx0cj4KICAgICAgICAgICAgICA8dGg+IzwvdGg+CiAgICAgICAgICAgICAgPHRoPlRpdGxlPC90aD4KICAgICAgICAgICAgICA8dGg+VHlwZTwvdGg+CiAgICAgICAgICAgICAgPHRoPlJlcG88L3RoPgogICAgICAgICAgICAgIDx0aD5NaWxlc3RvbmU8L3RoPgogICAgICAgICAgICAgIDx0aD5Qb2ludHM8L3RoPgogICAgICAgICAgICA8L3RyPgogICAgICAgICAgPC90aGVhZD4KICAgICAgICAgIDx0Ym9keSBpZD0iZGV0YWlscy10YWJsZSI+CiAgICAgICAgICAgIDx0cj4KICAgICAgICAgICAgICA8dGQgY29sc3Bhbj0iMyI+Tm8gZGF0YSBzZWxlY3RlZDwvdGQ+CiAgICAgICAgICAgIDwvdHI+CiAgICAgICAgICA8L3Rib2R5PgogICAgICAgIDwvdGFibGU+CiAgICAgIDwvZGl2PgoKICAgICAgPHAgY2xhc3M9InNvdXJjZS1pbmZvIiBpZD0iZGFzaGJvYXJkLXByb2plY3RmaWx0ZXIiPjwvcD4KICAgIDwvZGl2PgoKICAgIDxzY3JpcHQ+CiAgICAgIGNvbnN0IGJhc2U2NERlY29kZVVuaWNvZGUgPSAoYmFzZTY0U3RyaW5nKSA9PiB7CiAgICAgICAgY29uc3QgYmluYXJ5U3RyaW5nID0gd2luZG93LmF0b2IoYmFzZTY0U3RyaW5nKQogICAgICAgIGNvbnN0IGJ5dGVzID0gbmV3IFVpbnQ4QXJyYXkoYmluYXJ5U3RyaW5nLmxlbmd0aCkKCiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBiaW5hcnlTdHJpbmcubGVuZ3RoOyBpKyspIHsKICAgICAgICAgIGJ5dGVzW2ldID0gYmluYXJ5U3RyaW5nLmNoYXJDb2RlQXQoaSkKICAgICAgICB9CgogICAgICAgIHJldHVybiBuZXcgVGV4dERlY29kZXIoJ3V0Zi04JykuZGVjb2RlKGJ5dGVzKQogICAgICB9CgogICAgICAvLyBTaW5nbGUgSmF2YVNjcmlwdCBkYXRhIG9iamVjdCBjb250YWluaW5nIGFsbCBvdXIgZGF0YQogICAgICBjb25zdCBzcmNEYXRhID0gYmFzZTY0RGVjb2RlVW5pY29kZSgnUkVQTEFDRV9NRScpCiAgICAgIGNvbnN0IGdyb3VwTWV0cmljcyA9IEpTT04ucGFyc2Uoc3JjRGF0YSkKICAgICAgY29uc29sZS5sb2coJ1NvdXJjZSBkYXRhIGRlY29kZWQnLCBncm91cE1ldHJpY3MpCgogICAgICAvLyBDb3BpZWQgdG8gdGhlIHdpbmRvdyBvYmplY3QgdG8gZmFjaWxpdGF0ZSBidWlsZGluZyBvZiBxdWVyaWVzCiAgICAgIHdpbmRvdy5kYXRhTm9kZXMgPSBncm91cE1ldHJpY3Mubm9kZXMKICAgICAgd2luZG93Lmdyb3VwTWV0cmljcyA9IGdyb3VwTWV0cmljcwoKICAgICAgZG9jdW1lbnQudGl0bGUgPSBncm91cE1ldHJpY3MubmFtZQoKICAgICAgLy8gVXBkYXRlIHRoZSB0YWJsZSB3aXRoIGRhdGEgY2xpY2tlZCBpbiB0aGUgY2hhcnQKICAgICAgZnVuY3Rpb24gdXBkYXRlVGFibGUoeyBzcmNDaGFydCwgc2VsZWN0aW9uLCBub2RlcyB9KSB7CiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RhYmxlLXRpdGxlJykudGV4dENvbnRlbnQgPQogICAgICAgICAgYE5vZGVzIGZyb20gJHtzcmNDaGFydH1gCiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NlbGVjdGVkLXNvdXJjZScpLnRleHRDb250ZW50ID0KICAgICAgICAgIGBTZWxlY3Rpb246ICR7c2VsZWN0aW9ufWAKCiAgICAgICAgY29uc3QgdGFibGVCb2R5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2RldGFpbHMtdGFibGUnKQogICAgICAgIHRhYmxlQm9keS5pbm5lckhUTUwgPSAnJwoKICAgICAgICBub2Rlcy5mb3JFYWNoKChub2RlKSA9PiB7CiAgICAgICAgICBjb25zdCByb3cgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0cicpCiAgICAgICAgICByb3cuaW5uZXJIVE1MID0gYAogICAgICAgICAgICAgICAgPHRkPiR7bm9kZS5udW1iZXJ9PC90ZD4KICAgICAgICAgICAgICAgIDx0ZD48YSBocmVmPSIke25vZGUudXJsfSIgdGFyZ2V0PSJfYmxhbmsiPiR7bm9kZS50aXRsZX08L2E+PC90ZD4KICAgICAgICAgICAgICAgIDx0ZD4ke25vZGUudHlwZX08L3RkPgogICAgICAgICAgICAgICAgPHRkPjxhIGhyZWY9IiR7bm9kZS5yZXBvc2l0b3J5LnVybH0iIHRhcmdldD0iX2JsYW5rIj4ke25vZGUucmVwb3NpdG9yeS5vd25lci5sb2dpbn0vJHtub2RlLnJlcG9zaXRvcnkubmFtZX08L2E+PC90ZD4KICAgICAgICAgICAgICAgIDx0ZD4ke25vZGUubWlsZXN0b25lPy50aXRsZSA/IG5vZGUubWlsZXN0b25lPy50aXRsZSA6ICcnfTwvdGQ+CiAgICAgICAgICAgICAgICA8dGQ+JHtub2RlLnBvaW50c308L3RkPgogICAgICAgICAgICAgIGAKICAgICAgICAgIHRhYmxlQm9keS5hcHBlbmRDaGlsZChyb3cpCiAgICAgICAgfSkKICAgICAgfQoKICAgICAgY29uc3QgdG9vbHRpcEZvcm1hdHRlciA9IChwYXJhbXMsIGdyb3VwcykgPT4gewogICAgICAgIC8vIGxldCByZXN1bHQgPSBgJHtwYXJhbXNbMF0udmFsdWVbMF19IGRheSR7cGFyYW1zWzBdLnZhbHVlWzBdID4gMSA/ICdzJyA6ICcnfTogJHtwYXJhbXNbMF0udmFsdWVbMl19IG5vZGUke3BhcmFtc1swXS52YWx1ZVsyXSA+IDEgPyAncycgOiAnJ31gCiAgICAgICAgY29uc3QgZ3JvdXAgPSBncm91cHMuZmluZCgoZykgPT4gZy5uYW1lID09PSBwYXJhbXMuc2VyaWVzTmFtZSkKICAgICAgICBpZiAoIWdyb3VwKSB7CiAgICAgICAgICByZXR1cm4gJ05vIGRhdGEgYXZhaWxhYmxlIGZvciB0aGlzIGdyb3VwJwogICAgICAgIH0KCiAgICAgICAgY29uc3QgZGF5c0NvdW50ID0gcGFyYW1zLnZhbHVlWzBdCiAgICAgICAgY29uc3Qgc2VsZWN0ZWROb2RlcyA9IGdyb3VwLm5vZGVzLmZpbHRlcigKICAgICAgICAgIChub2RlKSA9PiBub2RlLnRpbWVsaW5lTWV0cmljcy5kdXJhdGlvbiA9PT0gZGF5c0NvdW50CiAgICAgICAgKQoKICAgICAgICBsZXQgcmVzdWx0ID0gYDxiPiR7cGFyYW1zLnNlcmllc05hbWV9PC9iPjxiciAvPmAKICAgICAgICByZXN1bHQgKz0gYCR7c2VsZWN0ZWROb2Rlcy5sZW5ndGh9IG5vZGUke3NlbGVjdGVkTm9kZXMubGVuZ3RoID4gMSA/ICdzJyA6ICcnfSBpbiAke2RheXNDb3VudH0gZGF5JHtkYXlzQ291bnQgPiAxID8gJ3MnIDogJyd9PGJyIC8+YAogICAgICAgIHJlc3VsdCArPSBgTWVkaWFuOiAke2dyb3VwLm1ldHJpY3MubDkwLm1lZGlhbn0gZGF5czxiciAvPmAKICAgICAgICByZXR1cm4gcmVzdWx0CiAgICAgIH0KCiAgICAgIGZ1bmN0aW9uIGNyZWF0ZVRpbWVsaW5lQ2hhcnQoZWxlbWVudElkLCBkYXRhKSB7CiAgICAgICAgLy8gUGxhY2Vob2xkZXJzIGZvciB0aGUgY2hhcnQKICAgICAgICBjb25zdCB0aXRsZSA9IFtdCiAgICAgICAgY29uc3Qgc2luZ2xlQXhpcyA9IFtdCiAgICAgICAgY29uc3Qgc2VyaWVzID0gW10KCiAgICAgICAgY29uc3QgbmJEYXlzID0gZGF0YS5ub2Rlcy5tYXAoKGl0ZW0pID0+IGl0ZW0udGltZWxpbmVNZXRyaWNzLmR1cmF0aW9uKQogICAgICAgIGNvbnNvbGUubG9nKCdEYXlzIHByZXNlbnQgaW4gdGhlIGRhdGFzZXQ6JywgbmJEYXlzKQoKICAgICAgICBjb25zdCBkYXlzUGVyR3JvdXAgPSBbXQogICAgICAgIGZvciAoY29uc3QgZ3JvdXAgb2YgZGF0YS5ncm91cHMpIHsKICAgICAgICAgIGlmIChncm91cC5ub2Rlcy5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgIGNvbnN0IG5iRGF5cyA9IGdyb3VwLm5vZGVzLm1hcCgKICAgICAgICAgICAgICAoaXRlbSkgPT4gaXRlbS50aW1lbGluZU1ldHJpY3MuZHVyYXRpb24KICAgICAgICAgICAgKQogICAgICAgICAgICBjb25zdCBkYXlTaXplTWFwID0gbmJEYXlzLnJlZHVjZSgoYWNjLCBkYXkpID0+IHsKICAgICAgICAgICAgICBhY2NbZGF5XSA9IChhY2NbZGF5XSB8fCAwKSArIDEKICAgICAgICAgICAgICByZXR1cm4gYWNjCiAgICAgICAgICAgIH0sIHt9KQogICAgICAgICAgICBjb25zdCBkYXlTaXplQXJyYXkgPSBPYmplY3QuZW50cmllcyhkYXlTaXplTWFwKS5mb3JFYWNoKAogICAgICAgICAgICAgIChbaWQsIHNpemVdKSA9PiB7CiAgICAgICAgICAgICAgICBkYXlzUGVyR3JvdXAucHVzaCh7CiAgICAgICAgICAgICAgICAgIG5hbWU6IGdyb3VwLm5hbWUsCiAgICAgICAgICAgICAgICAgIGRheTogTnVtYmVyKGlkKSwKICAgICAgICAgICAgICAgICAgc2l6ZQogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICkKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgY29uc29sZS5sb2coJ0RheXMgcHJlc2VudCBpbiB0aGUgZGF0YXNldCBwZXIgZ3JvdXA6JywgZGF5c1Blckdyb3VwKQoKICAgICAgICBjb25zdCBnZXRTeW1ib2xTaXplID0gKGRhdGFJdGVtLCBkYXlzUGVyR3JvdXApID0+IHsKICAgICAgICAgIC8vIFN5bWJvbCBzaXplIHNob3VsZCBub3QgYmUgdGFsbGVyIHRoYW4gdGhlIGhlaWdodCBvZiB0aGUgbGluZQogICAgICAgICAgY29uc3QgbWluU2l6ZSA9IDUKICAgICAgICAgIGNvbnN0IG1heFNpemUgPSA0MAogICAgICAgICAgY29uc3QgbWluQ291bnQgPSBNYXRoLm1pbiguLi5kYXlzUGVyR3JvdXAubWFwKChpdGVtKSA9PiBpdGVtLnNpemUpKQogICAgICAgICAgY29uc3QgbWF4Q291bnQgPSBNYXRoLm1heCguLi5kYXlzUGVyR3JvdXAubWFwKChpdGVtKSA9PiBpdGVtLnNpemUpKQoKICAgICAgICAgIGNvbnN0IHN5bWJvbENvdW50ID0gZGF0YUl0ZW1bMl0KICAgICAgICAgIGlmIChzeW1ib2xDb3VudCA9PT0gMCkgcmV0dXJuIDAKCiAgICAgICAgICBpZiAobWluQ291bnQgPT09IG1heENvdW50KSByZXR1cm4gKG1pblNpemUgKyBtYXhTaXplKSAvIDIKICAgICAgICAgIC8vIHNxcnQgc2NhbGluZywgbm9ybWFsaXplZAogICAgICAgICAgY29uc3Qgc2NhbGUgPQogICAgICAgICAgICAoTWF0aC5zcXJ0KHN5bWJvbENvdW50KSAtIE1hdGguc3FydChtaW5Db3VudCkpIC8KICAgICAgICAgICAgKE1hdGguc3FydChtYXhDb3VudCkgLSBNYXRoLnNxcnQobWluQ291bnQpKQogICAgICAgICAgcmV0dXJuIG1pblNpemUgKyBzY2FsZSAqIChtYXhTaXplIC0gbWluU2l6ZSkKICAgICAgICB9CgogICAgICAgIGNvbnN0IGdyb3VwcyA9IGRhdGEuZ3JvdXBzLmxlbmd0aCA+IDAgPyBkYXRhLmdyb3VwcyA6IFtkYXRhXQoKICAgICAgICAvLyBHZW5lcmF0ZSBhbiBhcnJheSBvZiBhbGwgZGF5cyBiZXR3ZWVuIHRoZSBtaW5pbXVtIGFuZCBtYXhpbXVtIGRheXMKICAgICAgICBjb25zdCBtaW5EYXkgPSBNYXRoLm1pbiguLi5uYkRheXMpCiAgICAgICAgY29uc3QgbWF4RGF5ID0gTWF0aC5tYXgoLi4ubmJEYXlzKQogICAgICAgIGNvbnN0IGFsbERheXMgPSBbXQogICAgICAgIGZvciAobGV0IGkgPSBtaW5EYXk7IGkgPD0gbWF4RGF5OyBpKyspIHsKICAgICAgICAgIGFsbERheXMucHVzaChpKQogICAgICAgIH0KCiAgICAgICAgY29uc29sZS5sb2coYE1pbjogJHttaW5EYXl9LCBNYXg6ICR7bWF4RGF5fSwgQWxsIGRheXM6ICR7YWxsRGF5c31gKQoKICAgICAgICBncm91cHMuZm9yRWFjaChmdW5jdGlvbiAoZ3JvdXAsIGlkeCkgewogICAgICAgICAgY29uc3QgY2VudGVybGluZSA9IGlkeCA9PT0gMCA/IDIwIDogMjAgKyBpZHggKiAyMAogICAgICAgICAgY29uc3QgdW5pcXVlbDkwRGF5cyA9IEFycmF5LmZyb20oCiAgICAgICAgICAgIG5ldyBTZXQoZ3JvdXAubWV0cmljcy5sOTAuZGF0YXBvaW50cykKICAgICAgICAgICkKICAgICAgICAgIC8vIGdlbmVyYXRlIGEgbmljZSBIVE1MIGNvbG9yIGJhc2VkIG9uICJncm91cC5uYW1lIgogICAgICAgICAgY29uc3QgY29sb3IgPSBgaHNsKCR7KGlkeCAqIDM2MCkgLyBncm91cHMubGVuZ3RofSwgNzAlLCA1MCUpYAoKICAgICAgICAgIC8vIE9ubHkgZGlzcGxheSB0aGUgOTAlaWxzIGlmIHRoZXJlIGFyZSBtb3JlIHRoYW4gMiBkYXRhcG9pbnRzCiAgICAgICAgICBpZiAoZ3JvdXAubWV0cmljcy5kYXRhcG9pbnRzLmxlbmd0aCA+IDIpIHsKICAgICAgICAgICAgc2VyaWVzLnB1c2goewogICAgICAgICAgICAgIG5hbWU6ICdtZWRpYW4nLAogICAgICAgICAgICAgIGRhdGE6IFsKICAgICAgICAgICAgICAgIFtncm91cC5tZXRyaWNzLmw5MC5tZWRpYW4sIGNlbnRlcmxpbmUgLSA2XSwKICAgICAgICAgICAgICAgIFtncm91cC5tZXRyaWNzLmw5MC5tZWRpYW4sIGNlbnRlcmxpbmUgLSAzXQogICAgICAgICAgICAgIF0sCiAgICAgICAgICAgICAgdHlwZTogJ2xpbmUnLAogICAgICAgICAgICAgIHNpbGVudDogdHJ1ZSwKICAgICAgICAgICAgICBob3ZlckFuaW1hdGlvbjogZmFsc2UsCiAgICAgICAgICAgICAgZW1waGFzaXM6IHsKICAgICAgICAgICAgICAgIGRpc2FibGVkOiB0cnVlCiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICBsaW5lU3R5bGU6IHsKICAgICAgICAgICAgICAgIGNvbG9yOiBjb2xvciwKICAgICAgICAgICAgICAgIHR5cGU6ICdzb2xpZCcsCiAgICAgICAgICAgICAgICB3aWR0aDogMwogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgc2hvd1N5bWJvbDogZmFsc2UsCiAgICAgICAgICAgICAgYW5pbWF0aW9uOiBmYWxzZQogICAgICAgICAgICB9KQogICAgICAgICAgfQogICAgICAgICAgc2VyaWVzLnB1c2goewogICAgICAgICAgICBuYW1lOiBncm91cC5uYW1lLCAvLyBBZGQgbmFtZSBmb3IgbGVnZW5kCiAgICAgICAgICAgIHN5bWJvbFNpemU6IGZ1bmN0aW9uIChkYXRhSXRlbSkgewogICAgICAgICAgICAgIHJldHVybiBnZXRTeW1ib2xTaXplKGRhdGFJdGVtLCBkYXlzUGVyR3JvdXApCiAgICAgICAgICAgICAgLy8gU3ltYm9sIHNpemUgc2hvdWxkIG5vdCBiZSB0YWxsZXIgdGhhbiB0aGUgaGVpZ2h0IG9mIHRoZSBsaW5lCiAgICAgICAgICAgICAgLy8gdGhpcyBpcyBjdXJyZW50bHkgbm90IGNvdmVyZWQsIG5lZWQgdG8gaW1wbGVtZW50IGEgcmF0aW8gb2Ygc2l6ZSB2cy4gdGhlIGRhdGFzZXQKICAgICAgICAgICAgICByZXR1cm4gZGF0YUl0ZW1bMl0gPT09IDAgPyAwIDogNSArIGRhdGFJdGVtWzJdICogNQogICAgICAgICAgICB9LAogICAgICAgICAgICBkYXRhOiBhbGxEYXlzLm1hcCgoZGF5KSA9PiB7CiAgICAgICAgICAgICAgY29uc3QgZGF5RGF0YSA9IGdyb3VwLm5vZGVzLmZpbHRlcigKICAgICAgICAgICAgICAgIChpdGVtKSA9PiBpdGVtLnRpbWVsaW5lTWV0cmljcy5kdXJhdGlvbiA9PT0gZGF5CiAgICAgICAgICAgICAgKQogICAgICAgICAgICAgIGNvbnN0IGNvdW50ID0gZGF5RGF0YS5sZW5ndGgKICAgICAgICAgICAgICByZXR1cm4gW2RheSwgY2VudGVybGluZSwgY291bnRdCiAgICAgICAgICAgIH0pLAogICAgICAgICAgICB0eXBlOiAnc2NhdHRlcicsCiAgICAgICAgICAgIGl0ZW1TdHlsZTogewogICAgICAgICAgICAgIGNvbG9yOiBjb2xvcgogICAgICAgICAgICB9LAogICAgICAgICAgICAvLyBtYXJrUG9pbnQ6IHsKICAgICAgICAgICAgLy8gICBkYXRhOiBbeyB5QXhpczogY2VudGVybGluZSwgeEF4aXM6IGdyb3VwLm1ldHJpY3MubDkwLm1lZGlhbiB9XQogICAgICAgICAgICAvLyB9LAogICAgICAgICAgICBtYXJrQXJlYToKICAgICAgICAgICAgICB1bmlxdWVsOTBEYXlzLmxlbmd0aCA8PSAyCiAgICAgICAgICAgICAgICA/IGZhbHNlCiAgICAgICAgICAgICAgICA6IHsKICAgICAgICAgICAgICAgICAgICBzaWxlbnQ6IHRydWUsCiAgICAgICAgICAgICAgICAgICAgaXRlbVN0eWxlOiB7CiAgICAgICAgICAgICAgICAgICAgICBjb2xvcjogJ3RyYW5zcGFyZW50JywKICAgICAgICAgICAgICAgICAgICAgIGJvcmRlcldpZHRoOiAxLAogICAgICAgICAgICAgICAgICAgICAgYm9yZGVyVHlwZTogJ2Rhc2hlZCcKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIGRhdGE6IFsKICAgICAgICAgICAgICAgICAgICAgIFsKICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6ICc5MHRoIFBlcmNlbnRpbGUnLAogICAgICAgICAgICAgICAgICAgICAgICAgIHhBeGlzOiBncm91cC5tZXRyaWNzLmw5MC5taW4sCiAgICAgICAgICAgICAgICAgICAgICAgICAgeUF4aXM6IGNlbnRlcmxpbmUgLSA1CiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICB4QXhpczogZ3JvdXAubWV0cmljcy5sOTAubWF4LAogICAgICAgICAgICAgICAgICAgICAgICAgIHlBeGlzOiBjZW50ZXJsaW5lICsgNQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICBdCiAgICAgICAgICAgICAgICAgICAgXQogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICB9KQogICAgICAgIH0pCgogICAgICAgIC8vIEFkZCBsZWdlbmQgdG8gb3B0aW9ucwoKICAgICAgICBjb25zdCBjaGFydERvbSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGVsZW1lbnRJZCkKICAgICAgICBjb25zdCBteUNoYXJ0ID0gZWNoYXJ0cy5pbml0KGNoYXJ0RG9tKQoKICAgICAgICBjb25zdCBvcHRpb24gPSB7CiAgICAgICAgICB0aXRsZTogdGl0bGUsCiAgICAgICAgICB4QXhpczogewogICAgICAgICAgICB0eXBlOiAndmFsdWUnLAogICAgICAgICAgICBtaW5JbnRlcnZhbDogMSwKICAgICAgICAgICAgbWF4SW50ZXJ2YWw6IDEsCiAgICAgICAgICAgIHNwbGl0TnVtYmVyOiAxMCwKICAgICAgICAgICAgc3BsaXRMaW5lOiB7CiAgICAgICAgICAgICAgc2hvdzogdHJ1ZSwKICAgICAgICAgICAgICBsaW5lU3R5bGU6IHsKICAgICAgICAgICAgICAgIHR5cGU6ICdkYXNoZWQnCiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9LAogICAgICAgICAgdG9vbHRpcDogewogICAgICAgICAgICB0cmlnZ2VyOiAnaXRlbScsCiAgICAgICAgICAgIGF4aXNQb2ludGVyOiB7CiAgICAgICAgICAgICAgdHlwZTogJ3NoYWRvdycKICAgICAgICAgICAgfSwKICAgICAgICAgICAgZm9ybWF0dGVyOiBmdW5jdGlvbiAocGFyYW1zKSB7CiAgICAgICAgICAgICAgcmV0dXJuIHRvb2x0aXBGb3JtYXR0ZXIocGFyYW1zLCBncm91cHMpCiAgICAgICAgICAgIH0KICAgICAgICAgIH0sCiAgICAgICAgICB5QXhpczogewogICAgICAgICAgICBzaG93OiBmYWxzZSwKICAgICAgICAgICAgbWF4OiAyMCArIGdyb3Vwcy5sZW5ndGggKiAyMAogICAgICAgICAgfSwKICAgICAgICAgIGxlZ2VuZDogewogICAgICAgICAgICBsZWZ0OiAnY2VudGVyJywKICAgICAgICAgICAgdG9wOiAxMAogICAgICAgICAgfSwKICAgICAgICAgIHNlcmllczogc2VyaWVzCiAgICAgICAgfQoKICAgICAgICAvLyBBcHBseSBvcHRpb25zIHRvIGNoYXJ0CiAgICAgICAgbXlDaGFydC5zZXRPcHRpb24ob3B0aW9uKQoKICAgICAgICAvLyBBZGQgY2xpY2sgZXZlbnQgZm9yIGludGVyYWN0aXZpdHkKICAgICAgICBteUNoYXJ0Lm9uKCdjbGljaycsIGZ1bmN0aW9uIChwYXJhbXMpIHsKICAgICAgICAgIGNvbnN0IGdyb3VwTmFtZSA9IHBhcmFtcy5zZXJpZXNOYW1lCiAgICAgICAgICBjb25zdCBncm91cEluZGV4ID0gcGFyYW1zLmRhdGFJbmRleAogICAgICAgICAgY29uc3QgZ3JvdXAgPSBncm91cHMuZmluZCgoZ3JvdXApID0+IGdyb3VwLm5hbWUgPT09IGdyb3VwTmFtZSkKICAgICAgICAgIGNvbnNvbGUubG9nKAogICAgICAgICAgICBgQ2xpY2tlZCBvbiBncm91cDogJHtncm91cE5hbWV9LCBpbmRleDogJHtncm91cEluZGV4fSwgZGF0YTpgLAogICAgICAgICAgICBncm91cAogICAgICAgICAgKQogICAgICAgICAgaWYgKGdyb3VwICYmIGdyb3VwLm5vZGVzLmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgY29uc3QgbnVtYmVyT2ZEYXlzID0gcGFyYW1zLmRhdGFbMF0KICAgICAgICAgICAgY29uc3QgZ3JvdXBTZWxlY3Rpb24gPSBncm91cC5ub2Rlcy5maWx0ZXIoCiAgICAgICAgICAgICAgKG5vZGUpID0+IG5vZGUudGltZWxpbmVNZXRyaWNzLmR1cmF0aW9uID09PSBudW1iZXJPZkRheXMKICAgICAgICAgICAgKQogICAgICAgICAgICB1cGRhdGVUYWJsZSh7CiAgICAgICAgICAgICAgc3JjQ2hhcnQ6IGdyb3VwTmFtZSwKICAgICAgICAgICAgICBzZWxlY3Rpb246IGAke2dyb3VwTmFtZX0gZm9yIGEgZHVyYXRpb24gb2YgJHtudW1iZXJPZkRheXN9IGRheSR7bnVtYmVyT2ZEYXlzID4gMCA/ICdzJyA6ICcnfSAoJHtncm91cFNlbGVjdGlvbi5sZW5ndGh9IG5vZGVzKWAsCiAgICAgICAgICAgICAgbm9kZXM6IGdyb3VwU2VsZWN0aW9uCiAgICAgICAgICAgIH0pCiAgICAgICAgICB9CiAgICAgICAgfSkKCiAgICAgICAgLy8gTWFrZSBjaGFydCByZXNwb25zaXZlCiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgIG15Q2hhcnQucmVzaXplKCkKICAgICAgICB9KQoKICAgICAgICByZXR1cm4gbXlDaGFydAogICAgICB9CgogICAgICBjb25zdCBmaWx0ZXJlZERhdGFzZXQgPSAoZ3JvdXBNZXRyaWNzKSA9PiB7CiAgICAgICAgaWYgKGdyb3VwTWV0cmljcy5xdWVyeSA9PT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICByZXR1cm4gJycKICAgICAgICB9IGVsc2UgewogICAgICAgICAgcmV0dXJuIGBPdmVyYWxsIHByb2plY3QgZGF0YSBmaWx0ZXJlZDogJHtKU09OLnN0cmluZ2lmeShncm91cE1ldHJpY3MucXVlcnkpfSAgPGJyIC8+YAogICAgICAgIH0KICAgICAgfQoKICAgICAgLy8gRnVuY3Rpb24gdG8gaW5pdGlhbGl6ZSB0aGUgZGFzaGJvYXJkIG1ldGFkYXRhCiAgICAgIGZ1bmN0aW9uIGluaXRpYWxpemVEYXNoYm9hcmQoKSB7CiAgICAgICAgLy8gU2V0IGRhc2hib2FyZCB0aXRsZSBhbmQgbWV0YWRhdGEgZnJvbSB0aGUgZGF0YSBvYmplY3QKICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGFzaGJvYXJkLXRpdGxlJykudGV4dENvbnRlbnQgPQogICAgICAgICAgZ3JvdXBNZXRyaWNzLm5hbWUKICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGFzaGJvYXJkLWRlc2NyaXB0aW9uJykudGV4dENvbnRlbnQgPQogICAgICAgICAgZ3JvdXBNZXRyaWNzLmRlc2NyaXB0aW9uCgogICAgICAgIGlmIChncm91cE1ldHJpY3MucXVlcnkgPT09IHVuZGVmaW5lZCkgewogICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Rhc2hib2FyZC1wcm9qZWN0ZmlsdGVyJykudGV4dENvbnRlbnQgPSAnJwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGFzaGJvYXJkLXByb2plY3RmaWx0ZXInKS50ZXh0Q29udGVudCA9CiAgICAgICAgICAgIGBPdmVyYWxsIHByb2plY3QgZGF0YSBmaWx0ZXJlZDogJHtKU09OLnN0cmluZ2lmeShncm91cE1ldHJpY3MucXVlcnkpfWAKICAgICAgICB9CgogICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkYXNoYm9hcmQtbWV0YWRhdGEnKS50ZXh0Q29udGVudCA9CiAgICAgICAgICBgTGFzdCB1cGRhdGVkOiAke2dyb3VwTWV0cmljcy51cGRhdGVkQXR9YAoKICAgICAgICBjcmVhdGVUaW1lbGluZUNoYXJ0KCd3ZWVrbHljb21wbGV0aW9uY2hhcnQnLCBncm91cE1ldHJpY3MpCiAgICAgIH0KCiAgICAgIC8vIEluaXRpYWxpemUgYWxsIGNoYXJ0cyB3aGVuIERPTSBpcyBsb2FkZWQKICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIGluaXRpYWxpemVEYXNoYm9hcmQpCiAgICA8L3NjcmlwdD4KICA8L2JvZHk+CjwvaHRtbD4K'

export default tpl
