export const tpl =
  'PCFkb2N0eXBlIGh0bWw+CjxodG1sIGxhbmc9ImVuIj4KICA8aGVhZD4KICAgIDxtZXRhIGNoYXJzZXQ9IlVURi04IiAvPgogICAgPG1ldGEgbmFtZT0idmlld3BvcnQiIGNvbnRlbnQ9IndpZHRoPWRldmljZS13aWR0aCwgaW5pdGlhbC1zY2FsZT0xLjAiIC8+CiAgICA8dGl0bGU+UHJvamVjdHMgQWN0aXZpdHk8L3RpdGxlPgogICAgPHNjcmlwdCBzcmM9Imh0dHBzOi8vY2RuLmpzZGVsaXZyLm5ldC9ucG0vZWNoYXJ0c0A1LjQuMy9kaXN0L2VjaGFydHMubWluLmpzIj48L3NjcmlwdD4KICAgIDxzY3JpcHQgc3JjPSJodHRwczovL2Nkbi5qc2RlbGl2ci5uZXQvbnBtL2RhdGUtZm5zQDQuMS4wL2Nkbi5taW4uanMiPjwvc2NyaXB0PgogICAgPHN0eWxlPgogICAgICBib2R5IHsKICAgICAgICBmb250LWZhbWlseTogQXJpYWwsIHNhbnMtc2VyaWY7CiAgICAgICAgbWFyZ2luOiAyMHB4OwogICAgICAgIGNvbG9yOiAjMzMzOwogICAgICB9CiAgICAgIC5jb250YWluZXIgewogICAgICAgIG1heC13aWR0aDogMTgwMHB4OwogICAgICAgIG1hcmdpbjogMCBhdXRvOwogICAgICB9CiAgICAgIC5kYXNoYm9hcmQtaGVhZGVyIHsKICAgICAgICBkaXNwbGF5OiBmbGV4OwogICAgICAgIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjsKICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyOwogICAgICAgIG1hcmdpbi1ib3R0b206IDEwcHg7CiAgICAgIH0KICAgICAgLmRhc2hib2FyZC10aXRsZSB7CiAgICAgICAgbWFyZ2luOiAwOwogICAgICB9CiAgICAgIC5yb3cgewogICAgICAgIGRpc3BsYXk6IGZsZXg7CiAgICAgICAgbWFyZ2luLWJvdHRvbTogMzBweDsKICAgICAgICBnYXA6IDIwcHg7CiAgICAgIH0KICAgICAgLmNoYXJ0LWNvbnRhaW5lciB7CiAgICAgICAgZmxleDogMTsKICAgICAgICBoZWlnaHQ6IDMwMHB4OwogICAgICAgIGJvcmRlcjogMXB4IHNvbGlkICNlYWVhZWE7CiAgICAgICAgYm9yZGVyLXJhZGl1czogNXB4OwogICAgICAgIGJveC1zaGFkb3c6IDAgMnB4IDhweCByZ2JhKDAsIDAsIDAsIDAuMSk7CiAgICAgIH0KICAgICAgdGFibGUgewogICAgICAgIHdpZHRoOiAxMDAlOwogICAgICAgIGJvcmRlci1jb2xsYXBzZTogY29sbGFwc2U7CiAgICAgICAgbWFyZ2luLXRvcDogMTBweDsKICAgICAgICBib3gtc2hhZG93OiAwIDJweCA4cHggcmdiYSgwLCAwLCAwLCAwLjEpOwogICAgICB9CiAgICAgIHRoLAogICAgICB0ZCB7CiAgICAgICAgcGFkZGluZzogMTJweCAxNXB4OwogICAgICAgIHRleHQtYWxpZ246IGxlZnQ7CiAgICAgICAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkICNkZGQ7CiAgICAgIH0KICAgICAgdGggewogICAgICAgIGJhY2tncm91bmQtY29sb3I6ICNmOGY4Zjg7CiAgICAgICAgZm9udC13ZWlnaHQ6IGJvbGQ7CiAgICAgIH0KICAgICAgdHI6aG92ZXIgewogICAgICAgIGJhY2tncm91bmQtY29sb3I6ICNmNWY1ZjU7CiAgICAgIH0KICAgICAgYSB7CiAgICAgICAgY29sb3I6ICMxYTczZTg7CiAgICAgICAgdGV4dC1kZWNvcmF0aW9uOiBub25lOwogICAgICB9CiAgICAgIGE6aG92ZXIgewogICAgICAgIHRleHQtZGVjb3JhdGlvbjogdW5kZXJsaW5lOwogICAgICB9CiAgICAgIC50YWJsZS1jb250YWluZXIgewogICAgICAgIG1hcmdpbi10b3A6IDIwcHg7CiAgICAgICAgYm9yZGVyOiAxcHggc29saWQgI2VhZWFlYTsKICAgICAgICBib3JkZXItcmFkaXVzOiA1cHg7CiAgICAgICAgcGFkZGluZzogMTVweDsKICAgICAgICBib3gtc2hhZG93OiAwIDJweCA4cHggcmdiYSgwLCAwLCAwLCAwLjEpOwogICAgICB9CiAgICAgIC50YWJsZS1mb290ZXIgewogICAgICAgIGRpc3BsYXk6IGZsZXg7CiAgICAgICAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuOwogICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7CiAgICAgICAgbWFyZ2luLXRvcDogMTBweDsKICAgICAgICBtYXJnaW4tYm90dG9tOiA1cHg7CiAgICAgIH0KICAgICAgLnRhYmxlLWhlYWRlciB7CiAgICAgICAgZGlzcGxheTogZmxleDsKICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47CiAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjsKICAgICAgICBtYXJnaW4tYm90dG9tOiAxMHB4OwogICAgICB9CiAgICAgIGgyLAogICAgICBoMyB7CiAgICAgICAgbWFyZ2luOiAwOwogICAgICAgIGNvbG9yOiAjNDQ0OwogICAgICB9CiAgICAgIC5zb3VyY2UtZGVzY3JpcHRpb24gewogICAgICAgIGZvbnQtc3R5bGU6IGl0YWxpYzsKICAgICAgICBjb2xvcjogIzY2NjsKICAgICAgfQogICAgICAuc291cmNlLWluZm8gewogICAgICAgIGZvbnQtc3R5bGU6IGl0YWxpYzsKICAgICAgICBmb250LXNpemU6IHNtYWxsZXI7CiAgICAgICAgY29sb3I6ICM2NjY7CiAgICAgIH0KICAgICAgLyogU3dpdGNoIGJ1dHRvbiBzdHlsZXMgKi8KICAgICAgLnN3aXRjaC1jb250YWluZXIgewogICAgICAgIGRpc3BsYXk6IGZsZXg7CiAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjsKICAgICAgfQogICAgICAuc3dpdGNoLWxhYmVsIHsKICAgICAgICBtYXJnaW46IDAgMTBweDsKICAgICAgICBmb250LXdlaWdodDogYm9sZDsKICAgICAgICBmb250LXNpemU6IDE0cHg7CiAgICAgIH0KICAgICAgLnN3aXRjaCB7CiAgICAgICAgcG9zaXRpb246IHJlbGF0aXZlOwogICAgICAgIGRpc3BsYXk6IGlubGluZS1ibG9jazsKICAgICAgICB3aWR0aDogNjBweDsKICAgICAgICBoZWlnaHQ6IDI4cHg7CiAgICAgIH0KICAgICAgLnN3aXRjaCBpbnB1dCB7CiAgICAgICAgb3BhY2l0eTogMDsKICAgICAgICB3aWR0aDogMDsKICAgICAgICBoZWlnaHQ6IDA7CiAgICAgIH0KICAgICAgLnNsaWRlciB7CiAgICAgICAgcG9zaXRpb246IGFic29sdXRlOwogICAgICAgIGN1cnNvcjogcG9pbnRlcjsKICAgICAgICB0b3A6IDA7CiAgICAgICAgbGVmdDogMDsKICAgICAgICByaWdodDogMDsKICAgICAgICBib3R0b206IDA7CiAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogI2NjYzsKICAgICAgICB0cmFuc2l0aW9uOiAwLjRzOwogICAgICAgIGJvcmRlci1yYWRpdXM6IDM0cHg7CiAgICAgIH0KICAgICAgLnNsaWRlcjpiZWZvcmUgewogICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICAgICAgICBjb250ZW50OiAnJzsKICAgICAgICBoZWlnaHQ6IDIwcHg7CiAgICAgICAgd2lkdGg6IDIwcHg7CiAgICAgICAgbGVmdDogNHB4OwogICAgICAgIGJvdHRvbTogNHB4OwogICAgICAgIGJhY2tncm91bmQtY29sb3I6IHdoaXRlOwogICAgICAgIHRyYW5zaXRpb246IDAuNHM7CiAgICAgICAgYm9yZGVyLXJhZGl1czogNTAlOwogICAgICB9CiAgICAgIGlucHV0OmNoZWNrZWQgKyAuc2xpZGVyIHsKICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjMjE5NmYzOwogICAgICB9CiAgICAgIGlucHV0OmZvY3VzICsgLnNsaWRlciB7CiAgICAgICAgYm94LXNoYWRvdzogMCAwIDFweCAjMjE5NmYzOwogICAgICB9CiAgICAgIGlucHV0OmNoZWNrZWQgKyAuc2xpZGVyOmJlZm9yZSB7CiAgICAgICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVYKDMycHgpOwogICAgICB9CiAgICAgIC52aWV3LW1vZGUgewogICAgICAgIG1hcmdpbi1sZWZ0OiA4cHg7CiAgICAgICAgZm9udC13ZWlnaHQ6IGJvbGQ7CiAgICAgICAgbWluLXdpZHRoOiA5MHB4OwogICAgICB9CiAgICA8L3N0eWxlPgogIDwvaGVhZD4KICA8Ym9keT4KICAgIDxkaXYgY2xhc3M9ImNvbnRhaW5lciI+CiAgICAgIDxkaXYgY2xhc3M9ImRhc2hib2FyZC1oZWFkZXIiPgogICAgICAgIDxoMiBpZD0iZGFzaGJvYXJkLXRpdGxlIiBjbGFzcz0iZGFzaGJvYXJkLXRpdGxlIj48L2gyPgogICAgICAgIDxkaXYgY2xhc3M9InN3aXRjaC1jb250YWluZXIiPgogICAgICAgICAgPHNwYW4gY2xhc3M9InN3aXRjaC1sYWJlbCI+U3RvcnkgUG9pbnRzPC9zcGFuPgogICAgICAgICAgPGxhYmVsIGNsYXNzPSJzd2l0Y2giPgogICAgICAgICAgICA8aW5wdXQgdHlwZT0iY2hlY2tib3giIGlkPSJ2aWV3LW1vZGUtc3dpdGNoIiAvPgogICAgICAgICAgICA8c3BhbiBjbGFzcz0ic2xpZGVyIj48L3NwYW4+CiAgICAgICAgICA8L2xhYmVsPgogICAgICAgICAgPHNwYW4gY2xhc3M9InN3aXRjaC1sYWJlbCI+Q291bnQ8L3NwYW4+CiAgICAgICAgPC9kaXY+CiAgICAgIDwvZGl2PgogICAgICA8cCBjbGFzcz0ic291cmNlLWRlc2NyaXB0aW9uIiBpZD0iZGFzaGJvYXJkLWRlc2NyaXB0aW9uIj48L3A+CiAgICAgIDxwIGNsYXNzPSJzb3VyY2UtaW5mbyIgaWQ9ImRhc2hib2FyZC1tZXRhZGF0YSI+PC9wPgoKICAgICAgPGRpdiBjbGFzcz0icm93Ij4KICAgICAgICA8ZGl2IGNsYXNzPSJjaGFydC1jb250YWluZXIiIGlkPSJ3ZWVrbHljb21wbGV0aW9uY2hhcnQiPjwvZGl2PgogICAgICAgIDxkaXYgY2xhc3M9ImNoYXJ0LWNvbnRhaW5lciIgaWQ9IndlZWtseXZlbG9jaXR5Y2hhcnQiPjwvZGl2PgogICAgICAgIDxkaXYgY2xhc3M9ImNoYXJ0LWNvbnRhaW5lciIgaWQ9ImVmZm9ydGRpc3RyaWJ1dGlvbmNoYXJ0Ij48L2Rpdj4KICAgICAgPC9kaXY+CgogICAgICA8ZGl2IGNsYXNzPSJ0YWJsZS1jb250YWluZXIiPgogICAgICAgIDxkaXYgY2xhc3M9InRhYmxlLWhlYWRlciI+CiAgICAgICAgICA8aDMgaWQ9InRhYmxlLXRpdGxlIj48L2gzPgogICAgICAgICAgPHNwYW4gaWQ9InNlbGVjdGVkLXNvdXJjZSIKICAgICAgICAgICAgPkNsaWNrIG9uIGFueSBjaGFydCBiYXIgdG8gc2VlIGRldGFpbHM8L3NwYW4KICAgICAgICAgID4KICAgICAgICA8L2Rpdj4KICAgICAgICA8dGFibGU+CiAgICAgICAgICA8dGhlYWQ+CiAgICAgICAgICAgIDx0cj4KICAgICAgICAgICAgICA8dGg+IzwvdGg+CiAgICAgICAgICAgICAgPHRoPlRpdGxlPC90aD4KICAgICAgICAgICAgICA8dGg+VHlwZTwvdGg+CiAgICAgICAgICAgICAgPHRoPlJlcG88L3RoPgogICAgICAgICAgICAgIDx0aD5NaWxlc3RvbmU8L3RoPgogICAgICAgICAgICAgIDx0aD5Qb2ludHM8L3RoPgogICAgICAgICAgICA8L3RyPgogICAgICAgICAgPC90aGVhZD4KICAgICAgICAgIDx0Ym9keSBpZD0iZGV0YWlscy10YWJsZSI+CiAgICAgICAgICAgIDx0cj4KICAgICAgICAgICAgICA8dGQgY29sc3Bhbj0iMyI+Tm8gZGF0YSBzZWxlY3RlZDwvdGQ+CiAgICAgICAgICAgIDwvdHI+CiAgICAgICAgICA8L3Rib2R5PgogICAgICAgIDwvdGFibGU+CiAgICAgIDwvZGl2PgogICAgICA8ZGl2IGNsYXNzPSJ0YWJsZS1jb250YWluZXIiPgogICAgICAgIDxkaXYgY2xhc3M9InRhYmxlLWhlYWRlciI+CiAgICAgICAgICA8aDM+RGF0YSBTdHJlYW1zPC9oMz4KICAgICAgICA8L2Rpdj4KICAgICAgICA8dGFibGU+CiAgICAgICAgICA8dGhlYWQ+CiAgICAgICAgICAgIDx0cj4KICAgICAgICAgICAgICA8dGg+TmFtZTwvdGg+CiAgICAgICAgICAgICAgPHRoPkRlc2NyaXB0aW9uPC90aD4KICAgICAgICAgICAgICA8dGg+UXVlcnk8L3RoPgogICAgICAgICAgICA8L3RyPgogICAgICAgICAgPC90aGVhZD4KICAgICAgICAgIDx0Ym9keSBpZD0iZGV0YWlscy10YWJsZS1zdHJlYW0iPgogICAgICAgICAgICA8dHI+CiAgICAgICAgICAgICAgPHRkIGNvbHNwYW49IjMiPk5vIGRhdGEgc2VsZWN0ZWQ8L3RkPgogICAgICAgICAgICA8L3RyPgogICAgICAgICAgPC90Ym9keT4KICAgICAgICA8L3RhYmxlPgogICAgICAgIDxkaXYgY2xhc3M9InRhYmxlLWZvb3RlciI+CiAgICAgICAgICA8c3BhbgogICAgICAgICAgICA+PGkKICAgICAgICAgICAgICA+U3RyZWFtcyBhcmUgcXVlcmllcyBleGVjdXRlZCBhZ2FpbnN0IEFMTCBJc3N1ZXMgYW5kIFB1bGwgUmVxdWVzdHMKICAgICAgICAgICAgICAoUFIpIGF0dGFjaGVkIHRvIHRoZSBzZWxlY3RlZCBwcm9qZWN0LiA8YnIgLz4KICAgICAgICAgICAgICBUaGVpciBvcmRlciBtYXR0ZXJzLCBpZiBhIElzc3VlIG9yIFBSIGlzIHByZXNlbnQgaW4gdGhlIGZpcnN0CiAgICAgICAgICAgICAgc3RyZWFtLCBpdCB3aWxsIGJlIGlnbm9yZWQgb24gdGhlIGZvbGxvd2luZyBzdHJlYW1zLiBUaGlzIHByZXZlbnRzCiAgICAgICAgICAgICAgaXNzdWVzL1BScyBmcm9tIGJlaW5nIGNvdW50ZWQgbXVsdGlwbGUgdGltZXMuPC9pCiAgICAgICAgICAgID48L3NwYW4KICAgICAgICAgID4KICAgICAgICA8L2Rpdj4KICAgICAgPC9kaXY+CiAgICA8L2Rpdj4KCiAgICA8c2NyaXB0PgogICAgICAvLyBTaW5nbGUgSmF2YVNjcmlwdCBkYXRhIG9iamVjdCBjb250YWluaW5nIGFsbCBvdXIgZGF0YQogICAgICBjb25zdCBzcmNEYXRhID0gYXRvYignUkVQTEFDRV9NRScpCiAgICAgIGNvbnN0IGdyb3VwTWV0cmljcyA9IEpTT04ucGFyc2Uoc3JjRGF0YSkKICAgICAgY29uc29sZS5sb2coJ1NvdXJjZSBkYXRhIGRlY29kZWQnLCBncm91cE1ldHJpY3MpCgogICAgICAvLyBDb3BpZWQgdG8gdGhlIHdpbmRvdyBvYmplY3QgdG8gZmFjaWxpdGF0ZSBidWlsZGluZyBvZiBxdWVyaWVzCiAgICAgIHdpbmRvdy5kYXRhTm9kZXMgPSBncm91cE1ldHJpY3Mubm9kZXMKCiAgICAgIGRvY3VtZW50LnRpdGxlID0gZ3JvdXBNZXRyaWNzLm5hbWUKCiAgICAgIC8vIFVwZGF0ZSB0aGUgdGFibGUgd2l0aCBkYXRhIGNsaWNrZWQgaW4gdGhlIGNoYXJ0CiAgICAgIGZ1bmN0aW9uIHVwZGF0ZVRhYmxlKHsgc3JjQ2hhcnQsIHNlbGVjdGlvbiwgbm9kZXMgfSkgewogICAgICAgIGNvbnNvbGUubG9nKCdVcGRhdGluZyB0YWJsZSB3aXRoIGRhdGEgY29taW5nIGZyb206Jywgc3JjQ2hhcnQpCgogICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0YWJsZS10aXRsZScpLnRleHRDb250ZW50ID0KICAgICAgICAgIGBOb2RlcyBmcm9tICR7c3JjQ2hhcnR9YAogICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzZWxlY3RlZC1zb3VyY2UnKS50ZXh0Q29udGVudCA9CiAgICAgICAgICBgU2VsZWN0aW9uOiAke3NlbGVjdGlvbn1gCgogICAgICAgIGNvbnN0IHRhYmxlQm9keSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkZXRhaWxzLXRhYmxlJykKICAgICAgICB0YWJsZUJvZHkuaW5uZXJIVE1MID0gJycKCiAgICAgICAgbm9kZXMuZm9yRWFjaCgobm9kZSkgPT4gewogICAgICAgICAgY29uc3Qgcm93ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndHInKQogICAgICAgICAgcm93LmlubmVySFRNTCA9IGAKICAgICAgICAgICAgICAgIDx0ZD4ke25vZGUubnVtYmVyfTwvdGQ+CiAgICAgICAgICAgICAgICA8dGQ+PGEgaHJlZj0iJHtub2RlLnVybH0iIHRhcmdldD0iX2JsYW5rIj4ke25vZGUudGl0bGV9PC9hPjwvdGQ+CiAgICAgICAgICAgICAgICA8dGQ+JHtub2RlLnR5cGV9PC90ZD4KICAgICAgICAgICAgICAgIDx0ZD48YSBocmVmPSIke25vZGUucmVwb3NpdG9yeS51cmx9IiB0YXJnZXQ9Il9ibGFuayI+JHtub2RlLnJlcG9zaXRvcnkub3duZXIubG9naW59LyR7bm9kZS5yZXBvc2l0b3J5Lm5hbWV9PC9hPjwvdGQ+CiAgICAgICAgICAgICAgICA8dGQ+JHtub2RlLm1pbGVzdG9uZT8udGl0bGUgPyBub2RlLm1pbGVzdG9uZT8udGl0bGUgOiAnJ308L3RkPgogICAgICAgICAgICAgICAgPHRkPiR7bm9kZS5wb2ludHN9PC90ZD4KICAgICAgICAgICAgICBgCiAgICAgICAgICB0YWJsZUJvZHkuYXBwZW5kQ2hpbGQocm93KQogICAgICAgIH0pCiAgICAgIH0KCiAgICAgIGZ1bmN0aW9uIHVwZGF0ZVN0cmVhbXNUYWJsZShzcmNEYXRhKSB7CiAgICAgICAgY29uc3QgdGFibGVCb2R5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2RldGFpbHMtdGFibGUtc3RyZWFtJykKICAgICAgICB0YWJsZUJvZHkuaW5uZXJIVE1MID0gJycKCiAgICAgICAgc3JjRGF0YS5zdHJlYW1zLmZvckVhY2goKHN0cmVhbSkgPT4gewogICAgICAgICAgY29uc3Qgcm93ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndHInKQogICAgICAgICAgcm93LmlubmVySFRNTCA9IGAKICAgICAgICAgICAgICAgIDx0ZD4ke3N0cmVhbS5uYW1lfTwvdGQ+CiAgICAgICAgICAgICAgICA8dGQ+JHtzdHJlYW0uZGVzY3JpcHRpb259PC90ZD4KICAgICAgICAgICAgICAgIDx0ZD4ke0pTT04uc3RyaW5naWZ5KHN0cmVhbS5xdWVyeSl9PC90ZD4KICAgICAgICAgICAgICBgCiAgICAgICAgICB0YWJsZUJvZHkuYXBwZW5kQ2hpbGQocm93KQogICAgICAgIH0pCiAgICAgIH0KCiAgICAgIGZ1bmN0aW9uIGNyZWF0ZVdlZWtseUNvbXBsZXRpb25DaGFydChlbGVtZW50SWQsIGRhdGEsIG1ldHJpYykgewogICAgICAgIGNvbnN0IGNoYXJ0RG9tID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZWxlbWVudElkKQogICAgICAgIGNvbnN0IG15Q2hhcnQgPSBlY2hhcnRzLmluaXQoY2hhcnREb20pCgogICAgICAgIGNvbnN0IHZpc2libGVDb3VudCA9IDIwCiAgICAgICAgY29uc3Qgc3RhcnRQZXJjZW50YWdlID0KICAgICAgICAgICgoZGF0YS53ZWVrcy5sZW5ndGggLSB2aXNpYmxlQ291bnQpIC8gZGF0YS53ZWVrcy5sZW5ndGgpICogMTAwCiAgICAgICAgY29uc3QgZW5kUGVyY2VudGFnZSA9IDEwMAoKICAgICAgICBjb25zdCBjaGFydFRpdGxlID0gJ1dlZWtseSBDb21wbGV0aW9uJwoKICAgICAgICBjb25zdCBoaWdoZXN0VmFsdWUgPSBNYXRoLm1heCgKICAgICAgICAgIC4uLmRhdGEud2Vla3MubWFwKCh3ZWVrKSA9PiB3ZWVrLm1ldHJpY3Mubm9kZXMuY291bnQpCiAgICAgICAgKQogICAgICAgIGNvbnN0IHJvdW5kVXBIaWdoZXN0ID0gTWF0aC5jZWlsKGhpZ2hlc3RWYWx1ZSAvIDEwKSAqIDEwCgogICAgICAgIGNvbnN0IG9wdGlvbiA9IHsKICAgICAgICAgIHRpdGxlOiB7CiAgICAgICAgICAgIHRleHQ6IGNoYXJ0VGl0bGUsCiAgICAgICAgICAgIHBvc2l0aW9uOiAndG9wJywKICAgICAgICAgICAgbGVmdDogJ2NlbnRlcicsCiAgICAgICAgICAgIHRleHRTdHlsZTogewogICAgICAgICAgICAgIGZvbnRTaXplOiAxNAogICAgICAgICAgICB9CiAgICAgICAgICB9LAogICAgICAgICAgbGVnZW5kOiB7CiAgICAgICAgICAgIHRvcDogJ3RvcCcsCiAgICAgICAgICAgIGxlZnQ6ICdjZW50ZXInLAogICAgICAgICAgICB0b3A6IDMwCiAgICAgICAgICB9LAogICAgICAgICAgdG9vbHRpcDogewogICAgICAgICAgICB0cmlnZ2VyOiAnYXhpcycsCiAgICAgICAgICAgIGF4aXNQb2ludGVyOiB7CiAgICAgICAgICAgICAgdHlwZTogJ3NoYWRvdycKICAgICAgICAgICAgfQogICAgICAgICAgfSwKICAgICAgICAgIGdyaWQ6IHsKICAgICAgICAgICAgbGVmdDogJzMlJywKICAgICAgICAgICAgcmlnaHQ6ICc0JScsCiAgICAgICAgICAgIGJvdHRvbTogJzMlJywKICAgICAgICAgICAgdG9wOiAnMzAlJywKICAgICAgICAgICAgY29udGFpbkxhYmVsOiB0cnVlCiAgICAgICAgICB9LAogICAgICAgICAgZGF0YVpvb206IFsKICAgICAgICAgICAgewogICAgICAgICAgICAgIHR5cGU6ICdpbnNpZGUnLCAvLyBBbGxvd3Mgc2Nyb2xsaW5nIHdpdGggbW91c2Ugb3IgdG91Y2ggZ2VzdHVyZXMKICAgICAgICAgICAgICB4QXhpc0luZGV4OiAwLAogICAgICAgICAgICAgIHN0YXJ0OiBzdGFydFBlcmNlbnRhZ2UsCiAgICAgICAgICAgICAgZW5kOiBlbmRQZXJjZW50YWdlCiAgICAgICAgICAgIH0KICAgICAgICAgIF0sCiAgICAgICAgICB4QXhpczogewogICAgICAgICAgICB0eXBlOiAnY2F0ZWdvcnknLAogICAgICAgICAgICBheGlzTGFiZWw6IHsgaW50ZXJ2YWw6IDAsIHJvdGF0ZTogMzAgfSwKICAgICAgICAgICAgZGF0YTogZGF0YS53ZWVrcy5tYXAoKHZhbHVlLCBpbmRleCkgPT4KICAgICAgICAgICAgICBkYXRlRm5zLmZvcm1hdChuZXcgRGF0ZSh2YWx1ZS5maXJzdERheSksICdMTEwgZG8nKQogICAgICAgICAgICApCiAgICAgICAgICB9LAogICAgICAgICAgeUF4aXM6IHsKICAgICAgICAgICAgdHlwZTogJ3ZhbHVlJywKICAgICAgICAgICAgbWluOiAwLAogICAgICAgICAgICBtYXg6IHJvdW5kVXBIaWdoZXN0CiAgICAgICAgICB9LAogICAgICAgICAgc2VyaWVzOiBbCiAgICAgICAgICAgIC4uLmRhdGEuc3RyZWFtcy5tYXAoKHN0cmVhbSwgaW5kZXgpID0+IHsKICAgICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgICAgbmFtZTogc3RyZWFtLm5hbWUsCiAgICAgICAgICAgICAgICB0eXBlOiAnYmFyJywKICAgICAgICAgICAgICAgIHN0YWNrOiAnYWQnLAogICAgICAgICAgICAgICAgZGF0YTogc3RyZWFtLndlZWtzLm1hcCgKICAgICAgICAgICAgICAgICAgKHZhbHVlLCBpbmRleCkgPT4gdmFsdWUubWV0cmljc1ttZXRyaWNdLmNvdW50CiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KSwKICAgICAgICAgICAgewogICAgICAgICAgICAgIG5hbWU6ICdUb3RhbCcsCiAgICAgICAgICAgICAgdHlwZTogJ2xpbmUnLAogICAgICAgICAgICAgIGRhdGE6IGRhdGEud2Vla3MubWFwKCh3ZWVrLCBpbmRleCkgPT4gd2Vlay5tZXRyaWNzW21ldHJpY10uY291bnQpCiAgICAgICAgICAgIH0KICAgICAgICAgIF0KICAgICAgICB9CgogICAgICAgIC8vIEFwcGx5IG9wdGlvbnMgdG8gY2hhcnQKICAgICAgICBteUNoYXJ0LnNldE9wdGlvbihvcHRpb24pCgogICAgICAgIC8vIEFkZCBjbGljayBldmVudCBmb3IgaW50ZXJhY3Rpdml0eQogICAgICAgIG15Q2hhcnQub24oJ2NsaWNrJywgZnVuY3Rpb24gKHBhcmFtcykgewogICAgICAgICAgY29uc3Qgc3RyZWFtTmFtZSA9IHBhcmFtcy5zZXJpZXNOYW1lCiAgICAgICAgICBjb25zdCBzdHJlYW1JbmRleCA9IHBhcmFtcy5kYXRhSW5kZXgKICAgICAgICAgIGNvbnN0IHN0cmVhbSA9IGRhdGEuc3RyZWFtcy5maW5kKAogICAgICAgICAgICAoc3RyZWFtKSA9PiBzdHJlYW0ubmFtZSA9PT0gc3RyZWFtTmFtZQogICAgICAgICAgKQogICAgICAgICAgaWYgKHN0cmVhbSAmJiBzdHJlYW0ud2Vla3Nbc3RyZWFtSW5kZXhdKSB7CiAgICAgICAgICAgIHVwZGF0ZVRhYmxlKHsKICAgICAgICAgICAgICBzcmNDaGFydDogY2hhcnRUaXRsZSwKICAgICAgICAgICAgICBzZWxlY3Rpb246IGAke3N0cmVhbU5hbWV9IG9uICR7ZGF0ZUZucy5mb3JtYXQobmV3IERhdGUoc3RyZWFtLndlZWtzW3N0cmVhbUluZGV4XS5maXJzdERheSksICdMTEwgZG8nKX0gKCR7c3RyZWFtLndlZWtzW3N0cmVhbUluZGV4XS5ub2Rlcy5sZW5ndGh9IG5vZGVzKWAsCiAgICAgICAgICAgICAgbm9kZXM6IHN0cmVhbS53ZWVrc1tzdHJlYW1JbmRleF0ubm9kZXMKICAgICAgICAgICAgfSkKICAgICAgICAgIH0KICAgICAgICB9KQoKICAgICAgICAvLyBNYWtlIGNoYXJ0IHJlc3BvbnNpdmUKICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgZnVuY3Rpb24gKCkgewogICAgICAgICAgbXlDaGFydC5yZXNpemUoKQogICAgICAgIH0pCgogICAgICAgIHJldHVybiBteUNoYXJ0CiAgICAgIH0KCiAgICAgIGZ1bmN0aW9uIGNyZWF0ZVdlZWtseVZlbG9jaXR5Q2hhcnQoZWxlbWVudElkLCBkYXRhLCBtZXRyaWMpIHsKICAgICAgICBjb25zdCBjaGFydERvbSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGVsZW1lbnRJZCkKICAgICAgICBjb25zdCBteUNoYXJ0ID0gZWNoYXJ0cy5pbml0KGNoYXJ0RG9tKQoKICAgICAgICBjb25zdCB2aXNpYmxlQ291bnQgPSAyMAogICAgICAgIGNvbnN0IHN0YXJ0UGVyY2VudGFnZSA9CiAgICAgICAgICAoKGRhdGEud2Vla3MubGVuZ3RoIC0gdmlzaWJsZUNvdW50KSAvIGRhdGEud2Vla3MubGVuZ3RoKSAqIDEwMAogICAgICAgIGNvbnN0IGVuZFBlcmNlbnRhZ2UgPSAxMDAKCiAgICAgICAgY29uc3QgY2hhcnRUaXRsZSA9ICdXZWVrbHkgVmVsb2NpdHknCgogICAgICAgIGNvbnN0IGhpZ2hlc3RWYWx1ZSA9IE1hdGgubWF4KAogICAgICAgICAgLi4uZGF0YS53ZWVrcy5tYXAoKHdlZWspID0+IHdlZWsubWV0cmljcy5ub2Rlcy52ZWxvY2l0eSkKICAgICAgICApCiAgICAgICAgY29uc3Qgcm91bmRVcEhpZ2hlc3QgPSBNYXRoLmNlaWwoaGlnaGVzdFZhbHVlIC8gMTApICogMTAKCiAgICAgICAgY29uc3Qgb3B0aW9uID0gewogICAgICAgICAgdGl0bGU6IHsKICAgICAgICAgICAgdGV4dDogY2hhcnRUaXRsZSwKICAgICAgICAgICAgcG9zaXRpb246ICd0b3AnLAogICAgICAgICAgICBsZWZ0OiAnY2VudGVyJywKICAgICAgICAgICAgdGV4dFN0eWxlOiB7CiAgICAgICAgICAgICAgZm9udFNpemU6IDE0CiAgICAgICAgICAgIH0KICAgICAgICAgIH0sCiAgICAgICAgICBsZWdlbmQ6IHsKICAgICAgICAgICAgdG9wOiAndG9wJywKICAgICAgICAgICAgbGVmdDogJ2NlbnRlcicsCiAgICAgICAgICAgIHRvcDogMzAKICAgICAgICAgIH0sCiAgICAgICAgICB0b29sdGlwOiB7CiAgICAgICAgICAgIHRyaWdnZXI6ICdheGlzJywKICAgICAgICAgICAgYXhpc1BvaW50ZXI6IHsKICAgICAgICAgICAgICB0eXBlOiAnc2hhZG93JwogICAgICAgICAgICB9CiAgICAgICAgICB9LAogICAgICAgICAgZ3JpZDogewogICAgICAgICAgICBsZWZ0OiAnMyUnLAogICAgICAgICAgICByaWdodDogJzQlJywKICAgICAgICAgICAgYm90dG9tOiAnMyUnLAogICAgICAgICAgICB0b3A6ICczMCUnLAogICAgICAgICAgICBjb250YWluTGFiZWw6IHRydWUKICAgICAgICAgIH0sCiAgICAgICAgICBkYXRhWm9vbTogWwogICAgICAgICAgICB7CiAgICAgICAgICAgICAgdHlwZTogJ2luc2lkZScsIC8vIEFsbG93cyBzY3JvbGxpbmcgd2l0aCBtb3VzZSBvciB0b3VjaCBnZXN0dXJlcwogICAgICAgICAgICAgIHhBeGlzSW5kZXg6IDAsCiAgICAgICAgICAgICAgc3RhcnQ6IHN0YXJ0UGVyY2VudGFnZSwKICAgICAgICAgICAgICBlbmQ6IGVuZFBlcmNlbnRhZ2UKICAgICAgICAgICAgfQogICAgICAgICAgXSwKICAgICAgICAgIHhBeGlzOiB7CiAgICAgICAgICAgIHR5cGU6ICdjYXRlZ29yeScsCiAgICAgICAgICAgIGF4aXNMYWJlbDogeyBpbnRlcnZhbDogMCwgcm90YXRlOiAzMCB9LAogICAgICAgICAgICBkYXRhOiBkYXRhLndlZWtzLm1hcCgodmFsdWUsIGluZGV4KSA9PgogICAgICAgICAgICAgIGRhdGVGbnMuZm9ybWF0KG5ldyBEYXRlKHZhbHVlLmZpcnN0RGF5KSwgJ0xMTCBkbycpCiAgICAgICAgICAgICkKICAgICAgICAgIH0sCiAgICAgICAgICB5QXhpczogewogICAgICAgICAgICB0eXBlOiAndmFsdWUnLAogICAgICAgICAgICBtaW46IDAsCiAgICAgICAgICAgIG1heDogcm91bmRVcEhpZ2hlc3QKICAgICAgICAgIH0sCiAgICAgICAgICBzZXJpZXM6IFsKICAgICAgICAgICAgLi4uZGF0YS5zdHJlYW1zLm1hcCgoc3RyZWFtLCBpbmRleCkgPT4gewogICAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgICBuYW1lOiBzdHJlYW0ubmFtZSwKICAgICAgICAgICAgICAgIHR5cGU6ICdsaW5lJywKICAgICAgICAgICAgICAgIGRhdGE6IHN0cmVhbS53ZWVrcy5tYXAoCiAgICAgICAgICAgICAgICAgICh2YWx1ZSwgaW5kZXgpID0+IHZhbHVlLm1ldHJpY3NbbWV0cmljXS52ZWxvY2l0eQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSksCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICBuYW1lOiAnVG90YWwnLAogICAgICAgICAgICAgIHR5cGU6ICdsaW5lJywKICAgICAgICAgICAgICBkYXRhOiBkYXRhLndlZWtzLm1hcCgKICAgICAgICAgICAgICAgICh3ZWVrLCBpbmRleCkgPT4gd2Vlay5tZXRyaWNzW21ldHJpY10udmVsb2NpdHkKICAgICAgICAgICAgICApCiAgICAgICAgICAgIH0KICAgICAgICAgIF0KICAgICAgICB9CgogICAgICAgIC8vIEFwcGx5IG9wdGlvbnMgdG8gY2hhcnQKICAgICAgICBteUNoYXJ0LnNldE9wdGlvbihvcHRpb24pCgogICAgICAgIC8vIE1ha2UgY2hhcnQgcmVzcG9uc2l2ZQogICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBteUNoYXJ0LnJlc2l6ZSgpCiAgICAgICAgfSkKCiAgICAgICAgcmV0dXJuIG15Q2hhcnQKICAgICAgfQoKICAgICAgZnVuY3Rpb24gY3JlYXRlRWZmb3J0RGlzdHJpYnV0aW9uQ2hhcnQoZWxlbWVudElkLCBkYXRhLCBtZXRyaWMpIHsKICAgICAgICBjb25zdCBjaGFydERvbSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGVsZW1lbnRJZCkKICAgICAgICBjb25zdCBteUNoYXJ0ID0gZWNoYXJ0cy5pbml0KGNoYXJ0RG9tKQoKICAgICAgICBjb25zdCB2aXNpYmxlQ291bnQgPSAyMAogICAgICAgIGNvbnN0IHN0YXJ0UGVyY2VudGFnZSA9CiAgICAgICAgICAoKGRhdGEud2Vla3MubGVuZ3RoIC0gdmlzaWJsZUNvdW50KSAvIGRhdGEud2Vla3MubGVuZ3RoKSAqIDEwMAogICAgICAgIGNvbnN0IGVuZFBlcmNlbnRhZ2UgPSAxMDAKCiAgICAgICAgY29uc3QgY2hhcnRUaXRsZSA9ICdFZmZvcnQgRGlzdHJpYnV0aW9uICglKScKCiAgICAgICAgY29uc3Qgb3B0aW9uID0gewogICAgICAgICAgdGl0bGU6IHsKICAgICAgICAgICAgdGV4dDogY2hhcnRUaXRsZSwKICAgICAgICAgICAgcG9zaXRpb246ICd0b3AnLAogICAgICAgICAgICBsZWZ0OiAnY2VudGVyJywKICAgICAgICAgICAgdGV4dFN0eWxlOiB7CiAgICAgICAgICAgICAgZm9udFNpemU6IDE0CiAgICAgICAgICAgIH0KICAgICAgICAgIH0sCiAgICAgICAgICBsZWdlbmQ6IHsKICAgICAgICAgICAgdG9wOiAndG9wJywKICAgICAgICAgICAgbGVmdDogJ2NlbnRlcicsCiAgICAgICAgICAgIHRvcDogMzAKICAgICAgICAgIH0sCiAgICAgICAgICB0b29sdGlwOiB7CiAgICAgICAgICAgIHRyaWdnZXI6ICdheGlzJywKICAgICAgICAgICAgYXhpc1BvaW50ZXI6IHsKICAgICAgICAgICAgICB0eXBlOiAnc2hhZG93JwogICAgICAgICAgICB9CiAgICAgICAgICB9LAogICAgICAgICAgZ3JpZDogewogICAgICAgICAgICBsZWZ0OiAnMyUnLAogICAgICAgICAgICByaWdodDogJzQlJywKICAgICAgICAgICAgYm90dG9tOiAnMyUnLAogICAgICAgICAgICB0b3A6ICczMCUnLAogICAgICAgICAgICBjb250YWluTGFiZWw6IHRydWUKICAgICAgICAgIH0sCiAgICAgICAgICBkYXRhWm9vbTogWwogICAgICAgICAgICB7CiAgICAgICAgICAgICAgdHlwZTogJ2luc2lkZScsIC8vIEFsbG93cyBzY3JvbGxpbmcgd2l0aCBtb3VzZSBvciB0b3VjaCBnZXN0dXJlcwogICAgICAgICAgICAgIHhBeGlzSW5kZXg6IDAsCiAgICAgICAgICAgICAgc3RhcnQ6IHN0YXJ0UGVyY2VudGFnZSwKICAgICAgICAgICAgICBlbmQ6IGVuZFBlcmNlbnRhZ2UKICAgICAgICAgICAgfQogICAgICAgICAgXSwKICAgICAgICAgIHhBeGlzOiB7CiAgICAgICAgICAgIHR5cGU6ICdjYXRlZ29yeScsCiAgICAgICAgICAgIGF4aXNMYWJlbDogeyBpbnRlcnZhbDogMCwgcm90YXRlOiAzMCB9LAogICAgICAgICAgICBkYXRhOiBkYXRhLndlZWtzLm1hcCgodmFsdWUsIGluZGV4KSA9PgogICAgICAgICAgICAgIGRhdGVGbnMuZm9ybWF0KG5ldyBEYXRlKHZhbHVlLmZpcnN0RGF5KSwgJ0xMTCBkbycpCiAgICAgICAgICAgICkKICAgICAgICAgIH0sCiAgICAgICAgICB5QXhpczogewogICAgICAgICAgICB0eXBlOiAndmFsdWUnLAogICAgICAgICAgICBtaW46IDAsCiAgICAgICAgICAgIG1heDogMTAwCiAgICAgICAgICB9LAogICAgICAgICAgc2VyaWVzOiBbCiAgICAgICAgICAgIC4uLmRhdGEuc3RyZWFtcy5tYXAoKHN0cmVhbSwgaW5kZXgpID0+IHsKICAgICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgICAgbmFtZTogc3RyZWFtLm5hbWUsCiAgICAgICAgICAgICAgICB0eXBlOiAnYmFyJywKICAgICAgICAgICAgICAgIHN0YWNrOiAnYWQnLAogICAgICAgICAgICAgICAgZGF0YTogc3RyZWFtLndlZWtzLm1hcCgKICAgICAgICAgICAgICAgICAgKHZhbHVlLCBpbmRleCkgPT4gdmFsdWUubWV0cmljc1ttZXRyaWNdLmRpc3RyaWJ1dGlvbgogICAgICAgICAgICAgICAgKSwKICAgICAgICAgICAgICAgIGJhcldpZHRoOiAnMTAwJScsIC8vIEVuc3VyZXMgYmFycyBmaWxsIHRoZWlyIGFsbG9jYXRlZCBzcGFjZQogICAgICAgICAgICAgICAgYmFyR2FwOiAnMCUnLCAvLyBSZW1vdmVzIHNwYWNpbmcgYmV0d2VlbiBzZXJpZXMgKGlmIG11bHRpcGxlKQogICAgICAgICAgICAgICAgYmFyQ2F0ZWdvcnlHYXA6ICcwJScgLy8gUmVtb3ZlcyBzcGFjaW5nIGJldHdlZW4gY2F0ZWdvcmllcwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSkKICAgICAgICAgIF0KICAgICAgICB9CgogICAgICAgIC8vIEFwcGx5IG9wdGlvbnMgdG8gY2hhcnQKICAgICAgICBteUNoYXJ0LnNldE9wdGlvbihvcHRpb24pCgogICAgICAgIC8vIEFkZCBjbGljayBldmVudCBmb3IgaW50ZXJhY3Rpdml0eQogICAgICAgIG15Q2hhcnQub24oJ2NsaWNrJywgZnVuY3Rpb24gKHBhcmFtcykgewogICAgICAgICAgY29uc3Qgc3RyZWFtTmFtZSA9IHBhcmFtcy5zZXJpZXNOYW1lCiAgICAgICAgICBjb25zdCBzdHJlYW1JbmRleCA9IHBhcmFtcy5kYXRhSW5kZXgKICAgICAgICAgIGNvbnN0IHN0cmVhbSA9IGRhdGEuc3RyZWFtcy5maW5kKAogICAgICAgICAgICAoc3RyZWFtKSA9PiBzdHJlYW0ubmFtZSA9PT0gc3RyZWFtTmFtZQogICAgICAgICAgKQogICAgICAgICAgaWYgKHN0cmVhbSAmJiBzdHJlYW0ud2Vla3Nbc3RyZWFtSW5kZXhdKSB7CiAgICAgICAgICAgIHVwZGF0ZVRhYmxlKHsKICAgICAgICAgICAgICBzcmNDaGFydDogY2hhcnRUaXRsZSwKICAgICAgICAgICAgICBzZWxlY3Rpb246IGAke3N0cmVhbU5hbWV9IG9uICR7ZGF0ZUZucy5mb3JtYXQobmV3IERhdGUoc3RyZWFtLndlZWtzW3N0cmVhbUluZGV4XS5maXJzdERheSksICdMTEwgZG8nKX0gKCR7c3RyZWFtLndlZWtzW3N0cmVhbUluZGV4XS5ub2Rlcy5sZW5ndGh9IG5vZGVzKWAsCiAgICAgICAgICAgICAgbm9kZXM6IHN0cmVhbS53ZWVrc1tzdHJlYW1JbmRleF0ubm9kZXMKICAgICAgICAgICAgfSkKICAgICAgICAgIH0KICAgICAgICB9KQoKICAgICAgICAvLyBNYWtlIGNoYXJ0IHJlc3BvbnNpdmUKICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgZnVuY3Rpb24gKCkgewogICAgICAgICAgbXlDaGFydC5yZXNpemUoKQogICAgICAgIH0pCgogICAgICAgIHJldHVybiBteUNoYXJ0CiAgICAgIH0KCiAgICAgIGZ1bmN0aW9uIHRvZ2dsZVZpZXdNb2RlKCkgewogICAgICAgIGNvbnN0IHN3aXRjaEVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndmlldy1tb2RlLXN3aXRjaCcpCgogICAgICAgIHVwZGF0ZUFsbENoYXJ0cyhzd2l0Y2hFbGVtZW50LmNoZWNrZWQgPyAnbm9kZXMnIDogJ3BvaW50cycpCiAgICAgIH0KCiAgICAgIC8vIEZ1bmN0aW9uIHRvIGluaXRpYWxpemUgdGhlIGRhc2hib2FyZCBtZXRhZGF0YQogICAgICBmdW5jdGlvbiBpbml0aWFsaXplRGFzaGJvYXJkKCkgewogICAgICAgIC8vIFNldCBkYXNoYm9hcmQgdGl0bGUgYW5kIG1ldGFkYXRhIGZyb20gdGhlIGRhdGEgb2JqZWN0CiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Rhc2hib2FyZC10aXRsZScpLnRleHRDb250ZW50ID0KICAgICAgICAgIGdyb3VwTWV0cmljcy5uYW1lCiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Rhc2hib2FyZC1kZXNjcmlwdGlvbicpLnRleHRDb250ZW50ID0KICAgICAgICAgIGdyb3VwTWV0cmljcy5kZXNjcmlwdGlvbgogICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkYXNoYm9hcmQtbWV0YWRhdGEnKS50ZXh0Q29udGVudCA9CiAgICAgICAgICBgTGFzdCB1cGRhdGVkOiAke2dyb3VwTWV0cmljcy51cGRhdGVkQXR9YAoKICAgICAgICBjb25zdCBkZWZhdWx0TWV0cmljID0KICAgICAgICAgIGdyb3VwTWV0cmljcy5kZWZhdWx0TWV0cmljICE9PSB1bmRlZmluZWQKICAgICAgICAgICAgPyBncm91cE1ldHJpY3MuZGVmYXVsdE1ldHJpYwogICAgICAgICAgICA6ICdwb2ludHMnCgogICAgICAgIHVwZGF0ZUFsbENoYXJ0cyhkZWZhdWx0TWV0cmljKQoKICAgICAgICAvLyBTZXQgdXAgZXZlbnQgbGlzdGVuZXIgZm9yIHZpZXcgbW9kZSBzd2l0Y2gKICAgICAgICBjb25zdCBzd2l0Y2hFbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3ZpZXctbW9kZS1zd2l0Y2gnKQogICAgICAgIHN3aXRjaEVsZW1lbnQuY2hlY2tlZCA9IGRlZmF1bHRNZXRyaWMgPT09ICdub2RlcycKCiAgICAgICAgc3dpdGNoRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCB0b2dnbGVWaWV3TW9kZSkKCiAgICAgICAgdXBkYXRlU3RyZWFtc1RhYmxlKGdyb3VwTWV0cmljcykKICAgICAgfQoKICAgICAgZnVuY3Rpb24gdXBkYXRlQWxsQ2hhcnRzKG1ldHJpYykgewogICAgICAgIGNvbnNvbGUubG9nKCdVcGRhdGluZyBhbGwgY2hhcnRzIHRvIGRpc3BsYXkgbWV0cmljOicsIG1ldHJpYykKICAgICAgICBjcmVhdGVXZWVrbHlDb21wbGV0aW9uQ2hhcnQoCiAgICAgICAgICAnd2Vla2x5Y29tcGxldGlvbmNoYXJ0JywKICAgICAgICAgIGdyb3VwTWV0cmljcywKICAgICAgICAgIG1ldHJpYwogICAgICAgICkKCiAgICAgICAgY3JlYXRlV2Vla2x5VmVsb2NpdHlDaGFydCgnd2Vla2x5dmVsb2NpdHljaGFydCcsIGdyb3VwTWV0cmljcywgbWV0cmljKQoKICAgICAgICBjcmVhdGVFZmZvcnREaXN0cmlidXRpb25DaGFydCgKICAgICAgICAgICdlZmZvcnRkaXN0cmlidXRpb25jaGFydCcsCiAgICAgICAgICBncm91cE1ldHJpY3MsCiAgICAgICAgICBtZXRyaWMKICAgICAgICApCiAgICAgIH0KCiAgICAgIC8vIEluaXRpYWxpemUgYWxsIGNoYXJ0cyB3aGVuIERPTSBpcyBsb2FkZWQKICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIGluaXRpYWxpemVEYXNoYm9hcmQpCiAgICA8L3NjcmlwdD4KICA8L2JvZHk+CjwvaHRtbD4K'

export default tpl
