export const tpl =
  'PCFkb2N0eXBlIGh0bWw+CjxodG1sIGxhbmc9ImVuIj4KICA8aGVhZD4KICAgIDxtZXRhIGNoYXJzZXQ9IlVURi04IiAvPgogICAgPG1ldGEgbmFtZT0idmlld3BvcnQiIGNvbnRlbnQ9IndpZHRoPWRldmljZS13aWR0aCwgaW5pdGlhbC1zY2FsZT0xLjAiIC8+CiAgICA8dGl0bGU+UHJvamVjdHMgQWN0aXZpdHk8L3RpdGxlPgogICAgPHNjcmlwdCBzcmM9Imh0dHBzOi8vY2RuLmpzZGVsaXZyLm5ldC9ucG0vZWNoYXJ0c0A1LjQuMy9kaXN0L2VjaGFydHMubWluLmpzIj48L3NjcmlwdD4KICAgIDxzY3JpcHQgc3JjPSJodHRwczovL2Nkbi5qc2RlbGl2ci5uZXQvbnBtL2RhdGUtZm5zQDQuMS4wL2Nkbi5taW4uanMiPjwvc2NyaXB0PgogICAgPHN0eWxlPgogICAgICBib2R5IHsKICAgICAgICBmb250LWZhbWlseTogQXJpYWwsIHNhbnMtc2VyaWY7CiAgICAgICAgbWFyZ2luOiAyMHB4OwogICAgICAgIGNvbG9yOiAjMzMzOwogICAgICB9CiAgICAgIC5jb250YWluZXIgewogICAgICAgIG1heC13aWR0aDogMTgwMHB4OwogICAgICAgIG1hcmdpbjogMCBhdXRvOwogICAgICB9CiAgICAgIC5kYXNoYm9hcmQtaGVhZGVyIHsKICAgICAgICBkaXNwbGF5OiBmbGV4OwogICAgICAgIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjsKICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyOwogICAgICAgIG1hcmdpbi1ib3R0b206IDEwcHg7CiAgICAgIH0KICAgICAgLmRhc2hib2FyZC10aXRsZSB7CiAgICAgICAgbWFyZ2luOiAwOwogICAgICB9CiAgICAgIC5yb3cgewogICAgICAgIGRpc3BsYXk6IGZsZXg7CiAgICAgICAgbWFyZ2luLWJvdHRvbTogMzBweDsKICAgICAgICBnYXA6IDIwcHg7CiAgICAgIH0KICAgICAgLmNoYXJ0LWNvbnRhaW5lciB7CiAgICAgICAgZmxleDogMTsKICAgICAgICBoZWlnaHQ6IDMwMHB4OwogICAgICAgIGJvcmRlcjogMXB4IHNvbGlkICNlYWVhZWE7CiAgICAgICAgYm9yZGVyLXJhZGl1czogNXB4OwogICAgICAgIGJveC1zaGFkb3c6IDAgMnB4IDhweCByZ2JhKDAsIDAsIDAsIDAuMSk7CiAgICAgIH0KICAgICAgdGFibGUgewogICAgICAgIHdpZHRoOiAxMDAlOwogICAgICAgIGJvcmRlci1jb2xsYXBzZTogY29sbGFwc2U7CiAgICAgICAgbWFyZ2luLXRvcDogMTBweDsKICAgICAgICBib3gtc2hhZG93OiAwIDJweCA4cHggcmdiYSgwLCAwLCAwLCAwLjEpOwogICAgICB9CiAgICAgIHRoLAogICAgICB0ZCB7CiAgICAgICAgcGFkZGluZzogMTJweCAxNXB4OwogICAgICAgIHRleHQtYWxpZ246IGxlZnQ7CiAgICAgICAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkICNkZGQ7CiAgICAgIH0KICAgICAgdGggewogICAgICAgIGJhY2tncm91bmQtY29sb3I6ICNmOGY4Zjg7CiAgICAgICAgZm9udC13ZWlnaHQ6IGJvbGQ7CiAgICAgIH0KICAgICAgdHI6aG92ZXIgewogICAgICAgIGJhY2tncm91bmQtY29sb3I6ICNmNWY1ZjU7CiAgICAgIH0KICAgICAgYSB7CiAgICAgICAgY29sb3I6ICMxYTczZTg7CiAgICAgICAgdGV4dC1kZWNvcmF0aW9uOiBub25lOwogICAgICB9CiAgICAgIGE6aG92ZXIgewogICAgICAgIHRleHQtZGVjb3JhdGlvbjogdW5kZXJsaW5lOwogICAgICB9CiAgICAgIC50YWJsZS1jb250YWluZXIgewogICAgICAgIG1hcmdpbi10b3A6IDIwcHg7CiAgICAgICAgYm9yZGVyOiAxcHggc29saWQgI2VhZWFlYTsKICAgICAgICBib3JkZXItcmFkaXVzOiA1cHg7CiAgICAgICAgcGFkZGluZzogMTVweDsKICAgICAgICBib3gtc2hhZG93OiAwIDJweCA4cHggcmdiYSgwLCAwLCAwLCAwLjEpOwogICAgICB9CiAgICAgIC50YWJsZS1mb290ZXIgewogICAgICAgIGRpc3BsYXk6IGZsZXg7CiAgICAgICAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuOwogICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7CiAgICAgICAgbWFyZ2luLXRvcDogMTBweDsKICAgICAgICBtYXJnaW4tYm90dG9tOiA1cHg7CiAgICAgIH0KICAgICAgLnRhYmxlLWhlYWRlciB7CiAgICAgICAgZGlzcGxheTogZmxleDsKICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47CiAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjsKICAgICAgICBtYXJnaW4tYm90dG9tOiAxMHB4OwogICAgICB9CiAgICAgIGgyLAogICAgICBoMyB7CiAgICAgICAgbWFyZ2luOiAwOwogICAgICAgIGNvbG9yOiAjNDQ0OwogICAgICB9CiAgICAgIC5zb3VyY2UtZGVzY3JpcHRpb24gewogICAgICAgIGZvbnQtc3R5bGU6IGl0YWxpYzsKICAgICAgICBjb2xvcjogIzY2NjsKICAgICAgfQogICAgICAuc291cmNlLWluZm8gewogICAgICAgIGZvbnQtc3R5bGU6IGl0YWxpYzsKICAgICAgICBmb250LXNpemU6IHNtYWxsZXI7CiAgICAgICAgY29sb3I6ICM2NjY7CiAgICAgIH0KICAgICAgLyogU3dpdGNoIGJ1dHRvbiBzdHlsZXMgKi8KICAgICAgLnN3aXRjaC1jb250YWluZXIgewogICAgICAgIGRpc3BsYXk6IGZsZXg7CiAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjsKICAgICAgfQogICAgICAuc3dpdGNoLWxhYmVsIHsKICAgICAgICBtYXJnaW46IDAgMTBweDsKICAgICAgICBmb250LXdlaWdodDogYm9sZDsKICAgICAgICBmb250LXNpemU6IDE0cHg7CiAgICAgIH0KICAgICAgLnN3aXRjaCB7CiAgICAgICAgcG9zaXRpb246IHJlbGF0aXZlOwogICAgICAgIGRpc3BsYXk6IGlubGluZS1ibG9jazsKICAgICAgICB3aWR0aDogNjBweDsKICAgICAgICBoZWlnaHQ6IDI4cHg7CiAgICAgIH0KICAgICAgLnN3aXRjaCBpbnB1dCB7CiAgICAgICAgb3BhY2l0eTogMDsKICAgICAgICB3aWR0aDogMDsKICAgICAgICBoZWlnaHQ6IDA7CiAgICAgIH0KICAgICAgLnNsaWRlciB7CiAgICAgICAgcG9zaXRpb246IGFic29sdXRlOwogICAgICAgIGN1cnNvcjogcG9pbnRlcjsKICAgICAgICB0b3A6IDA7CiAgICAgICAgbGVmdDogMDsKICAgICAgICByaWdodDogMDsKICAgICAgICBib3R0b206IDA7CiAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogI2NjYzsKICAgICAgICB0cmFuc2l0aW9uOiAwLjRzOwogICAgICAgIGJvcmRlci1yYWRpdXM6IDM0cHg7CiAgICAgIH0KICAgICAgLnNsaWRlcjpiZWZvcmUgewogICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICAgICAgICBjb250ZW50OiAnJzsKICAgICAgICBoZWlnaHQ6IDIwcHg7CiAgICAgICAgd2lkdGg6IDIwcHg7CiAgICAgICAgbGVmdDogNHB4OwogICAgICAgIGJvdHRvbTogNHB4OwogICAgICAgIGJhY2tncm91bmQtY29sb3I6IHdoaXRlOwogICAgICAgIHRyYW5zaXRpb246IDAuNHM7CiAgICAgICAgYm9yZGVyLXJhZGl1czogNTAlOwogICAgICB9CiAgICAgIGlucHV0OmNoZWNrZWQgKyAuc2xpZGVyIHsKICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjMjE5NmYzOwogICAgICB9CiAgICAgIGlucHV0OmZvY3VzICsgLnNsaWRlciB7CiAgICAgICAgYm94LXNoYWRvdzogMCAwIDFweCAjMjE5NmYzOwogICAgICB9CiAgICAgIGlucHV0OmNoZWNrZWQgKyAuc2xpZGVyOmJlZm9yZSB7CiAgICAgICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVYKDMycHgpOwogICAgICB9CiAgICAgIC52aWV3LW1vZGUgewogICAgICAgIG1hcmdpbi1sZWZ0OiA4cHg7CiAgICAgICAgZm9udC13ZWlnaHQ6IGJvbGQ7CiAgICAgICAgbWluLXdpZHRoOiA5MHB4OwogICAgICB9CiAgICA8L3N0eWxlPgogIDwvaGVhZD4KICA8Ym9keT4KICAgIDxhIGhyZWY9ImluZGV4Lmh0bWwiPvCflJk8L2E+CiAgICA8ZGl2IGNsYXNzPSJjb250YWluZXIiPgogICAgICA8ZGl2IGNsYXNzPSJkYXNoYm9hcmQtaGVhZGVyIj4KICAgICAgICA8aDIgaWQ9ImRhc2hib2FyZC10aXRsZSIgY2xhc3M9ImRhc2hib2FyZC10aXRsZSI+PC9oMj4KICAgICAgICA8ZGl2IGNsYXNzPSJzd2l0Y2gtY29udGFpbmVyIj4KICAgICAgICAgIDxzcGFuIGNsYXNzPSJzd2l0Y2gtbGFiZWwiPlN0b3J5IFBvaW50czwvc3Bhbj4KICAgICAgICAgIDxsYWJlbCBjbGFzcz0ic3dpdGNoIj4KICAgICAgICAgICAgPGlucHV0IHR5cGU9ImNoZWNrYm94IiBpZD0idmlldy1tb2RlLXN3aXRjaCIgLz4KICAgICAgICAgICAgPHNwYW4gY2xhc3M9InNsaWRlciI+PC9zcGFuPgogICAgICAgICAgPC9sYWJlbD4KICAgICAgICAgIDxzcGFuIGNsYXNzPSJzd2l0Y2gtbGFiZWwiPkNvdW50PC9zcGFuPgogICAgICAgIDwvZGl2PgogICAgICA8L2Rpdj4KICAgICAgPHAgY2xhc3M9InNvdXJjZS1kZXNjcmlwdGlvbiIgaWQ9ImRhc2hib2FyZC1kZXNjcmlwdGlvbiI+PC9wPgogICAgICA8cCBjbGFzcz0ic291cmNlLWluZm8iIGlkPSJkYXNoYm9hcmQtbWV0YWRhdGEiPjwvcD4KCiAgICAgIDxkaXYgY2xhc3M9InJvdyI+CiAgICAgICAgPGRpdiBjbGFzcz0iY2hhcnQtY29udGFpbmVyIiBpZD0id2Vla2x5Y29tcGxldGlvbmNoYXJ0Ij48L2Rpdj4KICAgICAgICA8ZGl2IGNsYXNzPSJjaGFydC1jb250YWluZXIiIGlkPSJ3ZWVrbHl2ZWxvY2l0eWNoYXJ0Ij48L2Rpdj4KICAgICAgICA8ZGl2IGNsYXNzPSJjaGFydC1jb250YWluZXIiIGlkPSJlZmZvcnRkaXN0cmlidXRpb25jaGFydCI+PC9kaXY+CiAgICAgIDwvZGl2PgoKICAgICAgPGRpdiBjbGFzcz0idGFibGUtY29udGFpbmVyIj4KICAgICAgICA8ZGl2IGNsYXNzPSJ0YWJsZS1oZWFkZXIiPgogICAgICAgICAgPGgzIGlkPSJ0YWJsZS10aXRsZSI+PC9oMz4KICAgICAgICAgIDxzcGFuIGlkPSJzZWxlY3RlZC1zb3VyY2UiCiAgICAgICAgICAgID5DbGljayBvbiBhbnkgY2hhcnQgYmFyIHRvIHNlZSBkZXRhaWxzPC9zcGFuCiAgICAgICAgICA+CiAgICAgICAgPC9kaXY+CiAgICAgICAgPHRhYmxlPgogICAgICAgICAgPHRoZWFkPgogICAgICAgICAgICA8dHI+CiAgICAgICAgICAgICAgPHRoPiM8L3RoPgogICAgICAgICAgICAgIDx0aD5UaXRsZTwvdGg+CiAgICAgICAgICAgICAgPHRoPlR5cGU8L3RoPgogICAgICAgICAgICAgIDx0aD5SZXBvPC90aD4KICAgICAgICAgICAgICA8dGg+TWlsZXN0b25lPC90aD4KICAgICAgICAgICAgICA8dGg+UG9pbnRzPC90aD4KICAgICAgICAgICAgPC90cj4KICAgICAgICAgIDwvdGhlYWQ+CiAgICAgICAgICA8dGJvZHkgaWQ9ImRldGFpbHMtdGFibGUiPgogICAgICAgICAgICA8dHI+CiAgICAgICAgICAgICAgPHRkIGNvbHNwYW49IjMiPk5vIGRhdGEgc2VsZWN0ZWQ8L3RkPgogICAgICAgICAgICA8L3RyPgogICAgICAgICAgPC90Ym9keT4KICAgICAgICA8L3RhYmxlPgogICAgICA8L2Rpdj4KCiAgICAgIDxwIGNsYXNzPSJzb3VyY2UtaW5mbyIgaWQ9ImRhc2hib2FyZC1wcm9qZWN0ZmlsdGVyIj48L3A+CgogICAgICA8ZGl2IGNsYXNzPSJ0YWJsZS1jb250YWluZXIiPgogICAgICAgIDxkaXYgY2xhc3M9InRhYmxlLWhlYWRlciI+CiAgICAgICAgICA8aDM+RGF0YSBTdHJlYW1zPC9oMz4KICAgICAgICA8L2Rpdj4KICAgICAgICA8dGFibGU+CiAgICAgICAgICA8dGhlYWQ+CiAgICAgICAgICAgIDx0cj4KICAgICAgICAgICAgICA8dGg+TmFtZTwvdGg+CiAgICAgICAgICAgICAgPHRoPkRlc2NyaXB0aW9uPC90aD4KICAgICAgICAgICAgICA8dGg+UXVlcnk8L3RoPgogICAgICAgICAgICA8L3RyPgogICAgICAgICAgPC90aGVhZD4KICAgICAgICAgIDx0Ym9keSBpZD0iZGV0YWlscy10YWJsZS1zdHJlYW0iPgogICAgICAgICAgICA8dHI+CiAgICAgICAgICAgICAgPHRkIGNvbHNwYW49IjMiPk5vIGRhdGEgc2VsZWN0ZWQ8L3RkPgogICAgICAgICAgICA8L3RyPgogICAgICAgICAgPC90Ym9keT4KICAgICAgICA8L3RhYmxlPgogICAgICAgIDxkaXYgY2xhc3M9InRhYmxlLWZvb3RlciI+CiAgICAgICAgICA8c3BhbgogICAgICAgICAgICA+PGkKICAgICAgICAgICAgICA+U3RyZWFtcyBhcmUgcXVlcmllcyBleGVjdXRlZCBhZ2FpbnN0IEFMTCBJc3N1ZXMgYW5kIFB1bGwgUmVxdWVzdHMKICAgICAgICAgICAgICAoUFIpIGF0dGFjaGVkIHRvIHRoZSBzZWxlY3RlZCBwcm9qZWN0LiA8YnIgLz4KICAgICAgICAgICAgICBUaGVpciBvcmRlciBtYXR0ZXJzLCBpZiBhIElzc3VlIG9yIFBSIGlzIHByZXNlbnQgaW4gdGhlIGZpcnN0CiAgICAgICAgICAgICAgc3RyZWFtLCBpdCB3aWxsIGJlIGlnbm9yZWQgb24gdGhlIGZvbGxvd2luZyBzdHJlYW1zLiBUaGlzIHByZXZlbnRzCiAgICAgICAgICAgICAgaXNzdWVzL1BScyBmcm9tIGJlaW5nIGNvdW50ZWQgbXVsdGlwbGUgdGltZXMuPC9pCiAgICAgICAgICAgID48L3NwYW4KICAgICAgICAgID4KICAgICAgICA8L2Rpdj4KICAgICAgPC9kaXY+CiAgICA8L2Rpdj4KCiAgICA8c2NyaXB0PgogICAgICBjb25zdCBiYXNlNjREZWNvZGVVbmljb2RlID0gKGJhc2U2NFN0cmluZykgPT4gewogICAgICAgIGNvbnN0IGJpbmFyeVN0cmluZyA9IHdpbmRvdy5hdG9iKGJhc2U2NFN0cmluZykKICAgICAgICBjb25zdCBieXRlcyA9IG5ldyBVaW50OEFycmF5KGJpbmFyeVN0cmluZy5sZW5ndGgpCgogICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYmluYXJ5U3RyaW5nLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICBieXRlc1tpXSA9IGJpbmFyeVN0cmluZy5jaGFyQ29kZUF0KGkpCiAgICAgICAgfQoKICAgICAgICByZXR1cm4gbmV3IFRleHREZWNvZGVyKCd1dGYtOCcpLmRlY29kZShieXRlcykKICAgICAgfQoKICAgICAgLy8gU2luZ2xlIEphdmFTY3JpcHQgZGF0YSBvYmplY3QgY29udGFpbmluZyBhbGwgb3VyIGRhdGEKICAgICAgY29uc3Qgc3JjRGF0YSA9IGJhc2U2NERlY29kZVVuaWNvZGUoJ1JFUExBQ0VfTUUnKQogICAgICBjb25zdCBncm91cE1ldHJpY3MgPSBKU09OLnBhcnNlKHNyY0RhdGEpCiAgICAgIGNvbnNvbGUubG9nKCdTb3VyY2UgZGF0YSBkZWNvZGVkJywgZ3JvdXBNZXRyaWNzKQoKICAgICAgLy8gQ29waWVkIHRvIHRoZSB3aW5kb3cgb2JqZWN0IHRvIGZhY2lsaXRhdGUgYnVpbGRpbmcgb2YgcXVlcmllcwogICAgICB3aW5kb3cuZGF0YU5vZGVzID0gZ3JvdXBNZXRyaWNzLm5vZGVzCgogICAgICBkb2N1bWVudC50aXRsZSA9IGdyb3VwTWV0cmljcy5uYW1lCgogICAgICAvLyBVcGRhdGUgdGhlIHRhYmxlIHdpdGggZGF0YSBjbGlja2VkIGluIHRoZSBjaGFydAogICAgICBmdW5jdGlvbiB1cGRhdGVUYWJsZSh7IHNyY0NoYXJ0LCBzZWxlY3Rpb24sIG5vZGVzIH0pIHsKICAgICAgICBjb25zb2xlLmxvZygnVXBkYXRpbmcgdGFibGUgd2l0aCBkYXRhIGNvbWluZyBmcm9tOicsIHNyY0NoYXJ0KQoKICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndGFibGUtdGl0bGUnKS50ZXh0Q29udGVudCA9CiAgICAgICAgICBgTm9kZXMgZnJvbSAke3NyY0NoYXJ0fWAKICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2VsZWN0ZWQtc291cmNlJykudGV4dENvbnRlbnQgPQogICAgICAgICAgYFNlbGVjdGlvbjogJHtzZWxlY3Rpb259YAoKICAgICAgICBjb25zdCB0YWJsZUJvZHkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGV0YWlscy10YWJsZScpCiAgICAgICAgdGFibGVCb2R5LmlubmVySFRNTCA9ICcnCgogICAgICAgIG5vZGVzLmZvckVhY2goKG5vZGUpID0+IHsKICAgICAgICAgIGNvbnN0IHJvdyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RyJykKICAgICAgICAgIHJvdy5pbm5lckhUTUwgPSBgCiAgICAgICAgICAgICAgICA8dGQ+JHtub2RlLm51bWJlcn08L3RkPgogICAgICAgICAgICAgICAgPHRkPjxhIGhyZWY9IiR7bm9kZS51cmx9IiB0YXJnZXQ9Il9ibGFuayI+JHtub2RlLnRpdGxlfTwvYT48L3RkPgogICAgICAgICAgICAgICAgPHRkPiR7bm9kZS50eXBlfTwvdGQ+CiAgICAgICAgICAgICAgICA8dGQ+PGEgaHJlZj0iJHtub2RlLnJlcG9zaXRvcnkudXJsfSIgdGFyZ2V0PSJfYmxhbmsiPiR7bm9kZS5yZXBvc2l0b3J5Lm93bmVyLmxvZ2lufS8ke25vZGUucmVwb3NpdG9yeS5uYW1lfTwvYT48L3RkPgogICAgICAgICAgICAgICAgPHRkPiR7bm9kZS5taWxlc3RvbmU/LnRpdGxlID8gbm9kZS5taWxlc3RvbmU/LnRpdGxlIDogJyd9PC90ZD4KICAgICAgICAgICAgICAgIDx0ZD4ke25vZGUucG9pbnRzfTwvdGQ+CiAgICAgICAgICAgICAgYAogICAgICAgICAgdGFibGVCb2R5LmFwcGVuZENoaWxkKHJvdykKICAgICAgICB9KQogICAgICB9CgogICAgICBmdW5jdGlvbiB1cGRhdGVTdHJlYW1zVGFibGUoc3JjRGF0YSkgewogICAgICAgIGNvbnN0IHRhYmxlQm9keSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkZXRhaWxzLXRhYmxlLXN0cmVhbScpCiAgICAgICAgdGFibGVCb2R5LmlubmVySFRNTCA9ICcnCgogICAgICAgIHNyY0RhdGEuc3RyZWFtcy5mb3JFYWNoKChzdHJlYW0pID0+IHsKICAgICAgICAgIGNvbnN0IHJvdyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RyJykKICAgICAgICAgIHJvdy5pbm5lckhUTUwgPSBgCiAgICAgICAgICAgICAgICA8dGQ+JHtzdHJlYW0ubmFtZX08L3RkPgogICAgICAgICAgICAgICAgPHRkPiR7c3RyZWFtLmRlc2NyaXB0aW9ufTwvdGQ+CiAgICAgICAgICAgICAgICA8dGQ+JHtKU09OLnN0cmluZ2lmeShzdHJlYW0ucXVlcnkpfTwvdGQ+CiAgICAgICAgICAgICAgYAogICAgICAgICAgdGFibGVCb2R5LmFwcGVuZENoaWxkKHJvdykKICAgICAgICB9KQogICAgICB9CgogICAgICBjb25zdCB0b29sdGlwRm9ybWF0dGVyID0gKHBhcmFtcykgPT4gewogICAgICAgIC8vIExpbWl0IHRvb2x0aXAgdG8gdG9wIDEwIHZhbHVlcyBhdCB0aGUgcG9pbnQKICAgICAgICBjb25zdCBzb3J0ZWRQYXJhbXMgPSBbLi4ucGFyYW1zXS5zb3J0KChhLCBiKSA9PiBiLnZhbHVlIC0gYS52YWx1ZSkKICAgICAgICBjb25zdCBsaW1pdGVkID0gc29ydGVkUGFyYW1zLnNsaWNlKDAsIDEwKQoKICAgICAgICBsZXQgcmVzdWx0ID0gYCR7bGltaXRlZFswXS5heGlzVmFsdWV9PGJyPmAKICAgICAgICBsaW1pdGVkLmZvckVhY2goKHBhcmFtKSA9PiB7CiAgICAgICAgICByZXN1bHQgKz0gYCR7cGFyYW0ubWFya2VyfSAke3BhcmFtLnNlcmllc05hbWV9OiAke3BhcmFtLnZhbHVlLnRvRml4ZWQoMil9PGJyPmAKICAgICAgICB9KQoKICAgICAgICBpZiAocGFyYW1zLmxlbmd0aCA+IDEwKSB7CiAgICAgICAgICByZXN1bHQgKz0gYDxpPi4uLiBhbmQgJHtwYXJhbXMubGVuZ3RoIC0gMTB9IG1vcmU8L2k+YAogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIHJlc3VsdAogICAgICB9CgogICAgICBjb25zdCBnZXRMZWdlbmQgPSAoc3RyZWFtc0xlbmd0aCkgPT4gewogICAgICAgIGxldCBsZWdlbmQgPSB7CiAgICAgICAgICB0b3A6ICd0b3AnLAogICAgICAgICAgbGVmdDogJ2NlbnRlcicsCiAgICAgICAgICB0b3A6IDMwCiAgICAgICAgfQogICAgICAgIGlmIChzdHJlYW1zTGVuZ3RoID4gOCkgewogICAgICAgICAgbGVnZW5kLnR5cGUgPSAnc2Nyb2xsJwogICAgICAgIH0KICAgICAgICByZXR1cm4gbGVnZW5kCiAgICAgIH0KICAgICAgZnVuY3Rpb24gY3JlYXRlV2Vla2x5Q29tcGxldGlvbkNoYXJ0KGVsZW1lbnRJZCwgZGF0YSwgbWV0cmljKSB7CiAgICAgICAgY29uc3QgY2hhcnREb20gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChlbGVtZW50SWQpCiAgICAgICAgY29uc3QgbXlDaGFydCA9IGVjaGFydHMuaW5pdChjaGFydERvbSkKCiAgICAgICAgY29uc3QgdmlzaWJsZUNvdW50ID0gMjAKICAgICAgICBjb25zdCBzdGFydFBlcmNlbnRhZ2UgPQogICAgICAgICAgKChkYXRhLndlZWtzLmxlbmd0aCAtIHZpc2libGVDb3VudCkgLyBkYXRhLndlZWtzLmxlbmd0aCkgKiAxMDAKICAgICAgICBjb25zdCBlbmRQZXJjZW50YWdlID0gMTAwCgogICAgICAgIGNvbnN0IGNoYXJ0VGl0bGUgPSAnV2Vla2x5IENvbXBsZXRpb24nCgogICAgICAgIGNvbnN0IGhpZ2hlc3RWYWx1ZSA9IE1hdGgubWF4KAogICAgICAgICAgLi4uZGF0YS53ZWVrcy5tYXAoKHdlZWspID0+IHdlZWsubWV0cmljcy5ub2Rlcy5jb3VudCkKICAgICAgICApCiAgICAgICAgY29uc3Qgcm91bmRVcEhpZ2hlc3QgPSBNYXRoLmNlaWwoaGlnaGVzdFZhbHVlIC8gMTApICogMTAKCiAgICAgICAgY29uc3Qgb3B0aW9uID0gewogICAgICAgICAgdGl0bGU6IHsKICAgICAgICAgICAgdGV4dDogY2hhcnRUaXRsZSwKICAgICAgICAgICAgcG9zaXRpb246ICd0b3AnLAogICAgICAgICAgICBsZWZ0OiAnY2VudGVyJywKICAgICAgICAgICAgdGV4dFN0eWxlOiB7CiAgICAgICAgICAgICAgZm9udFNpemU6IDE0CiAgICAgICAgICAgIH0KICAgICAgICAgIH0sCiAgICAgICAgICBsZWdlbmQ6IGdldExlZ2VuZChkYXRhLnN0cmVhbXMubGVuZ3RoKSwKICAgICAgICAgIHRvb2x0aXA6IHsKICAgICAgICAgICAgdHJpZ2dlcjogJ2F4aXMnLAogICAgICAgICAgICBheGlzUG9pbnRlcjogewogICAgICAgICAgICAgIHR5cGU6ICdzaGFkb3cnCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGZvcm1hdHRlcjogZnVuY3Rpb24gKHBhcmFtcykgewogICAgICAgICAgICAgIHJldHVybiB0b29sdGlwRm9ybWF0dGVyKHBhcmFtcykKICAgICAgICAgICAgfQogICAgICAgICAgfSwKICAgICAgICAgIGdyaWQ6IHsKICAgICAgICAgICAgbGVmdDogJzMlJywKICAgICAgICAgICAgcmlnaHQ6ICc0JScsCiAgICAgICAgICAgIGJvdHRvbTogJzMlJywKICAgICAgICAgICAgdG9wOiAnMzAlJywKICAgICAgICAgICAgY29udGFpbkxhYmVsOiB0cnVlCiAgICAgICAgICB9LAogICAgICAgICAgZGF0YVpvb206IFsKICAgICAgICAgICAgewogICAgICAgICAgICAgIHR5cGU6ICdpbnNpZGUnLCAvLyBBbGxvd3Mgc2Nyb2xsaW5nIHdpdGggbW91c2Ugb3IgdG91Y2ggZ2VzdHVyZXMKICAgICAgICAgICAgICB4QXhpc0luZGV4OiAwLAogICAgICAgICAgICAgIHN0YXJ0OiBzdGFydFBlcmNlbnRhZ2UsCiAgICAgICAgICAgICAgZW5kOiBlbmRQZXJjZW50YWdlCiAgICAgICAgICAgIH0KICAgICAgICAgIF0sCiAgICAgICAgICB4QXhpczogewogICAgICAgICAgICB0eXBlOiAnY2F0ZWdvcnknLAogICAgICAgICAgICBheGlzTGFiZWw6IHsgaW50ZXJ2YWw6IDAsIHJvdGF0ZTogMzAgfSwKICAgICAgICAgICAgZGF0YTogZGF0YS53ZWVrcy5tYXAoKHZhbHVlLCBpbmRleCkgPT4KICAgICAgICAgICAgICBkYXRlRm5zLmZvcm1hdChuZXcgRGF0ZSh2YWx1ZS5maXJzdERheSksICdMTEwgZG8nKQogICAgICAgICAgICApCiAgICAgICAgICB9LAogICAgICAgICAgeUF4aXM6IHsKICAgICAgICAgICAgdHlwZTogJ3ZhbHVlJywKICAgICAgICAgICAgbWluOiAwLAogICAgICAgICAgICBtYXg6IHJvdW5kVXBIaWdoZXN0CiAgICAgICAgICB9LAogICAgICAgICAgc2VyaWVzOiBbCiAgICAgICAgICAgIC4uLmRhdGEuc3RyZWFtcy5tYXAoKHN0cmVhbSwgaW5kZXgpID0+IHsKICAgICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgICAgbmFtZTogc3RyZWFtLm5hbWUsCiAgICAgICAgICAgICAgICB0eXBlOiAnYmFyJywKICAgICAgICAgICAgICAgIHN0YWNrOiAnYWQnLAogICAgICAgICAgICAgICAgZGF0YTogc3RyZWFtLndlZWtzLm1hcCgKICAgICAgICAgICAgICAgICAgKHZhbHVlLCBpbmRleCkgPT4gdmFsdWUubWV0cmljc1ttZXRyaWNdLmNvdW50CiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KSwKICAgICAgICAgICAgewogICAgICAgICAgICAgIG5hbWU6ICdUb3RhbCcsCiAgICAgICAgICAgICAgdHlwZTogJ2xpbmUnLAogICAgICAgICAgICAgIGRhdGE6IGRhdGEud2Vla3MubWFwKCh3ZWVrLCBpbmRleCkgPT4gd2Vlay5tZXRyaWNzW21ldHJpY10uY291bnQpCiAgICAgICAgICAgIH0KICAgICAgICAgIF0KICAgICAgICB9CgogICAgICAgIC8vIEFwcGx5IG9wdGlvbnMgdG8gY2hhcnQKICAgICAgICBteUNoYXJ0LnNldE9wdGlvbihvcHRpb24pCgogICAgICAgIC8vIEFkZCBjbGljayBldmVudCBmb3IgaW50ZXJhY3Rpdml0eQogICAgICAgIG15Q2hhcnQub24oJ2NsaWNrJywgZnVuY3Rpb24gKHBhcmFtcykgewogICAgICAgICAgY29uc3Qgc3RyZWFtTmFtZSA9IHBhcmFtcy5zZXJpZXNOYW1lCiAgICAgICAgICBjb25zdCBzdHJlYW1JbmRleCA9IHBhcmFtcy5kYXRhSW5kZXgKICAgICAgICAgIGNvbnN0IHN0cmVhbSA9IGRhdGEuc3RyZWFtcy5maW5kKAogICAgICAgICAgICAoc3RyZWFtKSA9PiBzdHJlYW0ubmFtZSA9PT0gc3RyZWFtTmFtZQogICAgICAgICAgKQogICAgICAgICAgaWYgKHN0cmVhbSAmJiBzdHJlYW0ud2Vla3Nbc3RyZWFtSW5kZXhdKSB7CiAgICAgICAgICAgIHVwZGF0ZVRhYmxlKHsKICAgICAgICAgICAgICBzcmNDaGFydDogY2hhcnRUaXRsZSwKICAgICAgICAgICAgICBzZWxlY3Rpb246IGAke3N0cmVhbU5hbWV9IG9uICR7ZGF0ZUZucy5mb3JtYXQobmV3IERhdGUoc3RyZWFtLndlZWtzW3N0cmVhbUluZGV4XS5maXJzdERheSksICdMTEwgZG8nKX0gKCR7c3RyZWFtLndlZWtzW3N0cmVhbUluZGV4XS5ub2Rlcy5sZW5ndGh9IG5vZGVzKWAsCiAgICAgICAgICAgICAgbm9kZXM6IHN0cmVhbS53ZWVrc1tzdHJlYW1JbmRleF0ubm9kZXMKICAgICAgICAgICAgfSkKICAgICAgICAgIH0KICAgICAgICB9KQoKICAgICAgICAvLyBNYWtlIGNoYXJ0IHJlc3BvbnNpdmUKICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgZnVuY3Rpb24gKCkgewogICAgICAgICAgbXlDaGFydC5yZXNpemUoKQogICAgICAgIH0pCgogICAgICAgIHJldHVybiBteUNoYXJ0CiAgICAgIH0KCiAgICAgIGZ1bmN0aW9uIGNyZWF0ZVdlZWtseVZlbG9jaXR5Q2hhcnQoZWxlbWVudElkLCBkYXRhLCBtZXRyaWMpIHsKICAgICAgICBjb25zdCBjaGFydERvbSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGVsZW1lbnRJZCkKICAgICAgICBjb25zdCBteUNoYXJ0ID0gZWNoYXJ0cy5pbml0KGNoYXJ0RG9tKQoKICAgICAgICBjb25zdCB2aXNpYmxlQ291bnQgPSAyMAogICAgICAgIGNvbnN0IHN0YXJ0UGVyY2VudGFnZSA9CiAgICAgICAgICAoKGRhdGEud2Vla3MubGVuZ3RoIC0gdmlzaWJsZUNvdW50KSAvIGRhdGEud2Vla3MubGVuZ3RoKSAqIDEwMAogICAgICAgIGNvbnN0IGVuZFBlcmNlbnRhZ2UgPSAxMDAKCiAgICAgICAgY29uc3QgY2hhcnRUaXRsZSA9ICdXZWVrbHkgVmVsb2NpdHknCgogICAgICAgIGNvbnN0IGhpZ2hlc3RWYWx1ZSA9IE1hdGgubWF4KAogICAgICAgICAgLi4uZGF0YS53ZWVrcy5tYXAoKHdlZWspID0+IHdlZWsubWV0cmljcy5ub2Rlcy52ZWxvY2l0eSkKICAgICAgICApCiAgICAgICAgY29uc3Qgcm91bmRVcEhpZ2hlc3QgPSBNYXRoLmNlaWwoaGlnaGVzdFZhbHVlIC8gMTApICogMTAKCiAgICAgICAgY29uc3Qgb3B0aW9uID0gewogICAgICAgICAgdGl0bGU6IHsKICAgICAgICAgICAgdGV4dDogY2hhcnRUaXRsZSwKICAgICAgICAgICAgcG9zaXRpb246ICd0b3AnLAogICAgICAgICAgICBsZWZ0OiAnY2VudGVyJywKICAgICAgICAgICAgdGV4dFN0eWxlOiB7CiAgICAgICAgICAgICAgZm9udFNpemU6IDE0CiAgICAgICAgICAgIH0KICAgICAgICAgIH0sCiAgICAgICAgICBsZWdlbmQ6IGdldExlZ2VuZChkYXRhLnN0cmVhbXMubGVuZ3RoKSwKICAgICAgICAgIHRvb2x0aXA6IHsKICAgICAgICAgICAgdHJpZ2dlcjogJ2F4aXMnLAogICAgICAgICAgICBheGlzUG9pbnRlcjogewogICAgICAgICAgICAgIHR5cGU6ICdzaGFkb3cnCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGZvcm1hdHRlcjogZnVuY3Rpb24gKHBhcmFtcykgewogICAgICAgICAgICAgIHJldHVybiB0b29sdGlwRm9ybWF0dGVyKHBhcmFtcykKICAgICAgICAgICAgfQogICAgICAgICAgfSwKICAgICAgICAgIGdyaWQ6IHsKICAgICAgICAgICAgbGVmdDogJzMlJywKICAgICAgICAgICAgcmlnaHQ6ICc0JScsCiAgICAgICAgICAgIGJvdHRvbTogJzMlJywKICAgICAgICAgICAgdG9wOiAnMzAlJywKICAgICAgICAgICAgY29udGFpbkxhYmVsOiB0cnVlCiAgICAgICAgICB9LAogICAgICAgICAgZGF0YVpvb206IFsKICAgICAgICAgICAgewogICAgICAgICAgICAgIHR5cGU6ICdpbnNpZGUnLCAvLyBBbGxvd3Mgc2Nyb2xsaW5nIHdpdGggbW91c2Ugb3IgdG91Y2ggZ2VzdHVyZXMKICAgICAgICAgICAgICB4QXhpc0luZGV4OiAwLAogICAgICAgICAgICAgIHN0YXJ0OiBzdGFydFBlcmNlbnRhZ2UsCiAgICAgICAgICAgICAgZW5kOiBlbmRQZXJjZW50YWdlCiAgICAgICAgICAgIH0KICAgICAgICAgIF0sCiAgICAgICAgICB4QXhpczogewogICAgICAgICAgICB0eXBlOiAnY2F0ZWdvcnknLAogICAgICAgICAgICBheGlzTGFiZWw6IHsgaW50ZXJ2YWw6IDAsIHJvdGF0ZTogMzAgfSwKICAgICAgICAgICAgZGF0YTogZGF0YS53ZWVrcy5tYXAoKHZhbHVlLCBpbmRleCkgPT4KICAgICAgICAgICAgICBkYXRlRm5zLmZvcm1hdChuZXcgRGF0ZSh2YWx1ZS5maXJzdERheSksICdMTEwgZG8nKQogICAgICAgICAgICApCiAgICAgICAgICB9LAogICAgICAgICAgeUF4aXM6IHsKICAgICAgICAgICAgdHlwZTogJ3ZhbHVlJywKICAgICAgICAgICAgbWluOiAwLAogICAgICAgICAgICBtYXg6IHJvdW5kVXBIaWdoZXN0CiAgICAgICAgICB9LAogICAgICAgICAgc2VyaWVzOiBbCiAgICAgICAgICAgIC4uLmRhdGEuc3RyZWFtcy5tYXAoKHN0cmVhbSwgaW5kZXgpID0+IHsKICAgICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgICAgbmFtZTogc3RyZWFtLm5hbWUsCiAgICAgICAgICAgICAgICB0eXBlOiAnbGluZScsCiAgICAgICAgICAgICAgICBkYXRhOiBzdHJlYW0ud2Vla3MubWFwKAogICAgICAgICAgICAgICAgICAodmFsdWUsIGluZGV4KSA9PiB2YWx1ZS5tZXRyaWNzW21ldHJpY10udmVsb2NpdHkKICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pLAogICAgICAgICAgICB7CiAgICAgICAgICAgICAgbmFtZTogJ1RvdGFsJywKICAgICAgICAgICAgICB0eXBlOiAnbGluZScsCiAgICAgICAgICAgICAgZGF0YTogZGF0YS53ZWVrcy5tYXAoCiAgICAgICAgICAgICAgICAod2VlaywgaW5kZXgpID0+IHdlZWsubWV0cmljc1ttZXRyaWNdLnZlbG9jaXR5CiAgICAgICAgICAgICAgKQogICAgICAgICAgICB9CiAgICAgICAgICBdCiAgICAgICAgfQoKICAgICAgICAvLyBBcHBseSBvcHRpb25zIHRvIGNoYXJ0CiAgICAgICAgbXlDaGFydC5zZXRPcHRpb24ob3B0aW9uKQoKICAgICAgICAvLyBNYWtlIGNoYXJ0IHJlc3BvbnNpdmUKICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgZnVuY3Rpb24gKCkgewogICAgICAgICAgbXlDaGFydC5yZXNpemUoKQogICAgICAgIH0pCgogICAgICAgIHJldHVybiBteUNoYXJ0CiAgICAgIH0KCiAgICAgIGZ1bmN0aW9uIGNyZWF0ZUVmZm9ydERpc3RyaWJ1dGlvbkNoYXJ0KGVsZW1lbnRJZCwgZGF0YSwgbWV0cmljKSB7CiAgICAgICAgY29uc3QgY2hhcnREb20gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChlbGVtZW50SWQpCiAgICAgICAgY29uc3QgbXlDaGFydCA9IGVjaGFydHMuaW5pdChjaGFydERvbSkKCiAgICAgICAgY29uc3QgdmlzaWJsZUNvdW50ID0gMjAKICAgICAgICBjb25zdCBzdGFydFBlcmNlbnRhZ2UgPQogICAgICAgICAgKChkYXRhLndlZWtzLmxlbmd0aCAtIHZpc2libGVDb3VudCkgLyBkYXRhLndlZWtzLmxlbmd0aCkgKiAxMDAKICAgICAgICBjb25zdCBlbmRQZXJjZW50YWdlID0gMTAwCgogICAgICAgIGNvbnN0IGNoYXJ0VGl0bGUgPSAnRWZmb3J0IERpc3RyaWJ1dGlvbiAoJSknCgogICAgICAgIGNvbnN0IG9wdGlvbiA9IHsKICAgICAgICAgIHRpdGxlOiB7CiAgICAgICAgICAgIHRleHQ6IGNoYXJ0VGl0bGUsCiAgICAgICAgICAgIHBvc2l0aW9uOiAndG9wJywKICAgICAgICAgICAgbGVmdDogJ2NlbnRlcicsCiAgICAgICAgICAgIHRleHRTdHlsZTogewogICAgICAgICAgICAgIGZvbnRTaXplOiAxNAogICAgICAgICAgICB9CiAgICAgICAgICB9LAogICAgICAgICAgbGVnZW5kOiBnZXRMZWdlbmQoZGF0YS5zdHJlYW1zLmxlbmd0aCksCiAgICAgICAgICB0b29sdGlwOiB7CiAgICAgICAgICAgIHRyaWdnZXI6ICdheGlzJywKICAgICAgICAgICAgYXhpc1BvaW50ZXI6IHsKICAgICAgICAgICAgICB0eXBlOiAnc2hhZG93JwogICAgICAgICAgICB9LAogICAgICAgICAgICBmb3JtYXR0ZXI6IGZ1bmN0aW9uIChwYXJhbXMpIHsKICAgICAgICAgICAgICByZXR1cm4gdG9vbHRpcEZvcm1hdHRlcihwYXJhbXMpCiAgICAgICAgICAgIH0KICAgICAgICAgIH0sCiAgICAgICAgICBncmlkOiB7CiAgICAgICAgICAgIGxlZnQ6ICczJScsCiAgICAgICAgICAgIHJpZ2h0OiAnNCUnLAogICAgICAgICAgICBib3R0b206ICczJScsCiAgICAgICAgICAgIHRvcDogJzMwJScsCiAgICAgICAgICAgIGNvbnRhaW5MYWJlbDogdHJ1ZQogICAgICAgICAgfSwKICAgICAgICAgIGRhdGFab29tOiBbCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICB0eXBlOiAnaW5zaWRlJywgLy8gQWxsb3dzIHNjcm9sbGluZyB3aXRoIG1vdXNlIG9yIHRvdWNoIGdlc3R1cmVzCiAgICAgICAgICAgICAgeEF4aXNJbmRleDogMCwKICAgICAgICAgICAgICBzdGFydDogc3RhcnRQZXJjZW50YWdlLAogICAgICAgICAgICAgIGVuZDogZW5kUGVyY2VudGFnZQogICAgICAgICAgICB9CiAgICAgICAgICBdLAogICAgICAgICAgeEF4aXM6IHsKICAgICAgICAgICAgdHlwZTogJ2NhdGVnb3J5JywKICAgICAgICAgICAgYXhpc0xhYmVsOiB7IGludGVydmFsOiAwLCByb3RhdGU6IDMwIH0sCiAgICAgICAgICAgIGRhdGE6IGRhdGEud2Vla3MubWFwKCh2YWx1ZSwgaW5kZXgpID0+CiAgICAgICAgICAgICAgZGF0ZUZucy5mb3JtYXQobmV3IERhdGUodmFsdWUuZmlyc3REYXkpLCAnTExMIGRvJykKICAgICAgICAgICAgKQogICAgICAgICAgfSwKICAgICAgICAgIHlBeGlzOiB7CiAgICAgICAgICAgIHR5cGU6ICd2YWx1ZScsCiAgICAgICAgICAgIG1pbjogMCwKICAgICAgICAgICAgbWF4OiAxMDAKICAgICAgICAgIH0sCiAgICAgICAgICBzZXJpZXM6IFsKICAgICAgICAgICAgLi4uZGF0YS5zdHJlYW1zLm1hcCgoc3RyZWFtLCBpbmRleCkgPT4gewogICAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgICBuYW1lOiBzdHJlYW0ubmFtZSwKICAgICAgICAgICAgICAgIHR5cGU6ICdiYXInLAogICAgICAgICAgICAgICAgc3RhY2s6ICdhZCcsCiAgICAgICAgICAgICAgICBkYXRhOiBzdHJlYW0ud2Vla3MubWFwKAogICAgICAgICAgICAgICAgICAodmFsdWUsIGluZGV4KSA9PiB2YWx1ZS5tZXRyaWNzW21ldHJpY10uZGlzdHJpYnV0aW9uCiAgICAgICAgICAgICAgICApLAogICAgICAgICAgICAgICAgYmFyV2lkdGg6ICcxMDAlJywgLy8gRW5zdXJlcyBiYXJzIGZpbGwgdGhlaXIgYWxsb2NhdGVkIHNwYWNlCiAgICAgICAgICAgICAgICBiYXJHYXA6ICcwJScsIC8vIFJlbW92ZXMgc3BhY2luZyBiZXR3ZWVuIHNlcmllcyAoaWYgbXVsdGlwbGUpCiAgICAgICAgICAgICAgICBiYXJDYXRlZ29yeUdhcDogJzAlJyAvLyBSZW1vdmVzIHNwYWNpbmcgYmV0d2VlbiBjYXRlZ29yaWVzCiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KQogICAgICAgICAgXQogICAgICAgIH0KCiAgICAgICAgLy8gQXBwbHkgb3B0aW9ucyB0byBjaGFydAogICAgICAgIG15Q2hhcnQuc2V0T3B0aW9uKG9wdGlvbikKCiAgICAgICAgLy8gQWRkIGNsaWNrIGV2ZW50IGZvciBpbnRlcmFjdGl2aXR5CiAgICAgICAgbXlDaGFydC5vbignY2xpY2snLCBmdW5jdGlvbiAocGFyYW1zKSB7CiAgICAgICAgICBjb25zdCBzdHJlYW1OYW1lID0gcGFyYW1zLnNlcmllc05hbWUKICAgICAgICAgIGNvbnN0IHN0cmVhbUluZGV4ID0gcGFyYW1zLmRhdGFJbmRleAogICAgICAgICAgY29uc3Qgc3RyZWFtID0gZGF0YS5zdHJlYW1zLmZpbmQoCiAgICAgICAgICAgIChzdHJlYW0pID0+IHN0cmVhbS5uYW1lID09PSBzdHJlYW1OYW1lCiAgICAgICAgICApCiAgICAgICAgICBpZiAoc3RyZWFtICYmIHN0cmVhbS53ZWVrc1tzdHJlYW1JbmRleF0pIHsKICAgICAgICAgICAgdXBkYXRlVGFibGUoewogICAgICAgICAgICAgIHNyY0NoYXJ0OiBjaGFydFRpdGxlLAogICAgICAgICAgICAgIHNlbGVjdGlvbjogYCR7c3RyZWFtTmFtZX0gb24gJHtkYXRlRm5zLmZvcm1hdChuZXcgRGF0ZShzdHJlYW0ud2Vla3Nbc3RyZWFtSW5kZXhdLmZpcnN0RGF5KSwgJ0xMTCBkbycpfSAoJHtzdHJlYW0ud2Vla3Nbc3RyZWFtSW5kZXhdLm5vZGVzLmxlbmd0aH0gbm9kZXMpYCwKICAgICAgICAgICAgICBub2Rlczogc3RyZWFtLndlZWtzW3N0cmVhbUluZGV4XS5ub2RlcwogICAgICAgICAgICB9KQogICAgICAgICAgfQogICAgICAgIH0pCgogICAgICAgIC8vIE1ha2UgY2hhcnQgcmVzcG9uc2l2ZQogICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBteUNoYXJ0LnJlc2l6ZSgpCiAgICAgICAgfSkKCiAgICAgICAgcmV0dXJuIG15Q2hhcnQKICAgICAgfQoKICAgICAgZnVuY3Rpb24gdG9nZ2xlVmlld01vZGUoKSB7CiAgICAgICAgY29uc3Qgc3dpdGNoRWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd2aWV3LW1vZGUtc3dpdGNoJykKCiAgICAgICAgdXBkYXRlQWxsQ2hhcnRzKHN3aXRjaEVsZW1lbnQuY2hlY2tlZCA/ICdub2RlcycgOiAncG9pbnRzJykKICAgICAgfQoKICAgICAgY29uc3QgZmlsdGVyZWREYXRhc2V0ID0gKGdyb3VwTWV0cmljcykgPT4gewogICAgICAgIGlmIChncm91cE1ldHJpY3MucXVlcnkgPT09IHVuZGVmaW5lZCkgewogICAgICAgICAgcmV0dXJuICcnCiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHJldHVybiBgT3ZlcmFsbCBwcm9qZWN0IGRhdGEgZmlsdGVyZWQ6ICR7SlNPTi5zdHJpbmdpZnkoZ3JvdXBNZXRyaWNzLnF1ZXJ5KX0gIDxiciAvPmAKICAgICAgICB9CiAgICAgIH0KCiAgICAgIC8vIEZ1bmN0aW9uIHRvIGluaXRpYWxpemUgdGhlIGRhc2hib2FyZCBtZXRhZGF0YQogICAgICBmdW5jdGlvbiBpbml0aWFsaXplRGFzaGJvYXJkKCkgewogICAgICAgIC8vIFNldCBkYXNoYm9hcmQgdGl0bGUgYW5kIG1ldGFkYXRhIGZyb20gdGhlIGRhdGEgb2JqZWN0CiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Rhc2hib2FyZC10aXRsZScpLnRleHRDb250ZW50ID0KICAgICAgICAgIGdyb3VwTWV0cmljcy5uYW1lCiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Rhc2hib2FyZC1kZXNjcmlwdGlvbicpLnRleHRDb250ZW50ID0KICAgICAgICAgIGdyb3VwTWV0cmljcy5kZXNjcmlwdGlvbgoKICAgICAgICBpZiAoZ3JvdXBNZXRyaWNzLnF1ZXJ5ID09PSB1bmRlZmluZWQpIHsKICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkYXNoYm9hcmQtcHJvamVjdGZpbHRlcicpLnRleHRDb250ZW50ID0gJycKICAgICAgICB9IGVsc2UgewogICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Rhc2hib2FyZC1wcm9qZWN0ZmlsdGVyJykudGV4dENvbnRlbnQgPQogICAgICAgICAgICBgT3ZlcmFsbCBwcm9qZWN0IGRhdGEgZmlsdGVyZWQ6ICR7SlNPTi5zdHJpbmdpZnkoZ3JvdXBNZXRyaWNzLnF1ZXJ5KX1gCiAgICAgICAgfQoKICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGFzaGJvYXJkLW1ldGFkYXRhJykudGV4dENvbnRlbnQgPQogICAgICAgICAgYExhc3QgdXBkYXRlZDogJHtncm91cE1ldHJpY3MudXBkYXRlZEF0fWAKCiAgICAgICAgY29uc3QgZGVmYXVsdE1ldHJpYyA9CiAgICAgICAgICBncm91cE1ldHJpY3MuZGVmYXVsdE1ldHJpYyAhPT0gdW5kZWZpbmVkCiAgICAgICAgICAgID8gZ3JvdXBNZXRyaWNzLmRlZmF1bHRNZXRyaWMKICAgICAgICAgICAgOiAncG9pbnRzJwoKICAgICAgICB1cGRhdGVBbGxDaGFydHMoZGVmYXVsdE1ldHJpYykKCiAgICAgICAgLy8gU2V0IHVwIGV2ZW50IGxpc3RlbmVyIGZvciB2aWV3IG1vZGUgc3dpdGNoCiAgICAgICAgY29uc3Qgc3dpdGNoRWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd2aWV3LW1vZGUtc3dpdGNoJykKICAgICAgICBzd2l0Y2hFbGVtZW50LmNoZWNrZWQgPSBkZWZhdWx0TWV0cmljID09PSAnbm9kZXMnCgogICAgICAgIHN3aXRjaEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgdG9nZ2xlVmlld01vZGUpCgogICAgICAgIHVwZGF0ZVN0cmVhbXNUYWJsZShncm91cE1ldHJpY3MpCiAgICAgIH0KCiAgICAgIGZ1bmN0aW9uIHVwZGF0ZUFsbENoYXJ0cyhtZXRyaWMpIHsKICAgICAgICBjb25zb2xlLmxvZygnVXBkYXRpbmcgYWxsIGNoYXJ0cyB0byBkaXNwbGF5IG1ldHJpYzonLCBtZXRyaWMpCiAgICAgICAgY3JlYXRlV2Vla2x5Q29tcGxldGlvbkNoYXJ0KAogICAgICAgICAgJ3dlZWtseWNvbXBsZXRpb25jaGFydCcsCiAgICAgICAgICBncm91cE1ldHJpY3MsCiAgICAgICAgICBtZXRyaWMKICAgICAgICApCgogICAgICAgIGNyZWF0ZVdlZWtseVZlbG9jaXR5Q2hhcnQoJ3dlZWtseXZlbG9jaXR5Y2hhcnQnLCBncm91cE1ldHJpY3MsIG1ldHJpYykKCiAgICAgICAgY3JlYXRlRWZmb3J0RGlzdHJpYnV0aW9uQ2hhcnQoCiAgICAgICAgICAnZWZmb3J0ZGlzdHJpYnV0aW9uY2hhcnQnLAogICAgICAgICAgZ3JvdXBNZXRyaWNzLAogICAgICAgICAgbWV0cmljCiAgICAgICAgKQogICAgICB9CgogICAgICAvLyBJbml0aWFsaXplIGFsbCBjaGFydHMgd2hlbiBET00gaXMgbG9hZGVkCiAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCBpbml0aWFsaXplRGFzaGJvYXJkKQogICAgPC9zY3JpcHQ+CiAgPC9ib2R5Pgo8L2h0bWw+Cg=='

export default tpl
