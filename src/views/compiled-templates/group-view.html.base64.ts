export const tpl = 'PCFkb2N0eXBlIGh0bWw+CjxodG1sIGxhbmc9ImVuIj4KICA8aGVhZD4KICAgIDxtZXRhIGNoYXJzZXQ9IlVURi04IiAvPgogICAgPG1ldGEgbmFtZT0idmlld3BvcnQiIGNvbnRlbnQ9IndpZHRoPWRldmljZS13aWR0aCwgaW5pdGlhbC1zY2FsZT0xLjAiIC8+CiAgICA8dGl0bGU+UHJvamVjdHMgQWN0aXZpdHk8L3RpdGxlPgogICAgPHNjcmlwdCBzcmM9Imh0dHBzOi8vY2RuLmpzZGVsaXZyLm5ldC9ucG0vZWNoYXJ0c0A1LjQuMy9kaXN0L2VjaGFydHMubWluLmpzIj48L3NjcmlwdD4KICAgIDxzY3JpcHQgc3JjPSJodHRwczovL2Nkbi5qc2RlbGl2ci5uZXQvbnBtL2RhdGUtZm5zQDQuMS4wL2Nkbi5taW4uanMiPjwvc2NyaXB0PgogICAgPHN0eWxlPgogICAgICBib2R5IHsKICAgICAgICBmb250LWZhbWlseTogQXJpYWwsIHNhbnMtc2VyaWY7CiAgICAgICAgbWFyZ2luOiAyMHB4OwogICAgICAgIGNvbG9yOiAjMzMzOwogICAgICB9CiAgICAgIC5jb250YWluZXIgewogICAgICAgIG1heC13aWR0aDogMTgwMHB4OwogICAgICAgIG1hcmdpbjogMCBhdXRvOwogICAgICB9CiAgICAgIC5kYXNoYm9hcmQtaGVhZGVyIHsKICAgICAgICBkaXNwbGF5OiBmbGV4OwogICAgICAgIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjsKICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyOwogICAgICAgIG1hcmdpbi1ib3R0b206IDEwcHg7CiAgICAgIH0KICAgICAgLmRhc2hib2FyZC10aXRsZSB7CiAgICAgICAgbWFyZ2luOiAwOwogICAgICB9CiAgICAgIC5yb3cgewogICAgICAgIGRpc3BsYXk6IGZsZXg7CiAgICAgICAgbWFyZ2luLWJvdHRvbTogMzBweDsKICAgICAgICBnYXA6IDIwcHg7CiAgICAgIH0KICAgICAgLmNoYXJ0LWNvbnRhaW5lciB7CiAgICAgICAgZmxleDogMTsKICAgICAgICBoZWlnaHQ6IDMwMHB4OwogICAgICAgIGJvcmRlcjogMXB4IHNvbGlkICNlYWVhZWE7CiAgICAgICAgYm9yZGVyLXJhZGl1czogNXB4OwogICAgICAgIGJveC1zaGFkb3c6IDAgMnB4IDhweCByZ2JhKDAsIDAsIDAsIDAuMSk7CiAgICAgIH0KICAgICAgdGFibGUgewogICAgICAgIHdpZHRoOiAxMDAlOwogICAgICAgIGJvcmRlci1jb2xsYXBzZTogY29sbGFwc2U7CiAgICAgICAgbWFyZ2luLXRvcDogMTBweDsKICAgICAgICBib3gtc2hhZG93OiAwIDJweCA4cHggcmdiYSgwLCAwLCAwLCAwLjEpOwogICAgICB9CiAgICAgIHRoLAogICAgICB0ZCB7CiAgICAgICAgcGFkZGluZzogMTJweCAxNXB4OwogICAgICAgIHRleHQtYWxpZ246IGxlZnQ7CiAgICAgICAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkICNkZGQ7CiAgICAgIH0KICAgICAgdGggewogICAgICAgIGJhY2tncm91bmQtY29sb3I6ICNmOGY4Zjg7CiAgICAgICAgZm9udC13ZWlnaHQ6IGJvbGQ7CiAgICAgIH0KICAgICAgdHI6aG92ZXIgewogICAgICAgIGJhY2tncm91bmQtY29sb3I6ICNmNWY1ZjU7CiAgICAgIH0KICAgICAgYSB7CiAgICAgICAgY29sb3I6ICMxYTczZTg7CiAgICAgICAgdGV4dC1kZWNvcmF0aW9uOiBub25lOwogICAgICB9CiAgICAgIGE6aG92ZXIgewogICAgICAgIHRleHQtZGVjb3JhdGlvbjogdW5kZXJsaW5lOwogICAgICB9CiAgICAgIC50YWJsZS1jb250YWluZXIgewogICAgICAgIG1hcmdpbi10b3A6IDIwcHg7CiAgICAgICAgYm9yZGVyOiAxcHggc29saWQgI2VhZWFlYTsKICAgICAgICBib3JkZXItcmFkaXVzOiA1cHg7CiAgICAgICAgcGFkZGluZzogMTVweDsKICAgICAgICBib3gtc2hhZG93OiAwIDJweCA4cHggcmdiYSgwLCAwLCAwLCAwLjEpOwogICAgICB9CiAgICAgIC50YWJsZS1mb290ZXIgewogICAgICAgIGRpc3BsYXk6IGZsZXg7CiAgICAgICAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuOwogICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7CiAgICAgICAgbWFyZ2luLXRvcDogMTBweDsKICAgICAgICBtYXJnaW4tYm90dG9tOiA1cHg7CiAgICAgIH0KICAgICAgLnRhYmxlLWhlYWRlciB7CiAgICAgICAgZGlzcGxheTogZmxleDsKICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47CiAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjsKICAgICAgICBtYXJnaW4tYm90dG9tOiAxMHB4OwogICAgICB9CiAgICAgIGgyLAogICAgICBoMyB7CiAgICAgICAgbWFyZ2luOiAwOwogICAgICAgIGNvbG9yOiAjNDQ0OwogICAgICB9CiAgICAgIC5zb3VyY2UtZGVzY3JpcHRpb24gewogICAgICAgIGZvbnQtc3R5bGU6IGl0YWxpYzsKICAgICAgICBjb2xvcjogIzY2NjsKICAgICAgfQogICAgICAuc291cmNlLWluZm8gewogICAgICAgIGZvbnQtc3R5bGU6IGl0YWxpYzsKICAgICAgICBmb250LXNpemU6IHNtYWxsZXI7CiAgICAgICAgY29sb3I6ICM2NjY7CiAgICAgIH0KICAgICAgLyogU3dpdGNoIGJ1dHRvbiBzdHlsZXMgKi8KICAgICAgLnN3aXRjaC1jb250YWluZXIgewogICAgICAgIGRpc3BsYXk6IGZsZXg7CiAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjsKICAgICAgfQogICAgICAuc3dpdGNoLWxhYmVsIHsKICAgICAgICBtYXJnaW46IDAgMTBweDsKICAgICAgICBmb250LXdlaWdodDogYm9sZDsKICAgICAgICBmb250LXNpemU6IDE0cHg7CiAgICAgIH0KICAgICAgLnN3aXRjaCB7CiAgICAgICAgcG9zaXRpb246IHJlbGF0aXZlOwogICAgICAgIGRpc3BsYXk6IGlubGluZS1ibG9jazsKICAgICAgICB3aWR0aDogNjBweDsKICAgICAgICBoZWlnaHQ6IDI4cHg7CiAgICAgIH0KICAgICAgLnN3aXRjaCBpbnB1dCB7CiAgICAgICAgb3BhY2l0eTogMDsKICAgICAgICB3aWR0aDogMDsKICAgICAgICBoZWlnaHQ6IDA7CiAgICAgIH0KICAgICAgLnNsaWRlciB7CiAgICAgICAgcG9zaXRpb246IGFic29sdXRlOwogICAgICAgIGN1cnNvcjogcG9pbnRlcjsKICAgICAgICB0b3A6IDA7CiAgICAgICAgbGVmdDogMDsKICAgICAgICByaWdodDogMDsKICAgICAgICBib3R0b206IDA7CiAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogI2NjYzsKICAgICAgICB0cmFuc2l0aW9uOiAwLjRzOwogICAgICAgIGJvcmRlci1yYWRpdXM6IDM0cHg7CiAgICAgIH0KICAgICAgLnNsaWRlcjpiZWZvcmUgewogICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICAgICAgICBjb250ZW50OiAnJzsKICAgICAgICBoZWlnaHQ6IDIwcHg7CiAgICAgICAgd2lkdGg6IDIwcHg7CiAgICAgICAgbGVmdDogNHB4OwogICAgICAgIGJvdHRvbTogNHB4OwogICAgICAgIGJhY2tncm91bmQtY29sb3I6IHdoaXRlOwogICAgICAgIHRyYW5zaXRpb246IDAuNHM7CiAgICAgICAgYm9yZGVyLXJhZGl1czogNTAlOwogICAgICB9CiAgICAgIGlucHV0OmNoZWNrZWQgKyAuc2xpZGVyIHsKICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjMjE5NmYzOwogICAgICB9CiAgICAgIGlucHV0OmZvY3VzICsgLnNsaWRlciB7CiAgICAgICAgYm94LXNoYWRvdzogMCAwIDFweCAjMjE5NmYzOwogICAgICB9CiAgICAgIGlucHV0OmNoZWNrZWQgKyAuc2xpZGVyOmJlZm9yZSB7CiAgICAgICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVYKDMycHgpOwogICAgICB9CiAgICAgIC52aWV3LW1vZGUgewogICAgICAgIG1hcmdpbi1sZWZ0OiA4cHg7CiAgICAgICAgZm9udC13ZWlnaHQ6IGJvbGQ7CiAgICAgICAgbWluLXdpZHRoOiA5MHB4OwogICAgICB9CiAgICA8L3N0eWxlPgogIDwvaGVhZD4KICA8Ym9keT4KICAgIDxhIGhyZWY9ImluZGV4Lmh0bWwiPvCflJk8L2E+CiAgICA8ZGl2IGNsYXNzPSJjb250YWluZXIiPgogICAgICA8ZGl2IGNsYXNzPSJkYXNoYm9hcmQtaGVhZGVyIj4KICAgICAgICA8aDIgaWQ9ImRhc2hib2FyZC10aXRsZSIgY2xhc3M9ImRhc2hib2FyZC10aXRsZSI+PC9oMj4KICAgICAgICA8ZGl2IGNsYXNzPSJzd2l0Y2gtY29udGFpbmVyIj4KICAgICAgICAgIDxzcGFuIGNsYXNzPSJzd2l0Y2gtbGFiZWwiPlN0b3J5IFBvaW50czwvc3Bhbj4KICAgICAgICAgIDxsYWJlbCBjbGFzcz0ic3dpdGNoIj4KICAgICAgICAgICAgPGlucHV0IHR5cGU9ImNoZWNrYm94IiBpZD0idmlldy1tb2RlLXN3aXRjaCIgLz4KICAgICAgICAgICAgPHNwYW4gY2xhc3M9InNsaWRlciI+PC9zcGFuPgogICAgICAgICAgPC9sYWJlbD4KICAgICAgICAgIDxzcGFuIGNsYXNzPSJzd2l0Y2gtbGFiZWwiPkNvdW50PC9zcGFuPgogICAgICAgIDwvZGl2PgogICAgICA8L2Rpdj4KICAgICAgPHAgY2xhc3M9InNvdXJjZS1kZXNjcmlwdGlvbiIgaWQ9ImRhc2hib2FyZC1kZXNjcmlwdGlvbiI+PC9wPgogICAgICA8cCBjbGFzcz0ic291cmNlLWluZm8iIGlkPSJkYXNoYm9hcmQtbWV0YWRhdGEiPjwvcD4KCiAgICAgIDxkaXYgY2xhc3M9InJvdyI+CiAgICAgICAgPGRpdiBjbGFzcz0iY2hhcnQtY29udGFpbmVyIiBpZD0id2Vla2x5Y29tcGxldGlvbmNoYXJ0Ij48L2Rpdj4KICAgICAgICA8ZGl2IGNsYXNzPSJjaGFydC1jb250YWluZXIiIGlkPSJ3ZWVrbHl2ZWxvY2l0eWNoYXJ0Ij48L2Rpdj4KICAgICAgICA8ZGl2IGNsYXNzPSJjaGFydC1jb250YWluZXIiIGlkPSJlZmZvcnRkaXN0cmlidXRpb25jaGFydCI+PC9kaXY+CiAgICAgIDwvZGl2PgoKICAgICAgPGRpdiBjbGFzcz0idGFibGUtY29udGFpbmVyIj4KICAgICAgICA8ZGl2IGNsYXNzPSJ0YWJsZS1oZWFkZXIiPgogICAgICAgICAgPGgzIGlkPSJ0YWJsZS10aXRsZSI+PC9oMz4KICAgICAgICAgIDxzcGFuIGlkPSJzZWxlY3RlZC1zb3VyY2UiCiAgICAgICAgICAgID5DbGljayBvbiBhbnkgY2hhcnQgYmFyIHRvIHNlZSBkZXRhaWxzPC9zcGFuCiAgICAgICAgICA+CiAgICAgICAgPC9kaXY+CiAgICAgICAgPHRhYmxlPgogICAgICAgICAgPHRoZWFkPgogICAgICAgICAgICA8dHI+CiAgICAgICAgICAgICAgPHRoPiM8L3RoPgogICAgICAgICAgICAgIDx0aD5UaXRsZTwvdGg+CiAgICAgICAgICAgICAgPHRoPlR5cGU8L3RoPgogICAgICAgICAgICAgIDx0aD5SZXBvPC90aD4KICAgICAgICAgICAgICA8dGg+TWlsZXN0b25lPC90aD4KICAgICAgICAgICAgICA8dGg+UG9pbnRzPC90aD4KICAgICAgICAgICAgPC90cj4KICAgICAgICAgIDwvdGhlYWQ+CiAgICAgICAgICA8dGJvZHkgaWQ9ImRldGFpbHMtdGFibGUiPgogICAgICAgICAgICA8dHI+CiAgICAgICAgICAgICAgPHRkIGNvbHNwYW49IjMiPk5vIGRhdGEgc2VsZWN0ZWQ8L3RkPgogICAgICAgICAgICA8L3RyPgogICAgICAgICAgPC90Ym9keT4KICAgICAgICA8L3RhYmxlPgogICAgICA8L2Rpdj4KCiAgICAgIDxwIGNsYXNzPSJzb3VyY2UtaW5mbyIgaWQ9ImRhc2hib2FyZC1wcm9qZWN0ZmlsdGVyIj48L3A+CgogICAgICA8ZGl2IGNsYXNzPSJ0YWJsZS1jb250YWluZXIiPgogICAgICAgIDxkaXYgY2xhc3M9InRhYmxlLWhlYWRlciI+CiAgICAgICAgICA8aDM+RGF0YSBTdHJlYW1zPC9oMz4KICAgICAgICA8L2Rpdj4KICAgICAgICA8dGFibGU+CiAgICAgICAgICA8dGhlYWQ+CiAgICAgICAgICAgIDx0cj4KICAgICAgICAgICAgICA8dGg+TmFtZTwvdGg+CiAgICAgICAgICAgICAgPHRoPkRlc2NyaXB0aW9uPC90aD4KICAgICAgICAgICAgICA8dGg+UXVlcnk8L3RoPgogICAgICAgICAgICAgIDx0aD5Ob2RlczwvdGg+CiAgICAgICAgICAgIDwvdHI+CiAgICAgICAgICA8L3RoZWFkPgogICAgICAgICAgPHRib2R5IGlkPSJkZXRhaWxzLXRhYmxlLXN0cmVhbSI+CiAgICAgICAgICAgIDx0cj4KICAgICAgICAgICAgICA8dGQgY29sc3Bhbj0iMyI+Tm8gZGF0YSBzZWxlY3RlZDwvdGQ+CiAgICAgICAgICAgIDwvdHI+CiAgICAgICAgICA8L3Rib2R5PgogICAgICAgIDwvdGFibGU+CiAgICAgICAgPGRpdiBjbGFzcz0idGFibGUtZm9vdGVyIj4KICAgICAgICAgIDxzcGFuCiAgICAgICAgICAgID48aQogICAgICAgICAgICAgID5TdHJlYW1zIGFyZSBxdWVyaWVzIGV4ZWN1dGVkIGFnYWluc3QgQUxMIElzc3VlcyBhbmQgUHVsbCBSZXF1ZXN0cwogICAgICAgICAgICAgIChQUikgYXR0YWNoZWQgdG8gdGhlIHNlbGVjdGVkIHByb2plY3QuIDxiciAvPgogICAgICAgICAgICAgIFRoZWlyIG9yZGVyIG1hdHRlcnMsIGlmIGEgSXNzdWUgb3IgUFIgaXMgcHJlc2VudCBpbiB0aGUgZmlyc3QKICAgICAgICAgICAgICBzdHJlYW0sIGl0IHdpbGwgYmUgaWdub3JlZCBvbiB0aGUgZm9sbG93aW5nIHN0cmVhbXMuIFRoaXMgcHJldmVudHMKICAgICAgICAgICAgICBpc3N1ZXMvUFJzIGZyb20gYmVpbmcgY291bnRlZCBtdWx0aXBsZSB0aW1lcy48L2kKICAgICAgICAgICAgPjwvc3BhbgogICAgICAgICAgPgogICAgICAgIDwvZGl2PgogICAgICA8L2Rpdj4KICAgIDwvZGl2PgoKICAgIDxzY3JpcHQ+CiAgICAgIGNvbnN0IGJhc2U2NERlY29kZVVuaWNvZGUgPSAoYmFzZTY0U3RyaW5nKSA9PiB7CiAgICAgICAgY29uc3QgYmluYXJ5U3RyaW5nID0gd2luZG93LmF0b2IoYmFzZTY0U3RyaW5nKQogICAgICAgIGNvbnN0IGJ5dGVzID0gbmV3IFVpbnQ4QXJyYXkoYmluYXJ5U3RyaW5nLmxlbmd0aCkKCiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBiaW5hcnlTdHJpbmcubGVuZ3RoOyBpKyspIHsKICAgICAgICAgIGJ5dGVzW2ldID0gYmluYXJ5U3RyaW5nLmNoYXJDb2RlQXQoaSkKICAgICAgICB9CgogICAgICAgIHJldHVybiBuZXcgVGV4dERlY29kZXIoJ3V0Zi04JykuZGVjb2RlKGJ5dGVzKQogICAgICB9CgogICAgICAvLyBTaW5nbGUgSmF2YVNjcmlwdCBkYXRhIG9iamVjdCBjb250YWluaW5nIGFsbCBvdXIgZGF0YQogICAgICBjb25zdCBzcmNEYXRhID0gYmFzZTY0RGVjb2RlVW5pY29kZSgnUkVQTEFDRV9NRScpCiAgICAgIGNvbnN0IGdyb3VwTWV0cmljcyA9IEpTT04ucGFyc2Uoc3JjRGF0YSkKICAgICAgY29uc29sZS5sb2coJ1NvdXJjZSBkYXRhIGRlY29kZWQnLCBncm91cE1ldHJpY3MpCgogICAgICAvLyBDb3BpZWQgdG8gdGhlIHdpbmRvdyBvYmplY3QgdG8gZmFjaWxpdGF0ZSBidWlsZGluZyBvZiBxdWVyaWVzCiAgICAgIHdpbmRvdy5kYXRhTm9kZXMgPSBncm91cE1ldHJpY3Mubm9kZXMKCiAgICAgIGRvY3VtZW50LnRpdGxlID0gZ3JvdXBNZXRyaWNzLm5hbWUKCiAgICAgIC8vIFVwZGF0ZSB0aGUgdGFibGUgd2l0aCBkYXRhIGNsaWNrZWQgaW4gdGhlIGNoYXJ0CiAgICAgIGZ1bmN0aW9uIHVwZGF0ZVRhYmxlKHsgc3JjQ2hhcnQsIHNlbGVjdGlvbiwgbm9kZXMgfSkgewogICAgICAgIGNvbnNvbGUubG9nKCdVcGRhdGluZyB0YWJsZSB3aXRoIGRhdGEgY29taW5nIGZyb206Jywgc3JjQ2hhcnQpCgogICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0YWJsZS10aXRsZScpLnRleHRDb250ZW50ID0KICAgICAgICAgIGBOb2RlcyBmcm9tICR7c3JjQ2hhcnR9YAogICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzZWxlY3RlZC1zb3VyY2UnKS50ZXh0Q29udGVudCA9CiAgICAgICAgICBgU2VsZWN0aW9uOiAke3NlbGVjdGlvbn1gCgogICAgICAgIGNvbnN0IHRhYmxlQm9keSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkZXRhaWxzLXRhYmxlJykKICAgICAgICB0YWJsZUJvZHkuaW5uZXJIVE1MID0gJycKCiAgICAgICAgbm9kZXMuZm9yRWFjaCgobm9kZSkgPT4gewogICAgICAgICAgY29uc3Qgcm93ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndHInKQogICAgICAgICAgcm93LmlubmVySFRNTCA9IGAKICAgICAgICAgICAgICAgIDx0ZD4ke25vZGUubnVtYmVyfTwvdGQ+CiAgICAgICAgICAgICAgICA8dGQ+PGEgaHJlZj0iJHtub2RlLnVybH0iIHRhcmdldD0iX2JsYW5rIj4ke25vZGUudGl0bGV9PC9hPjwvdGQ+CiAgICAgICAgICAgICAgICA8dGQ+JHtub2RlLnR5cGV9PC90ZD4KICAgICAgICAgICAgICAgIDx0ZD48YSBocmVmPSIke25vZGUucmVwb3NpdG9yeS51cmx9IiB0YXJnZXQ9Il9ibGFuayI+JHtub2RlLnJlcG9zaXRvcnkub3duZXIubG9naW59LyR7bm9kZS5yZXBvc2l0b3J5Lm5hbWV9PC9hPjwvdGQ+CiAgICAgICAgICAgICAgICA8dGQ+JHtub2RlLm1pbGVzdG9uZT8udGl0bGUgPyBub2RlLm1pbGVzdG9uZT8udGl0bGUgOiAnJ308L3RkPgogICAgICAgICAgICAgICAgPHRkPiR7bm9kZS5wb2ludHN9PC90ZD4KICAgICAgICAgICAgICBgCiAgICAgICAgICB0YWJsZUJvZHkuYXBwZW5kQ2hpbGQocm93KQogICAgICAgIH0pCiAgICAgIH0KCiAgICAgIGZ1bmN0aW9uIHVwZGF0ZVN0cmVhbXNUYWJsZShzcmNEYXRhKSB7CiAgICAgICAgY29uc3QgdGFibGVCb2R5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2RldGFpbHMtdGFibGUtc3RyZWFtJykKICAgICAgICB0YWJsZUJvZHkuaW5uZXJIVE1MID0gJycKCiAgICAgICAgc3JjRGF0YS5zdHJlYW1zLmZvckVhY2goKHN0cmVhbSkgPT4gewogICAgICAgICAgY29uc3Qgcm93ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndHInKQogICAgICAgICAgcm93LmlubmVySFRNTCA9IGAKICAgICAgICAgICAgICAgIDx0ZD4ke3N0cmVhbS5uYW1lfTwvdGQ+CiAgICAgICAgICAgICAgICA8dGQ+JHtzdHJlYW0uZGVzY3JpcHRpb259PC90ZD4KICAgICAgICAgICAgICAgIDx0ZD4ke0pTT04uc3RyaW5naWZ5KHN0cmVhbS5xdWVyeSl9PC90ZD4KICAgICAgICAgICAgICAgIDx0ZD4ke3N0cmVhbS5ub2Rlcy5sZW5ndGh9PC90ZD4KICAgICAgICAgICAgICBgCiAgICAgICAgICB0YWJsZUJvZHkuYXBwZW5kQ2hpbGQocm93KQogICAgICAgIH0pCiAgICAgIH0KCiAgICAgIGNvbnN0IHRvb2x0aXBGb3JtYXR0ZXIgPSAocGFyYW1zLCB1bml0ID0gJycpID0+IHsKICAgICAgICAvLyBMaW1pdCB0b29sdGlwIHRvIHRvcCAxMCB2YWx1ZXMgYXQgdGhlIHBvaW50CiAgICAgICAgY29uc3Qgc29ydGVkUGFyYW1zID0gWy4uLnBhcmFtc10uc29ydCgoYSwgYikgPT4gYi52YWx1ZSAtIGEudmFsdWUpCiAgICAgICAgY29uc3QgbGltaXRlZCA9IHNvcnRlZFBhcmFtcy5zbGljZSgwLCAxMCkKCiAgICAgICAgbGV0IHJlc3VsdCA9IGAke2xpbWl0ZWRbMF0uYXhpc1ZhbHVlfTxicj5gCiAgICAgICAgbGltaXRlZC5mb3JFYWNoKChwYXJhbSkgPT4gewogICAgICAgICAgaWYgKHBhcmFtLnZhbHVlID09PSB1bmRlZmluZWQpIHsKICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgICB9CiAgICAgICAgICByZXN1bHQgKz0gYCR7cGFyYW0ubWFya2VyfSAke3BhcmFtLnNlcmllc05hbWV9OiAke01hdGgucm91bmQocGFyYW0udmFsdWUpfSR7dW5pdH08YnI+YAogICAgICAgIH0pCgogICAgICAgIGlmIChwYXJhbXMubGVuZ3RoID4gMTApIHsKICAgICAgICAgIHJlc3VsdCArPSBgPGk+Li4uIGFuZCAke3BhcmFtcy5sZW5ndGggLSAxMH0gbW9yZTwvaT5gCiAgICAgICAgfQoKICAgICAgICByZXR1cm4gcmVzdWx0CiAgICAgIH0KCiAgICAgIGNvbnN0IGdldExlZ2VuZCA9IChzdHJlYW1zTGVuZ3RoKSA9PiB7CiAgICAgICAgbGV0IGxlZ2VuZCA9IHsKICAgICAgICAgIHRvcDogJ3RvcCcsCiAgICAgICAgICBsZWZ0OiAnY2VudGVyJywKICAgICAgICAgIHRvcDogMzAKICAgICAgICB9CiAgICAgICAgaWYgKHN0cmVhbXNMZW5ndGggPiA4KSB7CiAgICAgICAgICBsZWdlbmQudHlwZSA9ICdzY3JvbGwnCiAgICAgICAgfQogICAgICAgIHJldHVybiBsZWdlbmQKICAgICAgfQogICAgICBmdW5jdGlvbiBjcmVhdGVXZWVrbHlDb21wbGV0aW9uQ2hhcnQoZWxlbWVudElkLCBkYXRhLCBtZXRyaWMpIHsKICAgICAgICBjb25zdCBjaGFydERvbSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGVsZW1lbnRJZCkKICAgICAgICBjb25zdCBteUNoYXJ0ID0gZWNoYXJ0cy5pbml0KGNoYXJ0RG9tKQoKICAgICAgICBjb25zdCB2aXNpYmxlQ291bnQgPSAyMAogICAgICAgIGNvbnN0IHN0YXJ0UGVyY2VudGFnZSA9CiAgICAgICAgICAoKGRhdGEud2Vla3MubGVuZ3RoIC0gdmlzaWJsZUNvdW50KSAvIGRhdGEud2Vla3MubGVuZ3RoKSAqIDEwMAogICAgICAgIGNvbnN0IGVuZFBlcmNlbnRhZ2UgPSAxMDAKCiAgICAgICAgY29uc3QgY2hhcnRUaXRsZSA9ICdXZWVrbHkgQ29tcGxldGlvbicKCiAgICAgICAgY29uc3QgaGlnaGVzdFZhbHVlID0gTWF0aC5tYXgoCiAgICAgICAgICAuLi5kYXRhLndlZWtzLm1hcCgod2VlaykgPT4gd2Vlay5tZXRyaWNzLm5vZGVzLmNvdW50KQogICAgICAgICkKICAgICAgICBjb25zdCByb3VuZFVwSGlnaGVzdCA9IE1hdGguY2VpbChoaWdoZXN0VmFsdWUgLyAxMCkgKiAxMAoKICAgICAgICBjb25zdCBvcHRpb24gPSB7CiAgICAgICAgICB0aXRsZTogewogICAgICAgICAgICB0ZXh0OiBjaGFydFRpdGxlLAogICAgICAgICAgICBwb3NpdGlvbjogJ3RvcCcsCiAgICAgICAgICAgIGxlZnQ6ICdjZW50ZXInLAogICAgICAgICAgICB0ZXh0U3R5bGU6IHsKICAgICAgICAgICAgICBmb250U2l6ZTogMTQKICAgICAgICAgICAgfQogICAgICAgICAgfSwKICAgICAgICAgIGxlZ2VuZDogZ2V0TGVnZW5kKGRhdGEuc3RyZWFtcy5sZW5ndGgpLAogICAgICAgICAgdG9vbHRpcDogewogICAgICAgICAgICB0cmlnZ2VyOiAnYXhpcycsCiAgICAgICAgICAgIGF4aXNQb2ludGVyOiB7CiAgICAgICAgICAgICAgdHlwZTogJ3NoYWRvdycKICAgICAgICAgICAgfSwKICAgICAgICAgICAgZm9ybWF0dGVyOiBmdW5jdGlvbiAocGFyYW1zKSB7CiAgICAgICAgICAgICAgcmV0dXJuIHRvb2x0aXBGb3JtYXR0ZXIocGFyYW1zKQogICAgICAgICAgICB9CiAgICAgICAgICB9LAogICAgICAgICAgZ3JpZDogewogICAgICAgICAgICBsZWZ0OiAnMyUnLAogICAgICAgICAgICByaWdodDogJzQlJywKICAgICAgICAgICAgYm90dG9tOiAnMyUnLAogICAgICAgICAgICB0b3A6ICczMCUnLAogICAgICAgICAgICBjb250YWluTGFiZWw6IHRydWUKICAgICAgICAgIH0sCiAgICAgICAgICBkYXRhWm9vbTogWwogICAgICAgICAgICB7CiAgICAgICAgICAgICAgdHlwZTogJ2luc2lkZScsIC8vIEFsbG93cyBzY3JvbGxpbmcgd2l0aCBtb3VzZSBvciB0b3VjaCBnZXN0dXJlcwogICAgICAgICAgICAgIHhBeGlzSW5kZXg6IDAsCiAgICAgICAgICAgICAgc3RhcnQ6IHN0YXJ0UGVyY2VudGFnZSwKICAgICAgICAgICAgICBlbmQ6IGVuZFBlcmNlbnRhZ2UKICAgICAgICAgICAgfQogICAgICAgICAgXSwKICAgICAgICAgIHhBeGlzOiB7CiAgICAgICAgICAgIHR5cGU6ICdjYXRlZ29yeScsCiAgICAgICAgICAgIGF4aXNMYWJlbDogeyBpbnRlcnZhbDogMCwgcm90YXRlOiAzMCB9LAogICAgICAgICAgICBkYXRhOiBkYXRhLndlZWtzLm1hcCgodmFsdWUsIGluZGV4KSA9PgogICAgICAgICAgICAgIGRhdGVGbnMuZm9ybWF0KG5ldyBEYXRlKHZhbHVlLmZpcnN0RGF5KSwgJ0xMTCBkbycpCiAgICAgICAgICAgICkKICAgICAgICAgIH0sCiAgICAgICAgICB5QXhpczogewogICAgICAgICAgICB0eXBlOiAndmFsdWUnLAogICAgICAgICAgICBtaW46IDAsCiAgICAgICAgICAgIG1heDogcm91bmRVcEhpZ2hlc3QKICAgICAgICAgIH0sCiAgICAgICAgICBzZXJpZXM6IFsKICAgICAgICAgICAgLi4uZGF0YS5zdHJlYW1zLm1hcCgoc3RyZWFtLCBpbmRleCkgPT4gewogICAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgICBuYW1lOiBzdHJlYW0ubmFtZSwKICAgICAgICAgICAgICAgIHR5cGU6ICdiYXInLAogICAgICAgICAgICAgICAgc3RhY2s6ICdhZCcsCiAgICAgICAgICAgICAgICBkYXRhOiBzdHJlYW0ud2Vla3MubWFwKAogICAgICAgICAgICAgICAgICAodmFsdWUsIGluZGV4KSA9PiB2YWx1ZS5tZXRyaWNzW21ldHJpY10uY291bnQKICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pLAogICAgICAgICAgICB7CiAgICAgICAgICAgICAgbmFtZTogJ1RvdGFsJywKICAgICAgICAgICAgICB0eXBlOiAnbGluZScsCiAgICAgICAgICAgICAgZGF0YTogZGF0YS53ZWVrcy5tYXAoKHdlZWssIGluZGV4KSA9PiB3ZWVrLm1ldHJpY3NbbWV0cmljXS5jb3VudCkKICAgICAgICAgICAgfQogICAgICAgICAgXQogICAgICAgIH0KCiAgICAgICAgLy8gQXBwbHkgb3B0aW9ucyB0byBjaGFydAogICAgICAgIG15Q2hhcnQuc2V0T3B0aW9uKG9wdGlvbikKCiAgICAgICAgLy8gQWRkIGNsaWNrIGV2ZW50IGZvciBpbnRlcmFjdGl2aXR5CiAgICAgICAgbXlDaGFydC5vbignY2xpY2snLCBmdW5jdGlvbiAocGFyYW1zKSB7CiAgICAgICAgICBjb25zdCBzdHJlYW1OYW1lID0gcGFyYW1zLnNlcmllc05hbWUKICAgICAgICAgIGNvbnN0IHN0cmVhbUluZGV4ID0gcGFyYW1zLmRhdGFJbmRleAogICAgICAgICAgY29uc3Qgc3RyZWFtID0gZGF0YS5zdHJlYW1zLmZpbmQoCiAgICAgICAgICAgIChzdHJlYW0pID0+IHN0cmVhbS5uYW1lID09PSBzdHJlYW1OYW1lCiAgICAgICAgICApCiAgICAgICAgICBpZiAoc3RyZWFtICYmIHN0cmVhbS53ZWVrc1tzdHJlYW1JbmRleF0pIHsKICAgICAgICAgICAgdXBkYXRlVGFibGUoewogICAgICAgICAgICAgIHNyY0NoYXJ0OiBjaGFydFRpdGxlLAogICAgICAgICAgICAgIHNlbGVjdGlvbjogYCR7c3RyZWFtTmFtZX0gb24gJHtkYXRlRm5zLmZvcm1hdChuZXcgRGF0ZShzdHJlYW0ud2Vla3Nbc3RyZWFtSW5kZXhdLmZpcnN0RGF5KSwgJ0xMTCBkbycpfSAoJHtzdHJlYW0ud2Vla3Nbc3RyZWFtSW5kZXhdLm5vZGVzLmxlbmd0aH0gbm9kZXMpYCwKICAgICAgICAgICAgICBub2Rlczogc3RyZWFtLndlZWtzW3N0cmVhbUluZGV4XS5ub2RlcwogICAgICAgICAgICB9KQogICAgICAgICAgfQogICAgICAgIH0pCgogICAgICAgIC8vIE1ha2UgY2hhcnQgcmVzcG9uc2l2ZQogICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBteUNoYXJ0LnJlc2l6ZSgpCiAgICAgICAgfSkKCiAgICAgICAgcmV0dXJuIG15Q2hhcnQKICAgICAgfQoKICAgICAgZnVuY3Rpb24gY3JlYXRlV2Vla2x5VmVsb2NpdHlDaGFydChlbGVtZW50SWQsIGRhdGEsIG1ldHJpYykgewogICAgICAgIGNvbnN0IGNoYXJ0RG9tID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZWxlbWVudElkKQogICAgICAgIGNvbnN0IG15Q2hhcnQgPSBlY2hhcnRzLmluaXQoY2hhcnREb20pCgogICAgICAgIGNvbnN0IHZpc2libGVDb3VudCA9IDIwCiAgICAgICAgY29uc3Qgc3RhcnRQZXJjZW50YWdlID0KICAgICAgICAgICgoZGF0YS53ZWVrcy5sZW5ndGggLSB2aXNpYmxlQ291bnQpIC8gZGF0YS53ZWVrcy5sZW5ndGgpICogMTAwCiAgICAgICAgY29uc3QgZW5kUGVyY2VudGFnZSA9IDEwMAoKICAgICAgICBjb25zdCBjaGFydFRpdGxlID0gJ1dlZWtseSBWZWxvY2l0eScKCiAgICAgICAgY29uc3QgaGlnaGVzdFZhbHVlID0gTWF0aC5tYXgoCiAgICAgICAgICAuLi5kYXRhLndlZWtzLm1hcCgod2VlaykgPT4gd2Vlay5tZXRyaWNzLm5vZGVzLnZlbG9jaXR5KQogICAgICAgICkKICAgICAgICBjb25zdCByb3VuZFVwSGlnaGVzdCA9IE1hdGguY2VpbChoaWdoZXN0VmFsdWUgLyAxMCkgKiAxMAoKICAgICAgICBjb25zdCBvcHRpb24gPSB7CiAgICAgICAgICB0aXRsZTogewogICAgICAgICAgICB0ZXh0OiBjaGFydFRpdGxlLAogICAgICAgICAgICBwb3NpdGlvbjogJ3RvcCcsCiAgICAgICAgICAgIGxlZnQ6ICdjZW50ZXInLAogICAgICAgICAgICB0ZXh0U3R5bGU6IHsKICAgICAgICAgICAgICBmb250U2l6ZTogMTQKICAgICAgICAgICAgfQogICAgICAgICAgfSwKICAgICAgICAgIGxlZ2VuZDogZ2V0TGVnZW5kKGRhdGEuc3RyZWFtcy5sZW5ndGgpLAogICAgICAgICAgdG9vbHRpcDogewogICAgICAgICAgICB0cmlnZ2VyOiAnYXhpcycsCiAgICAgICAgICAgIGF4aXNQb2ludGVyOiB7CiAgICAgICAgICAgICAgdHlwZTogJ3NoYWRvdycKICAgICAgICAgICAgfSwKICAgICAgICAgICAgZm9ybWF0dGVyOiBmdW5jdGlvbiAocGFyYW1zKSB7CiAgICAgICAgICAgICAgcmV0dXJuIHRvb2x0aXBGb3JtYXR0ZXIocGFyYW1zKQogICAgICAgICAgICB9CiAgICAgICAgICB9LAogICAgICAgICAgZ3JpZDogewogICAgICAgICAgICBsZWZ0OiAnMyUnLAogICAgICAgICAgICByaWdodDogJzQlJywKICAgICAgICAgICAgYm90dG9tOiAnMyUnLAogICAgICAgICAgICB0b3A6ICczMCUnLAogICAgICAgICAgICBjb250YWluTGFiZWw6IHRydWUKICAgICAgICAgIH0sCiAgICAgICAgICBkYXRhWm9vbTogWwogICAgICAgICAgICB7CiAgICAgICAgICAgICAgdHlwZTogJ2luc2lkZScsIC8vIEFsbG93cyBzY3JvbGxpbmcgd2l0aCBtb3VzZSBvciB0b3VjaCBnZXN0dXJlcwogICAgICAgICAgICAgIHhBeGlzSW5kZXg6IDAsCiAgICAgICAgICAgICAgc3RhcnQ6IHN0YXJ0UGVyY2VudGFnZSwKICAgICAgICAgICAgICBlbmQ6IGVuZFBlcmNlbnRhZ2UKICAgICAgICAgICAgfQogICAgICAgICAgXSwKICAgICAgICAgIHhBeGlzOiB7CiAgICAgICAgICAgIHR5cGU6ICdjYXRlZ29yeScsCiAgICAgICAgICAgIGF4aXNMYWJlbDogeyBpbnRlcnZhbDogMCwgcm90YXRlOiAzMCB9LAogICAgICAgICAgICBkYXRhOiBkYXRhLndlZWtzLm1hcCgodmFsdWUsIGluZGV4KSA9PgogICAgICAgICAgICAgIGRhdGVGbnMuZm9ybWF0KG5ldyBEYXRlKHZhbHVlLmZpcnN0RGF5KSwgJ0xMTCBkbycpCiAgICAgICAgICAgICkKICAgICAgICAgIH0sCiAgICAgICAgICB5QXhpczogewogICAgICAgICAgICB0eXBlOiAndmFsdWUnLAogICAgICAgICAgICBtaW46IDAsCiAgICAgICAgICAgIG1heDogcm91bmRVcEhpZ2hlc3QKICAgICAgICAgIH0sCiAgICAgICAgICBzZXJpZXM6IFsKICAgICAgICAgICAgLi4uZGF0YS5zdHJlYW1zLm1hcCgoc3RyZWFtLCBpbmRleCkgPT4gewogICAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgICBuYW1lOiBzdHJlYW0ubmFtZSwKICAgICAgICAgICAgICAgIHR5cGU6ICdsaW5lJywKICAgICAgICAgICAgICAgIGRhdGE6IHN0cmVhbS53ZWVrcy5tYXAoCiAgICAgICAgICAgICAgICAgICh2YWx1ZSwgaW5kZXgpID0+IHZhbHVlLm1ldHJpY3NbbWV0cmljXS52ZWxvY2l0eQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSksCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICBuYW1lOiAnVG90YWwnLAogICAgICAgICAgICAgIHR5cGU6ICdsaW5lJywKICAgICAgICAgICAgICBkYXRhOiBkYXRhLndlZWtzLm1hcCgKICAgICAgICAgICAgICAgICh3ZWVrLCBpbmRleCkgPT4gd2Vlay5tZXRyaWNzW21ldHJpY10udmVsb2NpdHkKICAgICAgICAgICAgICApCiAgICAgICAgICAgIH0KICAgICAgICAgIF0KICAgICAgICB9CgogICAgICAgIC8vIEFwcGx5IG9wdGlvbnMgdG8gY2hhcnQKICAgICAgICBteUNoYXJ0LnNldE9wdGlvbihvcHRpb24pCgogICAgICAgIC8vIE1ha2UgY2hhcnQgcmVzcG9uc2l2ZQogICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBteUNoYXJ0LnJlc2l6ZSgpCiAgICAgICAgfSkKCiAgICAgICAgcmV0dXJuIG15Q2hhcnQKICAgICAgfQoKICAgICAgZnVuY3Rpb24gY3JlYXRlRWZmb3J0RGlzdHJpYnV0aW9uQ2hhcnQoZWxlbWVudElkLCBkYXRhLCBtZXRyaWMpIHsKICAgICAgICBjb25zdCBjaGFydERvbSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGVsZW1lbnRJZCkKICAgICAgICBjb25zdCBteUNoYXJ0ID0gZWNoYXJ0cy5pbml0KGNoYXJ0RG9tKQoKICAgICAgICBjb25zdCB2aXNpYmxlQ291bnQgPSAyMAogICAgICAgIGNvbnN0IHN0YXJ0UGVyY2VudGFnZSA9CiAgICAgICAgICAoKGRhdGEud2Vla3MubGVuZ3RoIC0gdmlzaWJsZUNvdW50KSAvIGRhdGEud2Vla3MubGVuZ3RoKSAqIDEwMAogICAgICAgIGNvbnN0IGVuZFBlcmNlbnRhZ2UgPSAxMDAKCiAgICAgICAgY29uc3QgY2hhcnRUaXRsZSA9ICdFZmZvcnQgRGlzdHJpYnV0aW9uICglKScKCiAgICAgICAgY29uc3Qgb3B0aW9uID0gewogICAgICAgICAgdGl0bGU6IHsKICAgICAgICAgICAgdGV4dDogY2hhcnRUaXRsZSwKICAgICAgICAgICAgcG9zaXRpb246ICd0b3AnLAogICAgICAgICAgICBsZWZ0OiAnY2VudGVyJywKICAgICAgICAgICAgdGV4dFN0eWxlOiB7CiAgICAgICAgICAgICAgZm9udFNpemU6IDE0CiAgICAgICAgICAgIH0KICAgICAgICAgIH0sCiAgICAgICAgICBsZWdlbmQ6IGdldExlZ2VuZChkYXRhLnN0cmVhbXMubGVuZ3RoKSwKICAgICAgICAgIHRvb2x0aXA6IHsKICAgICAgICAgICAgdHJpZ2dlcjogJ2F4aXMnLAogICAgICAgICAgICBheGlzUG9pbnRlcjogewogICAgICAgICAgICAgIHR5cGU6ICdzaGFkb3cnCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGZvcm1hdHRlcjogZnVuY3Rpb24gKHBhcmFtcykgewogICAgICAgICAgICAgIHJldHVybiB0b29sdGlwRm9ybWF0dGVyKHBhcmFtcywgJyUnKQogICAgICAgICAgICB9CiAgICAgICAgICB9LAogICAgICAgICAgZ3JpZDogewogICAgICAgICAgICBsZWZ0OiAnMyUnLAogICAgICAgICAgICByaWdodDogJzQlJywKICAgICAgICAgICAgYm90dG9tOiAnMyUnLAogICAgICAgICAgICB0b3A6ICczMCUnLAogICAgICAgICAgICBjb250YWluTGFiZWw6IHRydWUKICAgICAgICAgIH0sCiAgICAgICAgICBkYXRhWm9vbTogWwogICAgICAgICAgICB7CiAgICAgICAgICAgICAgdHlwZTogJ2luc2lkZScsIC8vIEFsbG93cyBzY3JvbGxpbmcgd2l0aCBtb3VzZSBvciB0b3VjaCBnZXN0dXJlcwogICAgICAgICAgICAgIHhBeGlzSW5kZXg6IDAsCiAgICAgICAgICAgICAgc3RhcnQ6IHN0YXJ0UGVyY2VudGFnZSwKICAgICAgICAgICAgICBlbmQ6IGVuZFBlcmNlbnRhZ2UKICAgICAgICAgICAgfQogICAgICAgICAgXSwKICAgICAgICAgIHhBeGlzOiB7CiAgICAgICAgICAgIHR5cGU6ICdjYXRlZ29yeScsCiAgICAgICAgICAgIGF4aXNMYWJlbDogeyBpbnRlcnZhbDogMCwgcm90YXRlOiAzMCB9LAogICAgICAgICAgICBkYXRhOiBkYXRhLndlZWtzLm1hcCgodmFsdWUsIGluZGV4KSA9PgogICAgICAgICAgICAgIGRhdGVGbnMuZm9ybWF0KG5ldyBEYXRlKHZhbHVlLmZpcnN0RGF5KSwgJ0xMTCBkbycpCiAgICAgICAgICAgICkKICAgICAgICAgIH0sCiAgICAgICAgICB5QXhpczogewogICAgICAgICAgICB0eXBlOiAndmFsdWUnLAogICAgICAgICAgICBtaW46IDAsCiAgICAgICAgICAgIG1heDogMTAwCiAgICAgICAgICB9LAogICAgICAgICAgc2VyaWVzOiBbCiAgICAgICAgICAgIC4uLmRhdGEuc3RyZWFtcy5tYXAoKHN0cmVhbSwgaW5kZXgpID0+IHsKICAgICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgICAgbmFtZTogc3RyZWFtLm5hbWUsCiAgICAgICAgICAgICAgICB0eXBlOiAnYmFyJywKICAgICAgICAgICAgICAgIHN0YWNrOiAnYWQnLAogICAgICAgICAgICAgICAgZGF0YTogc3RyZWFtLndlZWtzLm1hcCgKICAgICAgICAgICAgICAgICAgKHZhbHVlLCBpbmRleCkgPT4gdmFsdWUubWV0cmljc1ttZXRyaWNdLmRpc3RyaWJ1dGlvbgogICAgICAgICAgICAgICAgKSwKICAgICAgICAgICAgICAgIGJhcldpZHRoOiAnMTAwJScsIC8vIEVuc3VyZXMgYmFycyBmaWxsIHRoZWlyIGFsbG9jYXRlZCBzcGFjZQogICAgICAgICAgICAgICAgYmFyR2FwOiAnMCUnLCAvLyBSZW1vdmVzIHNwYWNpbmcgYmV0d2VlbiBzZXJpZXMgKGlmIG11bHRpcGxlKQogICAgICAgICAgICAgICAgYmFyQ2F0ZWdvcnlHYXA6ICcwJScgLy8gUmVtb3ZlcyBzcGFjaW5nIGJldHdlZW4gY2F0ZWdvcmllcwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSkKICAgICAgICAgIF0KICAgICAgICB9CgogICAgICAgIC8vIEFwcGx5IG9wdGlvbnMgdG8gY2hhcnQKICAgICAgICBteUNoYXJ0LnNldE9wdGlvbihvcHRpb24pCgogICAgICAgIC8vIEFkZCBjbGljayBldmVudCBmb3IgaW50ZXJhY3Rpdml0eQogICAgICAgIG15Q2hhcnQub24oJ2NsaWNrJywgZnVuY3Rpb24gKHBhcmFtcykgewogICAgICAgICAgY29uc3Qgc3RyZWFtTmFtZSA9IHBhcmFtcy5zZXJpZXNOYW1lCiAgICAgICAgICBjb25zdCBzdHJlYW1JbmRleCA9IHBhcmFtcy5kYXRhSW5kZXgKICAgICAgICAgIGNvbnN0IHN0cmVhbSA9IGRhdGEuc3RyZWFtcy5maW5kKAogICAgICAgICAgICAoc3RyZWFtKSA9PiBzdHJlYW0ubmFtZSA9PT0gc3RyZWFtTmFtZQogICAgICAgICAgKQogICAgICAgICAgaWYgKHN0cmVhbSAmJiBzdHJlYW0ud2Vla3Nbc3RyZWFtSW5kZXhdKSB7CiAgICAgICAgICAgIHVwZGF0ZVRhYmxlKHsKICAgICAgICAgICAgICBzcmNDaGFydDogY2hhcnRUaXRsZSwKICAgICAgICAgICAgICBzZWxlY3Rpb246IGAke3N0cmVhbU5hbWV9IG9uICR7ZGF0ZUZucy5mb3JtYXQobmV3IERhdGUoc3RyZWFtLndlZWtzW3N0cmVhbUluZGV4XS5maXJzdERheSksICdMTEwgZG8nKX0gKCR7c3RyZWFtLndlZWtzW3N0cmVhbUluZGV4XS5ub2Rlcy5sZW5ndGh9IG5vZGVzKWAsCiAgICAgICAgICAgICAgbm9kZXM6IHN0cmVhbS53ZWVrc1tzdHJlYW1JbmRleF0ubm9kZXMKICAgICAgICAgICAgfSkKICAgICAgICAgIH0KICAgICAgICB9KQoKICAgICAgICAvLyBNYWtlIGNoYXJ0IHJlc3BvbnNpdmUKICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgZnVuY3Rpb24gKCkgewogICAgICAgICAgbXlDaGFydC5yZXNpemUoKQogICAgICAgIH0pCgogICAgICAgIHJldHVybiBteUNoYXJ0CiAgICAgIH0KCiAgICAgIGZ1bmN0aW9uIHRvZ2dsZVZpZXdNb2RlKCkgewogICAgICAgIGNvbnN0IHN3aXRjaEVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndmlldy1tb2RlLXN3aXRjaCcpCgogICAgICAgIHVwZGF0ZUFsbENoYXJ0cyhzd2l0Y2hFbGVtZW50LmNoZWNrZWQgPyAnbm9kZXMnIDogJ3BvaW50cycpCiAgICAgIH0KCiAgICAgIGNvbnN0IGZpbHRlcmVkRGF0YXNldCA9IChncm91cE1ldHJpY3MpID0+IHsKICAgICAgICBpZiAoZ3JvdXBNZXRyaWNzLnF1ZXJ5ID09PSB1bmRlZmluZWQpIHsKICAgICAgICAgIHJldHVybiAnJwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICByZXR1cm4gYE92ZXJhbGwgcHJvamVjdCBkYXRhIGZpbHRlcmVkOiAke0pTT04uc3RyaW5naWZ5KGdyb3VwTWV0cmljcy5xdWVyeSl9ICA8YnIgLz5gCiAgICAgICAgfQogICAgICB9CgogICAgICAvLyBGdW5jdGlvbiB0byBpbml0aWFsaXplIHRoZSBkYXNoYm9hcmQgbWV0YWRhdGEKICAgICAgZnVuY3Rpb24gaW5pdGlhbGl6ZURhc2hib2FyZCgpIHsKICAgICAgICAvLyBTZXQgZGFzaGJvYXJkIHRpdGxlIGFuZCBtZXRhZGF0YSBmcm9tIHRoZSBkYXRhIG9iamVjdAogICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkYXNoYm9hcmQtdGl0bGUnKS50ZXh0Q29udGVudCA9CiAgICAgICAgICBncm91cE1ldHJpY3MubmFtZQogICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkYXNoYm9hcmQtZGVzY3JpcHRpb24nKS50ZXh0Q29udGVudCA9CiAgICAgICAgICBncm91cE1ldHJpY3MuZGVzY3JpcHRpb24KCiAgICAgICAgaWYgKGdyb3VwTWV0cmljcy5xdWVyeSA9PT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGFzaGJvYXJkLXByb2plY3RmaWx0ZXInKS50ZXh0Q29udGVudCA9ICcnCiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkYXNoYm9hcmQtcHJvamVjdGZpbHRlcicpLnRleHRDb250ZW50ID0KICAgICAgICAgICAgYE92ZXJhbGwgcHJvamVjdCBkYXRhIGZpbHRlcmVkOiAke0pTT04uc3RyaW5naWZ5KGdyb3VwTWV0cmljcy5xdWVyeSl9YAogICAgICAgIH0KCiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Rhc2hib2FyZC1tZXRhZGF0YScpLnRleHRDb250ZW50ID0KICAgICAgICAgIGBMYXN0IHVwZGF0ZWQ6ICR7Z3JvdXBNZXRyaWNzLnVwZGF0ZWRBdH1gCgogICAgICAgIGNvbnN0IGRlZmF1bHRNZXRyaWMgPQogICAgICAgICAgZ3JvdXBNZXRyaWNzLmRlZmF1bHRNZXRyaWMgIT09IHVuZGVmaW5lZAogICAgICAgICAgICA/IGdyb3VwTWV0cmljcy5kZWZhdWx0TWV0cmljCiAgICAgICAgICAgIDogJ3BvaW50cycKCiAgICAgICAgdXBkYXRlQWxsQ2hhcnRzKGRlZmF1bHRNZXRyaWMpCgogICAgICAgIC8vIFNldCB1cCBldmVudCBsaXN0ZW5lciBmb3IgdmlldyBtb2RlIHN3aXRjaAogICAgICAgIGNvbnN0IHN3aXRjaEVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndmlldy1tb2RlLXN3aXRjaCcpCiAgICAgICAgc3dpdGNoRWxlbWVudC5jaGVja2VkID0gZGVmYXVsdE1ldHJpYyA9PT0gJ25vZGVzJwoKICAgICAgICBzd2l0Y2hFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIHRvZ2dsZVZpZXdNb2RlKQoKICAgICAgICB1cGRhdGVTdHJlYW1zVGFibGUoZ3JvdXBNZXRyaWNzKQogICAgICB9CgogICAgICBmdW5jdGlvbiB1cGRhdGVBbGxDaGFydHMobWV0cmljKSB7CiAgICAgICAgY29uc29sZS5sb2coJ1VwZGF0aW5nIGFsbCBjaGFydHMgdG8gZGlzcGxheSBtZXRyaWM6JywgbWV0cmljKQogICAgICAgIGNyZWF0ZVdlZWtseUNvbXBsZXRpb25DaGFydCgKICAgICAgICAgICd3ZWVrbHljb21wbGV0aW9uY2hhcnQnLAogICAgICAgICAgZ3JvdXBNZXRyaWNzLAogICAgICAgICAgbWV0cmljCiAgICAgICAgKQoKICAgICAgICBjcmVhdGVXZWVrbHlWZWxvY2l0eUNoYXJ0KCd3ZWVrbHl2ZWxvY2l0eWNoYXJ0JywgZ3JvdXBNZXRyaWNzLCBtZXRyaWMpCgogICAgICAgIGNyZWF0ZUVmZm9ydERpc3RyaWJ1dGlvbkNoYXJ0KAogICAgICAgICAgJ2VmZm9ydGRpc3RyaWJ1dGlvbmNoYXJ0JywKICAgICAgICAgIGdyb3VwTWV0cmljcywKICAgICAgICAgIG1ldHJpYwogICAgICAgICkKICAgICAgfQoKICAgICAgLy8gSW5pdGlhbGl6ZSBhbGwgY2hhcnRzIHdoZW4gRE9NIGlzIGxvYWRlZAogICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgaW5pdGlhbGl6ZURhc2hib2FyZCkKICAgIDwvc2NyaXB0PgogIDwvYm9keT4KPC9odG1sPgo='

export default tpl
