export const tpl =
  'PCFkb2N0eXBlIGh0bWw+CjxodG1sIGxhbmc9ImVuIj4KICA8aGVhZD4KICAgIDxtZXRhIGNoYXJzZXQ9IlVURi04IiAvPgogICAgPG1ldGEgbmFtZT0idmlld3BvcnQiIGNvbnRlbnQ9IndpZHRoPWRldmljZS13aWR0aCwgaW5pdGlhbC1zY2FsZT0xLjAiIC8+CiAgICA8dGl0bGU+UHJvamVjdHMgQWN0aXZpdHk8L3RpdGxlPgogICAgPHNjcmlwdCBzcmM9Imh0dHBzOi8vY2RuLmpzZGVsaXZyLm5ldC9ucG0vZWNoYXJ0c0A1LjQuMy9kaXN0L2VjaGFydHMubWluLmpzIj48L3NjcmlwdD4KICAgIDxzY3JpcHQgc3JjPSJodHRwczovL2Nkbi5qc2RlbGl2ci5uZXQvbnBtL2RhdGUtZm5zQDQuMS4wL2Nkbi5taW4uanMiPjwvc2NyaXB0PgogICAgPHN0eWxlPgogICAgICBib2R5IHsKICAgICAgICBmb250LWZhbWlseTogQXJpYWwsIHNhbnMtc2VyaWY7CiAgICAgICAgbWFyZ2luOiAyMHB4OwogICAgICAgIGNvbG9yOiAjMzMzOwogICAgICB9CiAgICAgIC5jb250YWluZXIgewogICAgICAgIG1heC13aWR0aDogMTgwMHB4OwogICAgICAgIG1hcmdpbjogMCBhdXRvOwogICAgICB9CiAgICAgIC5kYXNoYm9hcmQtaGVhZGVyIHsKICAgICAgICBkaXNwbGF5OiBmbGV4OwogICAgICAgIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjsKICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyOwogICAgICAgIG1hcmdpbi1ib3R0b206IDEwcHg7CiAgICAgIH0KICAgICAgLmRhc2hib2FyZC10aXRsZSB7CiAgICAgICAgbWFyZ2luOiAwOwogICAgICB9CiAgICAgIC5yb3cgewogICAgICAgIGRpc3BsYXk6IGZsZXg7CiAgICAgICAgbWFyZ2luLWJvdHRvbTogMzBweDsKICAgICAgICBnYXA6IDIwcHg7CiAgICAgIH0KICAgICAgLmNoYXJ0LWNvbnRhaW5lciB7CiAgICAgICAgZmxleDogMTsKICAgICAgICBoZWlnaHQ6IDMwMHB4OwogICAgICAgIGJvcmRlcjogMXB4IHNvbGlkICNlYWVhZWE7CiAgICAgICAgYm9yZGVyLXJhZGl1czogNXB4OwogICAgICAgIGJveC1zaGFkb3c6IDAgMnB4IDhweCByZ2JhKDAsIDAsIDAsIDAuMSk7CiAgICAgIH0KICAgICAgdGFibGUgewogICAgICAgIHdpZHRoOiAxMDAlOwogICAgICAgIGJvcmRlci1jb2xsYXBzZTogY29sbGFwc2U7CiAgICAgICAgbWFyZ2luLXRvcDogMTBweDsKICAgICAgICBib3gtc2hhZG93OiAwIDJweCA4cHggcmdiYSgwLCAwLCAwLCAwLjEpOwogICAgICB9CiAgICAgIHRoLAogICAgICB0ZCB7CiAgICAgICAgcGFkZGluZzogMTJweCAxNXB4OwogICAgICAgIHRleHQtYWxpZ246IGxlZnQ7CiAgICAgICAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkICNkZGQ7CiAgICAgIH0KICAgICAgdGggewogICAgICAgIGJhY2tncm91bmQtY29sb3I6ICNmOGY4Zjg7CiAgICAgICAgZm9udC13ZWlnaHQ6IGJvbGQ7CiAgICAgIH0KICAgICAgdHI6aG92ZXIgewogICAgICAgIGJhY2tncm91bmQtY29sb3I6ICNmNWY1ZjU7CiAgICAgIH0KICAgICAgYSB7CiAgICAgICAgY29sb3I6ICMxYTczZTg7CiAgICAgICAgdGV4dC1kZWNvcmF0aW9uOiBub25lOwogICAgICB9CiAgICAgIGE6aG92ZXIgewogICAgICAgIHRleHQtZGVjb3JhdGlvbjogdW5kZXJsaW5lOwogICAgICB9CiAgICAgIC50YWJsZS1jb250YWluZXIgewogICAgICAgIG1hcmdpbi10b3A6IDIwcHg7CiAgICAgICAgYm9yZGVyOiAxcHggc29saWQgI2VhZWFlYTsKICAgICAgICBib3JkZXItcmFkaXVzOiA1cHg7CiAgICAgICAgcGFkZGluZzogMTVweDsKICAgICAgICBib3gtc2hhZG93OiAwIDJweCA4cHggcmdiYSgwLCAwLCAwLCAwLjEpOwogICAgICB9CiAgICAgIC50YWJsZS1mb290ZXIgewogICAgICAgIGRpc3BsYXk6IGZsZXg7CiAgICAgICAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuOwogICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7CiAgICAgICAgbWFyZ2luLXRvcDogMTBweDsKICAgICAgICBtYXJnaW4tYm90dG9tOiA1cHg7CiAgICAgIH0KICAgICAgLnRhYmxlLWhlYWRlciB7CiAgICAgICAgZGlzcGxheTogZmxleDsKICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47CiAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjsKICAgICAgICBtYXJnaW4tYm90dG9tOiAxMHB4OwogICAgICB9CiAgICAgIGgyLAogICAgICBoMyB7CiAgICAgICAgbWFyZ2luOiAwOwogICAgICAgIGNvbG9yOiAjNDQ0OwogICAgICB9CiAgICAgIC5zb3VyY2UtZGVzY3JpcHRpb24gewogICAgICAgIGZvbnQtc3R5bGU6IGl0YWxpYzsKICAgICAgICBjb2xvcjogIzY2NjsKICAgICAgfQogICAgICAuc291cmNlLWluZm8gewogICAgICAgIGZvbnQtc3R5bGU6IGl0YWxpYzsKICAgICAgICBmb250LXNpemU6IHNtYWxsZXI7CiAgICAgICAgY29sb3I6ICM2NjY7CiAgICAgIH0KICAgICAgLyogU3dpdGNoIGJ1dHRvbiBzdHlsZXMgKi8KICAgICAgLnN3aXRjaC1jb250YWluZXIgewogICAgICAgIGRpc3BsYXk6IGZsZXg7CiAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjsKICAgICAgfQogICAgICAuc3dpdGNoLWxhYmVsIHsKICAgICAgICBtYXJnaW46IDAgMTBweDsKICAgICAgICBmb250LXdlaWdodDogYm9sZDsKICAgICAgICBmb250LXNpemU6IDE0cHg7CiAgICAgIH0KICAgICAgLnN3aXRjaCB7CiAgICAgICAgcG9zaXRpb246IHJlbGF0aXZlOwogICAgICAgIGRpc3BsYXk6IGlubGluZS1ibG9jazsKICAgICAgICB3aWR0aDogNjBweDsKICAgICAgICBoZWlnaHQ6IDI4cHg7CiAgICAgIH0KICAgICAgLnN3aXRjaCBpbnB1dCB7CiAgICAgICAgb3BhY2l0eTogMDsKICAgICAgICB3aWR0aDogMDsKICAgICAgICBoZWlnaHQ6IDA7CiAgICAgIH0KICAgICAgLnNsaWRlciB7CiAgICAgICAgcG9zaXRpb246IGFic29sdXRlOwogICAgICAgIGN1cnNvcjogcG9pbnRlcjsKICAgICAgICB0b3A6IDA7CiAgICAgICAgbGVmdDogMDsKICAgICAgICByaWdodDogMDsKICAgICAgICBib3R0b206IDA7CiAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogI2NjYzsKICAgICAgICB0cmFuc2l0aW9uOiAwLjRzOwogICAgICAgIGJvcmRlci1yYWRpdXM6IDM0cHg7CiAgICAgIH0KICAgICAgLnNsaWRlcjpiZWZvcmUgewogICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICAgICAgICBjb250ZW50OiAnJzsKICAgICAgICBoZWlnaHQ6IDIwcHg7CiAgICAgICAgd2lkdGg6IDIwcHg7CiAgICAgICAgbGVmdDogNHB4OwogICAgICAgIGJvdHRvbTogNHB4OwogICAgICAgIGJhY2tncm91bmQtY29sb3I6IHdoaXRlOwogICAgICAgIHRyYW5zaXRpb246IDAuNHM7CiAgICAgICAgYm9yZGVyLXJhZGl1czogNTAlOwogICAgICB9CiAgICAgIGlucHV0OmNoZWNrZWQgKyAuc2xpZGVyIHsKICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjMjE5NmYzOwogICAgICB9CiAgICAgIGlucHV0OmZvY3VzICsgLnNsaWRlciB7CiAgICAgICAgYm94LXNoYWRvdzogMCAwIDFweCAjMjE5NmYzOwogICAgICB9CiAgICAgIGlucHV0OmNoZWNrZWQgKyAuc2xpZGVyOmJlZm9yZSB7CiAgICAgICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVYKDMycHgpOwogICAgICB9CiAgICAgIC52aWV3LW1vZGUgewogICAgICAgIG1hcmdpbi1sZWZ0OiA4cHg7CiAgICAgICAgZm9udC13ZWlnaHQ6IGJvbGQ7CiAgICAgICAgbWluLXdpZHRoOiA5MHB4OwogICAgICB9CiAgICA8L3N0eWxlPgogIDwvaGVhZD4KICA8Ym9keT4KICAgIDxhIGhyZWY9ImluZGV4Lmh0bWwiPvCflJk8L2E+CiAgICA8ZGl2IGNsYXNzPSJjb250YWluZXIiPgogICAgICA8ZGl2IGNsYXNzPSJkYXNoYm9hcmQtaGVhZGVyIj4KICAgICAgICA8aDIgaWQ9ImRhc2hib2FyZC10aXRsZSIgY2xhc3M9ImRhc2hib2FyZC10aXRsZSI+PC9oMj4KICAgICAgICA8ZGl2IGNsYXNzPSJzd2l0Y2gtY29udGFpbmVyIj4KICAgICAgICAgIDxzcGFuIGNsYXNzPSJzd2l0Y2gtbGFiZWwiPlN0b3J5IFBvaW50czwvc3Bhbj4KICAgICAgICAgIDxsYWJlbCBjbGFzcz0ic3dpdGNoIj4KICAgICAgICAgICAgPGlucHV0IHR5cGU9ImNoZWNrYm94IiBpZD0idmlldy1tb2RlLXN3aXRjaCIgLz4KICAgICAgICAgICAgPHNwYW4gY2xhc3M9InNsaWRlciI+PC9zcGFuPgogICAgICAgICAgPC9sYWJlbD4KICAgICAgICAgIDxzcGFuIGNsYXNzPSJzd2l0Y2gtbGFiZWwiPkNvdW50PC9zcGFuPgogICAgICAgIDwvZGl2PgogICAgICA8L2Rpdj4KICAgICAgPHAgY2xhc3M9InNvdXJjZS1kZXNjcmlwdGlvbiIgaWQ9ImRhc2hib2FyZC1kZXNjcmlwdGlvbiI+PC9wPgogICAgICA8cCBjbGFzcz0ic291cmNlLWluZm8iIGlkPSJkYXNoYm9hcmQtbWV0YWRhdGEiPjwvcD4KCiAgICAgIDxkaXYgY2xhc3M9InJvdyI+CiAgICAgICAgPGRpdiBjbGFzcz0iY2hhcnQtY29udGFpbmVyIiBpZD0id2Vla2x5Y29tcGxldGlvbmNoYXJ0Ij48L2Rpdj4KICAgICAgICA8ZGl2IGNsYXNzPSJjaGFydC1jb250YWluZXIiIGlkPSJ3ZWVrbHl2ZWxvY2l0eWNoYXJ0Ij48L2Rpdj4KICAgICAgICA8ZGl2IGNsYXNzPSJjaGFydC1jb250YWluZXIiIGlkPSJlZmZvcnRkaXN0cmlidXRpb25jaGFydCI+PC9kaXY+CiAgICAgIDwvZGl2PgoKICAgICAgPGRpdiBjbGFzcz0idGFibGUtY29udGFpbmVyIj4KICAgICAgICA8ZGl2IGNsYXNzPSJ0YWJsZS1oZWFkZXIiPgogICAgICAgICAgPGgzIGlkPSJ0YWJsZS10aXRsZSI+PC9oMz4KICAgICAgICAgIDxzcGFuIGlkPSJzZWxlY3RlZC1zb3VyY2UiCiAgICAgICAgICAgID5DbGljayBvbiBhbnkgY2hhcnQgYmFyIHRvIHNlZSBkZXRhaWxzPC9zcGFuCiAgICAgICAgICA+CiAgICAgICAgPC9kaXY+CiAgICAgICAgPHRhYmxlPgogICAgICAgICAgPHRoZWFkPgogICAgICAgICAgICA8dHI+CiAgICAgICAgICAgICAgPHRoPiM8L3RoPgogICAgICAgICAgICAgIDx0aD5UaXRsZTwvdGg+CiAgICAgICAgICAgICAgPHRoPlR5cGU8L3RoPgogICAgICAgICAgICAgIDx0aD5SZXBvPC90aD4KICAgICAgICAgICAgICA8dGg+TWlsZXN0b25lPC90aD4KICAgICAgICAgICAgICA8dGg+UG9pbnRzPC90aD4KICAgICAgICAgICAgPC90cj4KICAgICAgICAgIDwvdGhlYWQ+CiAgICAgICAgICA8dGJvZHkgaWQ9ImRldGFpbHMtdGFibGUiPgogICAgICAgICAgICA8dHI+CiAgICAgICAgICAgICAgPHRkIGNvbHNwYW49IjMiPk5vIGRhdGEgc2VsZWN0ZWQ8L3RkPgogICAgICAgICAgICA8L3RyPgogICAgICAgICAgPC90Ym9keT4KICAgICAgICA8L3RhYmxlPgogICAgICA8L2Rpdj4KCiAgICAgIDxwIGNsYXNzPSJzb3VyY2UtaW5mbyIgaWQ9ImRhc2hib2FyZC1wcm9qZWN0ZmlsdGVyIj48L3A+CgogICAgICA8ZGl2IGNsYXNzPSJ0YWJsZS1jb250YWluZXIiPgogICAgICAgIDxkaXYgY2xhc3M9InRhYmxlLWhlYWRlciI+CiAgICAgICAgICA8aDM+RGF0YSBTdHJlYW1zPC9oMz4KICAgICAgICA8L2Rpdj4KICAgICAgICA8dGFibGU+CiAgICAgICAgICA8dGhlYWQ+CiAgICAgICAgICAgIDx0cj4KICAgICAgICAgICAgICA8dGg+TmFtZTwvdGg+CiAgICAgICAgICAgICAgPHRoPkRlc2NyaXB0aW9uPC90aD4KICAgICAgICAgICAgICA8dGg+UXVlcnk8L3RoPgogICAgICAgICAgICAgIDx0aD5Ob2RlczwvdGg+CiAgICAgICAgICAgIDwvdHI+CiAgICAgICAgICA8L3RoZWFkPgogICAgICAgICAgPHRib2R5IGlkPSJkZXRhaWxzLXRhYmxlLXN0cmVhbSI+CiAgICAgICAgICAgIDx0cj4KICAgICAgICAgICAgICA8dGQgY29sc3Bhbj0iMyI+Tm8gZGF0YSBzZWxlY3RlZDwvdGQ+CiAgICAgICAgICAgIDwvdHI+CiAgICAgICAgICA8L3Rib2R5PgogICAgICAgIDwvdGFibGU+CiAgICAgICAgPGRpdiBjbGFzcz0idGFibGUtZm9vdGVyIj4KICAgICAgICAgIDxzcGFuCiAgICAgICAgICAgID48aQogICAgICAgICAgICAgID5TdHJlYW1zIGFyZSBxdWVyaWVzIGV4ZWN1dGVkIGFnYWluc3QgQUxMIElzc3VlcyBhbmQgUHVsbCBSZXF1ZXN0cwogICAgICAgICAgICAgIChQUikgYXR0YWNoZWQgdG8gdGhlIHNlbGVjdGVkIHByb2plY3QuIDxiciAvPgogICAgICAgICAgICAgIFRoZWlyIG9yZGVyIG1hdHRlcnMsIGlmIGEgSXNzdWUgb3IgUFIgaXMgcHJlc2VudCBpbiB0aGUgZmlyc3QKICAgICAgICAgICAgICBzdHJlYW0sIGl0IHdpbGwgYmUgaWdub3JlZCBvbiB0aGUgZm9sbG93aW5nIHN0cmVhbXMuIFRoaXMgcHJldmVudHMKICAgICAgICAgICAgICBpc3N1ZXMvUFJzIGZyb20gYmVpbmcgY291bnRlZCBtdWx0aXBsZSB0aW1lcy48L2kKICAgICAgICAgICAgPjwvc3BhbgogICAgICAgICAgPgogICAgICAgIDwvZGl2PgogICAgICA8L2Rpdj4KICAgIDwvZGl2PgoKICAgIDxzY3JpcHQ+CiAgICAgIGNvbnN0IGJhc2U2NERlY29kZVVuaWNvZGUgPSAoYmFzZTY0U3RyaW5nKSA9PiB7CiAgICAgICAgY29uc3QgYmluYXJ5U3RyaW5nID0gd2luZG93LmF0b2IoYmFzZTY0U3RyaW5nKQogICAgICAgIGNvbnN0IGJ5dGVzID0gbmV3IFVpbnQ4QXJyYXkoYmluYXJ5U3RyaW5nLmxlbmd0aCkKCiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBiaW5hcnlTdHJpbmcubGVuZ3RoOyBpKyspIHsKICAgICAgICAgIGJ5dGVzW2ldID0gYmluYXJ5U3RyaW5nLmNoYXJDb2RlQXQoaSkKICAgICAgICB9CgogICAgICAgIHJldHVybiBuZXcgVGV4dERlY29kZXIoJ3V0Zi04JykuZGVjb2RlKGJ5dGVzKQogICAgICB9CgogICAgICAvLyBTaW5nbGUgSmF2YVNjcmlwdCBkYXRhIG9iamVjdCBjb250YWluaW5nIGFsbCBvdXIgZGF0YQogICAgICBjb25zdCBzcmNEYXRhID0gYmFzZTY0RGVjb2RlVW5pY29kZSgnUkVQTEFDRV9NRScpCiAgICAgIGNvbnN0IGdyb3VwTWV0cmljcyA9IEpTT04ucGFyc2Uoc3JjRGF0YSkKICAgICAgY29uc29sZS5sb2coJ1NvdXJjZSBkYXRhIGRlY29kZWQnLCBncm91cE1ldHJpY3MpCgogICAgICAvLyBDb3BpZWQgdG8gdGhlIHdpbmRvdyBvYmplY3QgdG8gZmFjaWxpdGF0ZSBidWlsZGluZyBvZiBxdWVyaWVzCiAgICAgIHdpbmRvdy5kYXRhTm9kZXMgPSBncm91cE1ldHJpY3Mubm9kZXMKICAgICAgd2luZG93Lmdyb3VwTWV0cmljcyA9IGdyb3VwTWV0cmljcwoKICAgICAgZG9jdW1lbnQudGl0bGUgPSBncm91cE1ldHJpY3MubmFtZQoKICAgICAgLy8gVXBkYXRlIHRoZSB0YWJsZSB3aXRoIGRhdGEgY2xpY2tlZCBpbiB0aGUgY2hhcnQKICAgICAgZnVuY3Rpb24gdXBkYXRlVGFibGUoeyBzcmNDaGFydCwgc2VsZWN0aW9uLCBub2RlcyB9KSB7CiAgICAgICAgY29uc29sZS5sb2coJ1VwZGF0aW5nIHRhYmxlIHdpdGggZGF0YSBjb21pbmcgZnJvbTonLCBzcmNDaGFydCkKCiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RhYmxlLXRpdGxlJykudGV4dENvbnRlbnQgPQogICAgICAgICAgYE5vZGVzIGZyb20gJHtzcmNDaGFydH1gCiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NlbGVjdGVkLXNvdXJjZScpLnRleHRDb250ZW50ID0KICAgICAgICAgIGBTZWxlY3Rpb246ICR7c2VsZWN0aW9ufWAKCiAgICAgICAgY29uc3QgdGFibGVCb2R5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2RldGFpbHMtdGFibGUnKQogICAgICAgIHRhYmxlQm9keS5pbm5lckhUTUwgPSAnJwoKICAgICAgICBub2Rlcy5mb3JFYWNoKChub2RlKSA9PiB7CiAgICAgICAgICBjb25zdCByb3cgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0cicpCiAgICAgICAgICByb3cuaW5uZXJIVE1MID0gYAogICAgICAgICAgICAgICAgPHRkPiR7bm9kZS5udW1iZXJ9PC90ZD4KICAgICAgICAgICAgICAgIDx0ZD48YSBocmVmPSIke25vZGUudXJsfSIgdGFyZ2V0PSJfYmxhbmsiPiR7bm9kZS50aXRsZX08L2E+PC90ZD4KICAgICAgICAgICAgICAgIDx0ZD4ke25vZGUudHlwZX08L3RkPgogICAgICAgICAgICAgICAgPHRkPjxhIGhyZWY9IiR7bm9kZS5yZXBvc2l0b3J5LnVybH0iIHRhcmdldD0iX2JsYW5rIj4ke25vZGUucmVwb3NpdG9yeS5vd25lci5sb2dpbn0vJHtub2RlLnJlcG9zaXRvcnkubmFtZX08L2E+PC90ZD4KICAgICAgICAgICAgICAgIDx0ZD4ke25vZGUubWlsZXN0b25lPy50aXRsZSA/IG5vZGUubWlsZXN0b25lPy50aXRsZSA6ICcnfTwvdGQ+CiAgICAgICAgICAgICAgICA8dGQ+JHtub2RlLnBvaW50c308L3RkPgogICAgICAgICAgICAgIGAKICAgICAgICAgIHRhYmxlQm9keS5hcHBlbmRDaGlsZChyb3cpCiAgICAgICAgfSkKICAgICAgfQoKICAgICAgZnVuY3Rpb24gdXBkYXRlU3RyZWFtc1RhYmxlKHNyY0RhdGEpIHsKICAgICAgICBjb25zdCB0YWJsZUJvZHkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGV0YWlscy10YWJsZS1zdHJlYW0nKQogICAgICAgIHRhYmxlQm9keS5pbm5lckhUTUwgPSAnJwoKICAgICAgICBzcmNEYXRhLnN0cmVhbXMuZm9yRWFjaCgoc3RyZWFtKSA9PiB7CiAgICAgICAgICBjb25zdCByb3cgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0cicpCiAgICAgICAgICByb3cuaW5uZXJIVE1MID0gYAogICAgICAgICAgICAgICAgPHRkPiR7c3RyZWFtLm5hbWV9PC90ZD4KICAgICAgICAgICAgICAgIDx0ZD4ke3N0cmVhbS5kZXNjcmlwdGlvbn08L3RkPgogICAgICAgICAgICAgICAgPHRkPiR7SlNPTi5zdHJpbmdpZnkoc3RyZWFtLnF1ZXJ5KX08L3RkPgogICAgICAgICAgICAgICAgPHRkPiR7c3RyZWFtLm5vZGVzLmxlbmd0aH08L3RkPgogICAgICAgICAgICAgIGAKICAgICAgICAgIHRhYmxlQm9keS5hcHBlbmRDaGlsZChyb3cpCiAgICAgICAgfSkKICAgICAgfQoKICAgICAgY29uc3QgdG9vbHRpcEZvcm1hdHRlciA9IChwYXJhbXMsIHVuaXQgPSAnJykgPT4gewogICAgICAgIC8vIExpbWl0IHRvb2x0aXAgdG8gdG9wIDEwIHZhbHVlcyBhdCB0aGUgcG9pbnQKICAgICAgICBjb25zdCBzb3J0ZWRQYXJhbXMgPSBbLi4ucGFyYW1zXS5zb3J0KChhLCBiKSA9PiBiLnZhbHVlIC0gYS52YWx1ZSkKICAgICAgICBjb25zdCBsaW1pdGVkID0gc29ydGVkUGFyYW1zLnNsaWNlKDAsIDEwKQoKICAgICAgICBsZXQgcmVzdWx0ID0gYCR7bGltaXRlZFswXS5heGlzVmFsdWV9PGJyPmAKICAgICAgICBsaW1pdGVkLmZvckVhY2goKHBhcmFtKSA9PiB7CiAgICAgICAgICBpZiAocGFyYW0udmFsdWUgPT09IHVuZGVmaW5lZCkgewogICAgICAgICAgICByZXR1cm4KICAgICAgICAgIH0KICAgICAgICAgIHJlc3VsdCArPSBgJHtwYXJhbS5tYXJrZXJ9ICR7cGFyYW0uc2VyaWVzTmFtZX06ICR7TWF0aC5yb3VuZChwYXJhbS52YWx1ZSl9JHt1bml0fTxicj5gCiAgICAgICAgfSkKCiAgICAgICAgaWYgKHBhcmFtcy5sZW5ndGggPiAxMCkgewogICAgICAgICAgcmVzdWx0ICs9IGA8aT4uLi4gYW5kICR7cGFyYW1zLmxlbmd0aCAtIDEwfSBtb3JlPC9pPmAKICAgICAgICB9CgogICAgICAgIHJldHVybiByZXN1bHQKICAgICAgfQoKICAgICAgY29uc3QgZ2V0TGVnZW5kID0gKHN0cmVhbXNMZW5ndGgpID0+IHsKICAgICAgICBsZXQgbGVnZW5kID0gewogICAgICAgICAgdG9wOiAndG9wJywKICAgICAgICAgIGxlZnQ6ICdjZW50ZXInLAogICAgICAgICAgdG9wOiAzMAogICAgICAgIH0KICAgICAgICBpZiAoc3RyZWFtc0xlbmd0aCA+IDgpIHsKICAgICAgICAgIGxlZ2VuZC50eXBlID0gJ3Njcm9sbCcKICAgICAgICB9CiAgICAgICAgcmV0dXJuIGxlZ2VuZAogICAgICB9CiAgICAgIGZ1bmN0aW9uIGNyZWF0ZVdlZWtseUNvbXBsZXRpb25DaGFydChlbGVtZW50SWQsIGRhdGEsIG1ldHJpYykgewogICAgICAgIGNvbnN0IGNoYXJ0RG9tID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZWxlbWVudElkKQogICAgICAgIGNvbnN0IG15Q2hhcnQgPSBlY2hhcnRzLmluaXQoY2hhcnREb20pCgogICAgICAgIGNvbnN0IHZpc2libGVDb3VudCA9IDIwCiAgICAgICAgY29uc3Qgc3RhcnRQZXJjZW50YWdlID0KICAgICAgICAgICgoZGF0YS53ZWVrcy5sZW5ndGggLSB2aXNpYmxlQ291bnQpIC8gZGF0YS53ZWVrcy5sZW5ndGgpICogMTAwCiAgICAgICAgY29uc3QgZW5kUGVyY2VudGFnZSA9IDEwMAoKICAgICAgICBjb25zdCBjaGFydFRpdGxlID0gJ1dlZWtseSBDb21wbGV0aW9uJwoKICAgICAgICBjb25zdCBoaWdoZXN0VmFsdWUgPSBNYXRoLm1heCgKICAgICAgICAgIC4uLmRhdGEud2Vla3MubWFwKCh3ZWVrKSA9PiB3ZWVrLm1ldHJpY3Mubm9kZXMuY291bnQpCiAgICAgICAgKQogICAgICAgIGNvbnN0IHJvdW5kVXBIaWdoZXN0ID0gTWF0aC5jZWlsKGhpZ2hlc3RWYWx1ZSAvIDEwKSAqIDEwCgogICAgICAgIGNvbnN0IG9wdGlvbiA9IHsKICAgICAgICAgIHRpdGxlOiB7CiAgICAgICAgICAgIHRleHQ6IGNoYXJ0VGl0bGUsCiAgICAgICAgICAgIHBvc2l0aW9uOiAndG9wJywKICAgICAgICAgICAgbGVmdDogJ2NlbnRlcicsCiAgICAgICAgICAgIHRleHRTdHlsZTogewogICAgICAgICAgICAgIGZvbnRTaXplOiAxNAogICAgICAgICAgICB9CiAgICAgICAgICB9LAogICAgICAgICAgbGVnZW5kOiBnZXRMZWdlbmQoZGF0YS5zdHJlYW1zLmxlbmd0aCksCiAgICAgICAgICB0b29sdGlwOiB7CiAgICAgICAgICAgIHRyaWdnZXI6ICdheGlzJywKICAgICAgICAgICAgYXhpc1BvaW50ZXI6IHsKICAgICAgICAgICAgICB0eXBlOiAnc2hhZG93JwogICAgICAgICAgICB9LAogICAgICAgICAgICBmb3JtYXR0ZXI6IGZ1bmN0aW9uIChwYXJhbXMpIHsKICAgICAgICAgICAgICByZXR1cm4gdG9vbHRpcEZvcm1hdHRlcihwYXJhbXMpCiAgICAgICAgICAgIH0KICAgICAgICAgIH0sCiAgICAgICAgICBncmlkOiB7CiAgICAgICAgICAgIGxlZnQ6ICczJScsCiAgICAgICAgICAgIHJpZ2h0OiAnNCUnLAogICAgICAgICAgICBib3R0b206ICczJScsCiAgICAgICAgICAgIHRvcDogJzMwJScsCiAgICAgICAgICAgIGNvbnRhaW5MYWJlbDogdHJ1ZQogICAgICAgICAgfSwKICAgICAgICAgIGRhdGFab29tOiBbCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICB0eXBlOiAnaW5zaWRlJywgLy8gQWxsb3dzIHNjcm9sbGluZyB3aXRoIG1vdXNlIG9yIHRvdWNoIGdlc3R1cmVzCiAgICAgICAgICAgICAgeEF4aXNJbmRleDogMCwKICAgICAgICAgICAgICBzdGFydDogc3RhcnRQZXJjZW50YWdlLAogICAgICAgICAgICAgIGVuZDogZW5kUGVyY2VudGFnZQogICAgICAgICAgICB9CiAgICAgICAgICBdLAogICAgICAgICAgeEF4aXM6IHsKICAgICAgICAgICAgdHlwZTogJ2NhdGVnb3J5JywKICAgICAgICAgICAgYXhpc0xhYmVsOiB7IGludGVydmFsOiAwLCByb3RhdGU6IDMwIH0sCiAgICAgICAgICAgIGRhdGE6IGRhdGEud2Vla3MubWFwKCh2YWx1ZSwgaW5kZXgpID0+CiAgICAgICAgICAgICAgZGF0ZUZucy5mb3JtYXQobmV3IERhdGUodmFsdWUuZmlyc3REYXkpLCAnTExMIGRvJykKICAgICAgICAgICAgKQogICAgICAgICAgfSwKICAgICAgICAgIHlBeGlzOiB7CiAgICAgICAgICAgIHR5cGU6ICd2YWx1ZScsCiAgICAgICAgICAgIG1pbjogMCwKICAgICAgICAgICAgbWF4OiByb3VuZFVwSGlnaGVzdAogICAgICAgICAgfSwKICAgICAgICAgIHNlcmllczogWwogICAgICAgICAgICAuLi5kYXRhLnN0cmVhbXMubWFwKChzdHJlYW0sIGluZGV4KSA9PiB7CiAgICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgIG5hbWU6IHN0cmVhbS5uYW1lLAogICAgICAgICAgICAgICAgdHlwZTogJ2JhcicsCiAgICAgICAgICAgICAgICBzdGFjazogJ2FkJywKICAgICAgICAgICAgICAgIGRhdGE6IHN0cmVhbS53ZWVrcy5tYXAoCiAgICAgICAgICAgICAgICAgICh2YWx1ZSwgaW5kZXgpID0+IHZhbHVlLm1ldHJpY3NbbWV0cmljXS5jb3VudAogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSksCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICBuYW1lOiAnVG90YWwnLAogICAgICAgICAgICAgIHR5cGU6ICdsaW5lJywKICAgICAgICAgICAgICBkYXRhOiBkYXRhLndlZWtzLm1hcCgod2VlaywgaW5kZXgpID0+IHdlZWsubWV0cmljc1ttZXRyaWNdLmNvdW50KQogICAgICAgICAgICB9CiAgICAgICAgICBdCiAgICAgICAgfQoKICAgICAgICAvLyBBcHBseSBvcHRpb25zIHRvIGNoYXJ0CiAgICAgICAgbXlDaGFydC5zZXRPcHRpb24ob3B0aW9uKQoKICAgICAgICAvLyBBZGQgY2xpY2sgZXZlbnQgZm9yIGludGVyYWN0aXZpdHkKICAgICAgICBteUNoYXJ0Lm9uKCdjbGljaycsIGZ1bmN0aW9uIChwYXJhbXMpIHsKICAgICAgICAgIGNvbnN0IHN0cmVhbU5hbWUgPSBwYXJhbXMuc2VyaWVzTmFtZQogICAgICAgICAgY29uc3Qgc3RyZWFtSW5kZXggPSBwYXJhbXMuZGF0YUluZGV4CiAgICAgICAgICBjb25zdCBzdHJlYW0gPSBkYXRhLnN0cmVhbXMuZmluZCgKICAgICAgICAgICAgKHN0cmVhbSkgPT4gc3RyZWFtLm5hbWUgPT09IHN0cmVhbU5hbWUKICAgICAgICAgICkKICAgICAgICAgIGlmIChzdHJlYW0gJiYgc3RyZWFtLndlZWtzW3N0cmVhbUluZGV4XSkgewogICAgICAgICAgICB1cGRhdGVUYWJsZSh7CiAgICAgICAgICAgICAgc3JjQ2hhcnQ6IGNoYXJ0VGl0bGUsCiAgICAgICAgICAgICAgc2VsZWN0aW9uOiBgJHtzdHJlYW1OYW1lfSBvbiAke2RhdGVGbnMuZm9ybWF0KG5ldyBEYXRlKHN0cmVhbS53ZWVrc1tzdHJlYW1JbmRleF0uZmlyc3REYXkpLCAnTExMIGRvJyl9ICgke3N0cmVhbS53ZWVrc1tzdHJlYW1JbmRleF0ubm9kZXMubGVuZ3RofSBub2RlcylgLAogICAgICAgICAgICAgIG5vZGVzOiBzdHJlYW0ud2Vla3Nbc3RyZWFtSW5kZXhdLm5vZGVzCiAgICAgICAgICAgIH0pCiAgICAgICAgICB9CiAgICAgICAgfSkKCiAgICAgICAgLy8gTWFrZSBjaGFydCByZXNwb25zaXZlCiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgIG15Q2hhcnQucmVzaXplKCkKICAgICAgICB9KQoKICAgICAgICByZXR1cm4gbXlDaGFydAogICAgICB9CgogICAgICBmdW5jdGlvbiBjcmVhdGVXZWVrbHlWZWxvY2l0eUNoYXJ0KGVsZW1lbnRJZCwgZGF0YSwgbWV0cmljKSB7CiAgICAgICAgY29uc3QgY2hhcnREb20gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChlbGVtZW50SWQpCiAgICAgICAgY29uc3QgbXlDaGFydCA9IGVjaGFydHMuaW5pdChjaGFydERvbSkKCiAgICAgICAgY29uc3QgdmlzaWJsZUNvdW50ID0gMjAKICAgICAgICBjb25zdCBzdGFydFBlcmNlbnRhZ2UgPQogICAgICAgICAgKChkYXRhLndlZWtzLmxlbmd0aCAtIHZpc2libGVDb3VudCkgLyBkYXRhLndlZWtzLmxlbmd0aCkgKiAxMDAKICAgICAgICBjb25zdCBlbmRQZXJjZW50YWdlID0gMTAwCgogICAgICAgIGNvbnN0IGNoYXJ0VGl0bGUgPSAnV2Vla2x5IFZlbG9jaXR5JwoKICAgICAgICBjb25zdCBoaWdoZXN0VmFsdWUgPSBNYXRoLm1heCgKICAgICAgICAgIC4uLmRhdGEud2Vla3MubWFwKCh3ZWVrKSA9PiB3ZWVrLm1ldHJpY3Mubm9kZXMudmVsb2NpdHkpCiAgICAgICAgKQogICAgICAgIGNvbnN0IHJvdW5kVXBIaWdoZXN0ID0gTWF0aC5jZWlsKGhpZ2hlc3RWYWx1ZSAvIDEwKSAqIDEwCgogICAgICAgIGNvbnN0IG9wdGlvbiA9IHsKICAgICAgICAgIHRpdGxlOiB7CiAgICAgICAgICAgIHRleHQ6IGNoYXJ0VGl0bGUsCiAgICAgICAgICAgIHBvc2l0aW9uOiAndG9wJywKICAgICAgICAgICAgbGVmdDogJ2NlbnRlcicsCiAgICAgICAgICAgIHRleHRTdHlsZTogewogICAgICAgICAgICAgIGZvbnRTaXplOiAxNAogICAgICAgICAgICB9CiAgICAgICAgICB9LAogICAgICAgICAgbGVnZW5kOiBnZXRMZWdlbmQoZGF0YS5zdHJlYW1zLmxlbmd0aCksCiAgICAgICAgICB0b29sdGlwOiB7CiAgICAgICAgICAgIHRyaWdnZXI6ICdheGlzJywKICAgICAgICAgICAgYXhpc1BvaW50ZXI6IHsKICAgICAgICAgICAgICB0eXBlOiAnc2hhZG93JwogICAgICAgICAgICB9LAogICAgICAgICAgICBmb3JtYXR0ZXI6IGZ1bmN0aW9uIChwYXJhbXMpIHsKICAgICAgICAgICAgICByZXR1cm4gdG9vbHRpcEZvcm1hdHRlcihwYXJhbXMpCiAgICAgICAgICAgIH0KICAgICAgICAgIH0sCiAgICAgICAgICBncmlkOiB7CiAgICAgICAgICAgIGxlZnQ6ICczJScsCiAgICAgICAgICAgIHJpZ2h0OiAnNCUnLAogICAgICAgICAgICBib3R0b206ICczJScsCiAgICAgICAgICAgIHRvcDogJzMwJScsCiAgICAgICAgICAgIGNvbnRhaW5MYWJlbDogdHJ1ZQogICAgICAgICAgfSwKICAgICAgICAgIGRhdGFab29tOiBbCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICB0eXBlOiAnaW5zaWRlJywgLy8gQWxsb3dzIHNjcm9sbGluZyB3aXRoIG1vdXNlIG9yIHRvdWNoIGdlc3R1cmVzCiAgICAgICAgICAgICAgeEF4aXNJbmRleDogMCwKICAgICAgICAgICAgICBzdGFydDogc3RhcnRQZXJjZW50YWdlLAogICAgICAgICAgICAgIGVuZDogZW5kUGVyY2VudGFnZQogICAgICAgICAgICB9CiAgICAgICAgICBdLAogICAgICAgICAgeEF4aXM6IHsKICAgICAgICAgICAgdHlwZTogJ2NhdGVnb3J5JywKICAgICAgICAgICAgYXhpc0xhYmVsOiB7IGludGVydmFsOiAwLCByb3RhdGU6IDMwIH0sCiAgICAgICAgICAgIGRhdGE6IGRhdGEud2Vla3MubWFwKCh2YWx1ZSwgaW5kZXgpID0+CiAgICAgICAgICAgICAgZGF0ZUZucy5mb3JtYXQobmV3IERhdGUodmFsdWUuZmlyc3REYXkpLCAnTExMIGRvJykKICAgICAgICAgICAgKQogICAgICAgICAgfSwKICAgICAgICAgIHlBeGlzOiB7CiAgICAgICAgICAgIHR5cGU6ICd2YWx1ZScsCiAgICAgICAgICAgIG1pbjogMCwKICAgICAgICAgICAgbWF4OiByb3VuZFVwSGlnaGVzdAogICAgICAgICAgfSwKICAgICAgICAgIHNlcmllczogWwogICAgICAgICAgICAuLi5kYXRhLnN0cmVhbXMubWFwKChzdHJlYW0sIGluZGV4KSA9PiB7CiAgICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgIG5hbWU6IHN0cmVhbS5uYW1lLAogICAgICAgICAgICAgICAgdHlwZTogJ2xpbmUnLAogICAgICAgICAgICAgICAgZGF0YTogc3RyZWFtLndlZWtzLm1hcCgKICAgICAgICAgICAgICAgICAgKHZhbHVlLCBpbmRleCkgPT4gdmFsdWUubWV0cmljc1ttZXRyaWNdLnZlbG9jaXR5CiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KSwKICAgICAgICAgICAgewogICAgICAgICAgICAgIG5hbWU6ICdUb3RhbCcsCiAgICAgICAgICAgICAgdHlwZTogJ2xpbmUnLAogICAgICAgICAgICAgIGRhdGE6IGRhdGEud2Vla3MubWFwKAogICAgICAgICAgICAgICAgKHdlZWssIGluZGV4KSA9PiB3ZWVrLm1ldHJpY3NbbWV0cmljXS52ZWxvY2l0eQogICAgICAgICAgICAgICkKICAgICAgICAgICAgfQogICAgICAgICAgXQogICAgICAgIH0KCiAgICAgICAgLy8gQXBwbHkgb3B0aW9ucyB0byBjaGFydAogICAgICAgIG15Q2hhcnQuc2V0T3B0aW9uKG9wdGlvbikKCiAgICAgICAgLy8gTWFrZSBjaGFydCByZXNwb25zaXZlCiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgIG15Q2hhcnQucmVzaXplKCkKICAgICAgICB9KQoKICAgICAgICByZXR1cm4gbXlDaGFydAogICAgICB9CgogICAgICBmdW5jdGlvbiBjcmVhdGVFZmZvcnREaXN0cmlidXRpb25DaGFydChlbGVtZW50SWQsIGRhdGEsIG1ldHJpYykgewogICAgICAgIGNvbnN0IGNoYXJ0RG9tID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZWxlbWVudElkKQogICAgICAgIGNvbnN0IG15Q2hhcnQgPSBlY2hhcnRzLmluaXQoY2hhcnREb20pCgogICAgICAgIGNvbnN0IHZpc2libGVDb3VudCA9IDIwCiAgICAgICAgY29uc3Qgc3RhcnRQZXJjZW50YWdlID0KICAgICAgICAgICgoZGF0YS53ZWVrcy5sZW5ndGggLSB2aXNpYmxlQ291bnQpIC8gZGF0YS53ZWVrcy5sZW5ndGgpICogMTAwCiAgICAgICAgY29uc3QgZW5kUGVyY2VudGFnZSA9IDEwMAoKICAgICAgICBjb25zdCBjaGFydFRpdGxlID0gJ0VmZm9ydCBEaXN0cmlidXRpb24gKCUpJwoKICAgICAgICBjb25zdCBvcHRpb24gPSB7CiAgICAgICAgICB0aXRsZTogewogICAgICAgICAgICB0ZXh0OiBjaGFydFRpdGxlLAogICAgICAgICAgICBwb3NpdGlvbjogJ3RvcCcsCiAgICAgICAgICAgIGxlZnQ6ICdjZW50ZXInLAogICAgICAgICAgICB0ZXh0U3R5bGU6IHsKICAgICAgICAgICAgICBmb250U2l6ZTogMTQKICAgICAgICAgICAgfQogICAgICAgICAgfSwKICAgICAgICAgIGxlZ2VuZDogZ2V0TGVnZW5kKGRhdGEuc3RyZWFtcy5sZW5ndGgpLAogICAgICAgICAgdG9vbHRpcDogewogICAgICAgICAgICB0cmlnZ2VyOiAnYXhpcycsCiAgICAgICAgICAgIGF4aXNQb2ludGVyOiB7CiAgICAgICAgICAgICAgdHlwZTogJ3NoYWRvdycKICAgICAgICAgICAgfSwKICAgICAgICAgICAgZm9ybWF0dGVyOiBmdW5jdGlvbiAocGFyYW1zKSB7CiAgICAgICAgICAgICAgcmV0dXJuIHRvb2x0aXBGb3JtYXR0ZXIocGFyYW1zLCAnJScpCiAgICAgICAgICAgIH0KICAgICAgICAgIH0sCiAgICAgICAgICBncmlkOiB7CiAgICAgICAgICAgIGxlZnQ6ICczJScsCiAgICAgICAgICAgIHJpZ2h0OiAnNCUnLAogICAgICAgICAgICBib3R0b206ICczJScsCiAgICAgICAgICAgIHRvcDogJzMwJScsCiAgICAgICAgICAgIGNvbnRhaW5MYWJlbDogdHJ1ZQogICAgICAgICAgfSwKICAgICAgICAgIGRhdGFab29tOiBbCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICB0eXBlOiAnaW5zaWRlJywgLy8gQWxsb3dzIHNjcm9sbGluZyB3aXRoIG1vdXNlIG9yIHRvdWNoIGdlc3R1cmVzCiAgICAgICAgICAgICAgeEF4aXNJbmRleDogMCwKICAgICAgICAgICAgICBzdGFydDogc3RhcnRQZXJjZW50YWdlLAogICAgICAgICAgICAgIGVuZDogZW5kUGVyY2VudGFnZQogICAgICAgICAgICB9CiAgICAgICAgICBdLAogICAgICAgICAgeEF4aXM6IHsKICAgICAgICAgICAgdHlwZTogJ2NhdGVnb3J5JywKICAgICAgICAgICAgYXhpc0xhYmVsOiB7IGludGVydmFsOiAwLCByb3RhdGU6IDMwIH0sCiAgICAgICAgICAgIGRhdGE6IGRhdGEud2Vla3MubWFwKCh2YWx1ZSwgaW5kZXgpID0+CiAgICAgICAgICAgICAgZGF0ZUZucy5mb3JtYXQobmV3IERhdGUodmFsdWUuZmlyc3REYXkpLCAnTExMIGRvJykKICAgICAgICAgICAgKQogICAgICAgICAgfSwKICAgICAgICAgIHlBeGlzOiB7CiAgICAgICAgICAgIHR5cGU6ICd2YWx1ZScsCiAgICAgICAgICAgIG1pbjogMCwKICAgICAgICAgICAgbWF4OiAxMDAKICAgICAgICAgIH0sCiAgICAgICAgICBzZXJpZXM6IFsKICAgICAgICAgICAgLi4uZGF0YS5zdHJlYW1zLm1hcCgoc3RyZWFtLCBpbmRleCkgPT4gewogICAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgICBuYW1lOiBzdHJlYW0ubmFtZSwKICAgICAgICAgICAgICAgIHR5cGU6ICdiYXInLAogICAgICAgICAgICAgICAgc3RhY2s6ICdhZCcsCiAgICAgICAgICAgICAgICBkYXRhOiBzdHJlYW0ud2Vla3MubWFwKAogICAgICAgICAgICAgICAgICAodmFsdWUsIGluZGV4KSA9PiB2YWx1ZS5tZXRyaWNzW21ldHJpY10uZGlzdHJpYnV0aW9uCiAgICAgICAgICAgICAgICApLAogICAgICAgICAgICAgICAgYmFyV2lkdGg6ICcxMDAlJywgLy8gRW5zdXJlcyBiYXJzIGZpbGwgdGhlaXIgYWxsb2NhdGVkIHNwYWNlCiAgICAgICAgICAgICAgICBiYXJHYXA6ICcwJScsIC8vIFJlbW92ZXMgc3BhY2luZyBiZXR3ZWVuIHNlcmllcyAoaWYgbXVsdGlwbGUpCiAgICAgICAgICAgICAgICBiYXJDYXRlZ29yeUdhcDogJzAlJyAvLyBSZW1vdmVzIHNwYWNpbmcgYmV0d2VlbiBjYXRlZ29yaWVzCiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KQogICAgICAgICAgXQogICAgICAgIH0KCiAgICAgICAgLy8gQXBwbHkgb3B0aW9ucyB0byBjaGFydAogICAgICAgIG15Q2hhcnQuc2V0T3B0aW9uKG9wdGlvbikKCiAgICAgICAgLy8gQWRkIGNsaWNrIGV2ZW50IGZvciBpbnRlcmFjdGl2aXR5CiAgICAgICAgbXlDaGFydC5vbignY2xpY2snLCBmdW5jdGlvbiAocGFyYW1zKSB7CiAgICAgICAgICBjb25zdCBzdHJlYW1OYW1lID0gcGFyYW1zLnNlcmllc05hbWUKICAgICAgICAgIGNvbnN0IHN0cmVhbUluZGV4ID0gcGFyYW1zLmRhdGFJbmRleAogICAgICAgICAgY29uc3Qgc3RyZWFtID0gZGF0YS5zdHJlYW1zLmZpbmQoCiAgICAgICAgICAgIChzdHJlYW0pID0+IHN0cmVhbS5uYW1lID09PSBzdHJlYW1OYW1lCiAgICAgICAgICApCiAgICAgICAgICBpZiAoc3RyZWFtICYmIHN0cmVhbS53ZWVrc1tzdHJlYW1JbmRleF0pIHsKICAgICAgICAgICAgdXBkYXRlVGFibGUoewogICAgICAgICAgICAgIHNyY0NoYXJ0OiBjaGFydFRpdGxlLAogICAgICAgICAgICAgIHNlbGVjdGlvbjogYCR7c3RyZWFtTmFtZX0gb24gJHtkYXRlRm5zLmZvcm1hdChuZXcgRGF0ZShzdHJlYW0ud2Vla3Nbc3RyZWFtSW5kZXhdLmZpcnN0RGF5KSwgJ0xMTCBkbycpfSAoJHtzdHJlYW0ud2Vla3Nbc3RyZWFtSW5kZXhdLm5vZGVzLmxlbmd0aH0gbm9kZXMpYCwKICAgICAgICAgICAgICBub2Rlczogc3RyZWFtLndlZWtzW3N0cmVhbUluZGV4XS5ub2RlcwogICAgICAgICAgICB9KQogICAgICAgICAgfQogICAgICAgIH0pCgogICAgICAgIC8vIE1ha2UgY2hhcnQgcmVzcG9uc2l2ZQogICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBteUNoYXJ0LnJlc2l6ZSgpCiAgICAgICAgfSkKCiAgICAgICAgcmV0dXJuIG15Q2hhcnQKICAgICAgfQoKICAgICAgZnVuY3Rpb24gdG9nZ2xlVmlld01vZGUoKSB7CiAgICAgICAgY29uc3Qgc3dpdGNoRWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd2aWV3LW1vZGUtc3dpdGNoJykKCiAgICAgICAgdXBkYXRlQWxsQ2hhcnRzKHN3aXRjaEVsZW1lbnQuY2hlY2tlZCA/ICdub2RlcycgOiAncG9pbnRzJykKICAgICAgfQoKICAgICAgY29uc3QgZmlsdGVyZWREYXRhc2V0ID0gKGdyb3VwTWV0cmljcykgPT4gewogICAgICAgIGlmIChncm91cE1ldHJpY3MucXVlcnkgPT09IHVuZGVmaW5lZCkgewogICAgICAgICAgcmV0dXJuICcnCiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHJldHVybiBgT3ZlcmFsbCBwcm9qZWN0IGRhdGEgZmlsdGVyZWQ6ICR7SlNPTi5zdHJpbmdpZnkoZ3JvdXBNZXRyaWNzLnF1ZXJ5KX0gIDxiciAvPmAKICAgICAgICB9CiAgICAgIH0KCiAgICAgIC8vIEZ1bmN0aW9uIHRvIGluaXRpYWxpemUgdGhlIGRhc2hib2FyZCBtZXRhZGF0YQogICAgICBmdW5jdGlvbiBpbml0aWFsaXplRGFzaGJvYXJkKCkgewogICAgICAgIC8vIFNldCBkYXNoYm9hcmQgdGl0bGUgYW5kIG1ldGFkYXRhIGZyb20gdGhlIGRhdGEgb2JqZWN0CiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Rhc2hib2FyZC10aXRsZScpLnRleHRDb250ZW50ID0KICAgICAgICAgIGdyb3VwTWV0cmljcy5uYW1lCiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Rhc2hib2FyZC1kZXNjcmlwdGlvbicpLnRleHRDb250ZW50ID0KICAgICAgICAgIGdyb3VwTWV0cmljcy5kZXNjcmlwdGlvbgoKICAgICAgICBpZiAoZ3JvdXBNZXRyaWNzLnF1ZXJ5ID09PSB1bmRlZmluZWQpIHsKICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkYXNoYm9hcmQtcHJvamVjdGZpbHRlcicpLnRleHRDb250ZW50ID0gJycKICAgICAgICB9IGVsc2UgewogICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Rhc2hib2FyZC1wcm9qZWN0ZmlsdGVyJykudGV4dENvbnRlbnQgPQogICAgICAgICAgICBgT3ZlcmFsbCBwcm9qZWN0IGRhdGEgZmlsdGVyZWQ6ICR7SlNPTi5zdHJpbmdpZnkoZ3JvdXBNZXRyaWNzLnF1ZXJ5KX1gCiAgICAgICAgfQoKICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGFzaGJvYXJkLW1ldGFkYXRhJykudGV4dENvbnRlbnQgPQogICAgICAgICAgYExhc3QgdXBkYXRlZDogJHtncm91cE1ldHJpY3MudXBkYXRlZEF0fWAKCiAgICAgICAgY29uc3QgZGVmYXVsdE1ldHJpYyA9CiAgICAgICAgICBncm91cE1ldHJpY3MuZGVmYXVsdE1ldHJpYyAhPT0gdW5kZWZpbmVkCiAgICAgICAgICAgID8gZ3JvdXBNZXRyaWNzLmRlZmF1bHRNZXRyaWMKICAgICAgICAgICAgOiAncG9pbnRzJwoKICAgICAgICB1cGRhdGVBbGxDaGFydHMoZGVmYXVsdE1ldHJpYykKCiAgICAgICAgLy8gU2V0IHVwIGV2ZW50IGxpc3RlbmVyIGZvciB2aWV3IG1vZGUgc3dpdGNoCiAgICAgICAgY29uc3Qgc3dpdGNoRWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd2aWV3LW1vZGUtc3dpdGNoJykKICAgICAgICBzd2l0Y2hFbGVtZW50LmNoZWNrZWQgPSBkZWZhdWx0TWV0cmljID09PSAnbm9kZXMnCgogICAgICAgIHN3aXRjaEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgdG9nZ2xlVmlld01vZGUpCgogICAgICAgIHVwZGF0ZVN0cmVhbXNUYWJsZShncm91cE1ldHJpY3MpCiAgICAgIH0KCiAgICAgIGZ1bmN0aW9uIHVwZGF0ZUFsbENoYXJ0cyhtZXRyaWMpIHsKICAgICAgICBjb25zb2xlLmxvZygnVXBkYXRpbmcgYWxsIGNoYXJ0cyB0byBkaXNwbGF5IG1ldHJpYzonLCBtZXRyaWMpCiAgICAgICAgY3JlYXRlV2Vla2x5Q29tcGxldGlvbkNoYXJ0KAogICAgICAgICAgJ3dlZWtseWNvbXBsZXRpb25jaGFydCcsCiAgICAgICAgICBncm91cE1ldHJpY3MsCiAgICAgICAgICBtZXRyaWMKICAgICAgICApCgogICAgICAgIGNyZWF0ZVdlZWtseVZlbG9jaXR5Q2hhcnQoJ3dlZWtseXZlbG9jaXR5Y2hhcnQnLCBncm91cE1ldHJpY3MsIG1ldHJpYykKCiAgICAgICAgY3JlYXRlRWZmb3J0RGlzdHJpYnV0aW9uQ2hhcnQoCiAgICAgICAgICAnZWZmb3J0ZGlzdHJpYnV0aW9uY2hhcnQnLAogICAgICAgICAgZ3JvdXBNZXRyaWNzLAogICAgICAgICAgbWV0cmljCiAgICAgICAgKQogICAgICB9CgogICAgICAvLyBJbml0aWFsaXplIGFsbCBjaGFydHMgd2hlbiBET00gaXMgbG9hZGVkCiAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCBpbml0aWFsaXplRGFzaGJvYXJkKQogICAgPC9zY3JpcHQ+CiAgPC9ib2R5Pgo8L2h0bWw+Cg=='

export default tpl
